/*! by joyone.cn 厦门展网信息技术有限公司  joyone 2015-04-30  1.0.20 */
!function(a,b){var c=window.joy,d=c.ui.Widget,e=d.extend({init:function(a,b){var e=this;d.fn.init.call(e,a,b),a=e.wrapper=e.element,b=e.options,""!=b.label&&a.html(b.label),c.notify(e)},events:[],options:{name:"Lang",label:""}});c.ui.plugin(e)}(jQuery),function(a,b){function c(a,b){if(!b)return a;a+"/"===b&&(a=b);var c=new RegExp("^"+b,"i");return c.test(a)||(a=b+"/"+a),k.protocol+"//"+(k.host+"/"+a).replace(/\/\/+/g,"/")}function d(){return k.href.split("#")[1]||""}function e(a,b){return 0===b.indexOf(a)?b.substr(a.length).replace(/\/\//g,"/"):b}var f=window.joy,g="change",h="back",i="same",j=f.support,k=window.location,l=window.history,m=50,n=/^#*/,o=window.document,p=f.Class.extend({back:function(){l.back()},forward:function(){l.forward()},length:function(){return l.length},replaceLocation:function(a){k.replace(a)}}),q=p.extend({init:function(a){this.root=a},navigate:function(a){l.pushState({},o.title,c(a,this.root))},replace:function(a){l.replaceState({},o.title,c(a,this.root))},normalize:function(a){return e(this.root,a)},current:function(){var a=k.pathname;return k.search&&(a+=k.search),e(this.root,a)},change:function(b){a(window).bind("popstate.joy",b)},stop:function(){a(window).unbind("popstate.joy")},normalizeCurrent:function(a){var b,e=a.root,f=k.pathname,g=d();e===f+"/"&&(b=e),e===f&&g&&(b=c(g.replace(n,""),e)),b&&l.pushState({},o.title,b)}}),r=p.extend({init:function(){this._id=f.guid()},navigate:function(a){k.hash=a},replace:function(a){this.replaceLocation("#"+a.replace(/^#/,""))},normalize:function(a){return a},change:function(b){j.hashChange?a(window).on("hashchange."+this._id,b):this._interval=setInterval(b,m)},stop:function(){a(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return d()},normalizeCurrent:function(a){var b=k.pathname,c=a.root;return a.pushState&&c!==b?(this.replaceLocation(c+"#"+e(c,b)),!0):!1}}),s=f.Observable.extend({start:function(b){if(b=b||{},this.bind([g,h,i],b),!this._started){this._started=!0,b.root=b.root||"/";var c,d=this.createAdapter(b);d.normalizeCurrent(b)||(c=d.current(),a.extend(this,{adapter:d,root:b.root,historyLength:d.length(),current:c,locations:[c]}),d.change(a.proxy(this,"_checkUrl")))}},createAdapter:function(a){return j.pushState&&a.pushState?new q(a.root):new r},stop:function(){this._started&&(this.adapter.stop(),this.unbind(g),this._started=!1)},change:function(a){this.bind(g,a)},replace:function(a,b){this._navigate(a,b,function(b){b.replace(a),this.locations[this.locations-1]=this.current})},navigate:function(a,b){return"#:back"===a?void this.adapter.back():void this._navigate(a,b,function(b){b.navigate(a),this.locations.push(this.current)})},_navigate:function(a,b,c){var d=this.adapter;return a=a.replace(n,""),this.current===a||this.current===decodeURIComponent(a)?void this.trigger(i):void((b||!this.trigger(g,{url:a}))&&(this.current=d.normalize(a),c.call(this,d),this.historyLength=d.length()))},_checkUrl:function(){var a=this.adapter,b=a.current(),c=a.length(),d=this.historyLength===c,e=b===this.locations[this.locations.length-2]&&d,f=this.current;return this.current===b||this.current===decodeURIComponent(b)?!0:(this.historyLength=c,this.current=b,e&&this.trigger("back",{url:f,to:b})?(a.forward(),void(this.current=f)):this.trigger(g,{url:b})?(e?a.forward():(a.back(),this.historyLength--),void(this.current=f)):void(e?this.locations.pop():this.locations.push(b)))}});f.History=s,f.History.HistoryAdapter=p,f.History.HashAdapter=r,f.History.PushStateAdapter=q,f.absoluteURL=c,f.history=new s}(window.joy.jQuery),function(){function a(a,b){return b?a:"([^/]+)"}function b(b){return new RegExp("^"+b.replace(o,"\\$&").replace(l,"(?:$1)?").replace(m,a).replace(n,"(.*?)")+"$")}function c(a){return a.replace(/(\?.*)|(#.*)/g,"")}var d=window.joy,e=d.history,f=d.Observable,g="init",h="routeMissing",i="change",j="back",k="same",l=/\((.*?)\)/g,m=/(\(\?)?:\w+/g,n=/\*\w+/g,o=/[\-{}\[\]+?.,\\\^$|#\s]/g,p=d.Class.extend({init:function(a,c){a instanceof RegExp||(a=b(a)),this.route=a,this._callback=c},callback:function(a){var b,e,f=0,g=d.parseQueryStringParams(a);for(a=c(a),b=this.route.exec(a).slice(1),e=b.length;e>f;f++)"undefined"!=typeof b[f]&&(b[f]=decodeURIComponent(b[f]));b.push(g),this._callback.apply(null,b)},worksWith:function(a){return this.route.test(c(a))?(this.callback(a),!0):!1}}),q=f.extend({init:function(a){f.fn.init.call(this),this.routes=[],this.pushState=a?a.pushState:!1,a&&a.root&&(this.root=a.root),this.bind([g,h,i,k],a)},destroy:function(){e.unbind(i,this._urlChangedProxy),e.unbind(k,this._sameProxy),e.unbind(j,this._backProxy),this.unbind()},start:function(){var a=this,b=function(){a._same()},c=function(b){a._back(b)},d=function(b){a._urlChanged(b)};e.start({same:b,change:d,back:c,pushState:a.pushState,root:a.root});var f={url:e.current||"/",preventDefault:$.noop};a.trigger(g,f)||a._urlChanged(f),this._urlChangedProxy=d,this._backProxy=c},route:function(a,b){this.routes.push(new p(a,b))},navigate:function(a,b){d.history.navigate(a,b)},replace:function(a,b){d.history.replace(a,b)},_back:function(a){this.trigger(j,{url:a.url,to:a.to})&&a.preventDefault()},_same:function(a){this.trigger(k)},_urlChanged:function(a){var b=a.url;if(b||(b="/"),this.trigger(i,{url:a.url,params:d.parseQueryStringParams(a.url)}))return void a.preventDefault();for(var c,e=0,f=this.routes,g=f.length;g>e;e++)if(c=f[e],c.worksWith(b))return;this.trigger(h,{url:b,params:d.parseQueryStringParams(b)})&&a.preventDefault()}});d.Router=q}(),function(a,b){b(["./joy.core","./joy.data.odata","./joy.data.xml"],a)}(function(){return function(a,b){function c(a,b,c,d){return function(e){var f,g={};for(f in e)g[f]=e[f];g.field=d?c+"."+e.field:c,b==ca&&a._notifyChange&&a._notifyChange(g),a.trigger(b,g)}}function d(b,c){if(b===c)return!0;var e,f=a.type(b),g=a.type(c);if(f!==g)return!1;if("date"===f)return b.getTime()===c.getTime();if("object"!==f&&"array"!==f)return!1;for(e in b)if(!d(b[e],c[e]))return!1;return!0}function e(a,b){var c,d;for(d in a){if(c=a[d],N(c)&&c.field&&c.field===b)return c;if(c===b)return c}return null}function f(a){this.data=a||[]}function g(a,c){if(a){var d=typeof a===Y?{field:a,dir:c}:a,e=P(d)?d:d!==b?[d]:[];return Q(e,function(a){return!!a.dir})}}function h(a){var b,c,d,e,f=a.filters;if(f)for(b=0,c=f.length;c>b;b++)d=f[b],e=d.operator,e&&typeof e===Y&&(d.operator=Ia[e.toLowerCase()]||e),h(d)}function i(a){return a&&!O(a)?((P(a)||!a.filters)&&(a={logic:"and",filters:P(a)?a:[a]}),h(a),a):void 0}function j(a){return P(a)?a:[a]}function k(a,c){var d=typeof a===Y?{field:a,dir:c}:a,e=P(d)?d:d!==b?[d]:[];return K(e,function(a){return{field:a.field,dir:a.dir||"asc",aggregates:a.aggregates}})}function l(a,b){return a&&a.getTime&&b&&b.getTime?a.getTime()===b.getTime():a===b}function m(a,b,c,d,e){b=b||[];var f,g,h,i=b.length;for(f=0;i>f;f++){g=b[f],h=g.aggregate;var j=g.field;a[j]=a[j]||{},a[j][h]=Ja[h.toLowerCase()](a[j][h],c,U.accessor(j),d,e)}}function n(a){return"number"==typeof a&&!isNaN(a)}function o(a){var b,c=a.length,d=new Array(c);for(b=0;c>b;b++)d[b]=a[b].toJSON();return d}function p(a,b){b=b||{};var c=new f(a),d=b.aggregate,e=b.filter;return e&&(c=c.filter(e)),c.aggregate(d)}function q(a,b,c,d,e){var f,g,h,i,j;for(i=0,j=a.length;j>i;i++){f=a[i];for(g in b)h=e[g],h&&h!==g&&(f[h]=b[g](f),delete f[g])}}function r(a,b,c,d,e){var f,g,h,i,j;for(i=0,j=a.length;j>i;i++){f=a[i];for(g in b)f[g]=c._parse(g,b[g](f)),h=e[g],h&&h!==g&&delete f[h]}}function s(a,b,c,d,e){var f,g,h,i;for(g=0,i=a.length;i>g;g++)f=a[g],h=d[f.field],h&&h!=f.field&&(f.field=h),f.value=c._parse(f.field,f.value),f.hasSubgroups?s(f.items,b,c,d,e):r(f.items,b,c,d,e)}function t(a,b,c,d,e,f){return function(g){return g=a(g),g&&!O(d)&&("[object Array]"===va.call(g)||g instanceof Aa||(g=[g]),c(g,d,new b,e,f)),g||[]}}function u(a,b,c,d){for(var e,f,g=0;b.length&&d;){e=b[g],f=e.items;var h=f.length;if(a&&a.field===e.field&&a.value===e.value?(a.hasSubgroups&&a.items.length?u(a.items[a.items.length-1],e.items,c,d):(f=f.slice(c,c+d),a.items=a.items.concat(f)),b.splice(g--,1)):e.hasSubgroups&&f.length?u(e,f,c,d):(f=f.slice(c,c+d),e.items=f,e.items.length||b.splice(g--,1)),0===f.length?c-=h:(c=0,d-=f.length),++g>=b.length)break}g<b.length&&b.splice(g,b.length-g)}function v(a){var b,c,d=[];for(b=0,c=a.length;c>b;b++)d=d.concat(a[b].hasSubgroups?v(a[b].items):a[b].items.slice());return d}function w(a,b){var c,d,e,f;if(b)for(c=0,d=a.length;d>c;c++)e=a[c],f=e.items,e.hasSubgroups?w(f,b):!f.length||f[0]instanceof b||(f.type=b,f.wrapAll(f,f))}function x(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c].hasSubgroups){if(x(a[c].items,b))return!0}else if(b(a[c].items,a[c]))return!0}function y(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c].uid==b.uid)return b=a[c],a.splice(c,1),b}function z(a,b){var c,d,e,f;for(e=a.length-1,f=0;e>=f;e--)d=a[e],c={value:b.get(d.field),field:d.field,items:c?[c]:[b],hasSubgroups:!!c,aggregates:{}};return c}function A(a,b){return b?C(a,function(a){return a[b.idField]===b.id}):-1}function B(a,b){return b?C(a,function(a){return a.uid==b.uid}):-1}function C(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(b(a[c]))return c;return-1}function D(a,b){if(a&&!O(a)){var c,d=a[b];return c=N(d)?d.from||d.field||b:a[b]||b,V(c)?b:c}return b}function E(a,b){var c,d,e={};for(var f in a)"filters"!==f&&(e[f]=a[f]);if(a.filters)for(e.filters=[],c=0,d=a.filters.length;d>c;c++)e.filters[c]=E(a.filters[c],b);else e.field=D(b.fields,e.field);return e}function F(a,b){var c,d,e,f,g=[];for(c=0,d=a.length;d>c;c++){e={},f=a[c];for(var h in f)e[h]=f[h];e.field=D(b.fields,e.field),e.aggregates&&P(e.aggregates)&&(e.aggregates=F(e.aggregates,b)),g.push(e)}return g}function G(b,c){var d,e,f,g,h,i=a(b)[0].children,j=[],k=c[0],l=c[1];for(d=0,e=i.length;e>d;d++)f={},h=i[d],h.disabled||(f[k.field]=h.text,g=h.attributes.value,g=g&&g.specified?h.value:h.text,f[l.field]=g,j.push(f));return j}function H(b,c){var d,e,f,g,h,i,j,k=a(b)[0].tBodies[0],l=k?k.rows:[],m=c.length,n=[];for(d=0,e=l.length;e>d;d++){for(h={},j=!0,g=l[d].cells,f=0;m>f;f++)i=g[f],"th"!==i.nodeName.toLowerCase()&&(j=!1,h[c[f].field]=i.innerHTML);j||n.push(h)}return n}function I(a){return function(){var b=this._data,c=Oa.fn[a].apply(this,ta.call(arguments));return this._data!=b&&this._attachBubbleHandlers(),c}}function J(b,c){function d(a,b){return a.filter(b).add(a.find(b))}var e,f,g,h,i,j,k,l,m=a(b).children(),n=[],o=c[0].field,p=c[1]&&c[1].field,q=c[2]&&c[2].field,r=c[3]&&c[3].field;for(e=0,f=m.length;f>e;e++)g={_loaded:!0},h=m.eq(e),j=h[0].firstChild,l=h.children(),b=l.filter("ul"),l=l.filter(":not(ul)"),i=h.attr("data-id"),i&&(g.id=i),j&&(g[o]=3==j.nodeType?j.nodeValue:l.text()),p&&(g[p]=d(l,"a").attr("href")),r&&(g[r]=d(l,"img").attr("src")),q&&(k=d(l,".k-sprite").prop("className"),g[q]=k&&a.trim(k.replace("k-sprite",""))),b.length&&(g.items=J(b.eq(0),c)),"true"==h.attr("data-hasChildren")&&(g.hasChildren=!0),n.push(g);return n}var K,L=a.extend,M=a.proxy,N=a.isPlainObject,O=a.isEmptyObject,P=a.isArray,Q=a.grep,R=a.ajax,S=a.each,T=a.noop,U=window.joy,V=U.isFunction,W=U.Observable,X=U.Class,Y="string",Z="function",$="create",_="read",aa="update",ba="destroy",ca="change",da="sync",ea="get",fa="error",ga="requestStart",ha="progress",ia="requestEnd",ja=[$,_,aa,ba],ka=function(a){return a},la=U.getter,ma=U.stringify,na=Math,oa=[].push,pa=[].join,qa=[].pop,ra=[].splice,sa=[].shift,ta=[].slice,ua=[].unshift,va={}.toString,wa=U.support.stableSort,xa=/^\/Date\((.*?)\)\/$/,ya=/(\r+|\n+)/g,za=/(?=['\\])/g,Aa=W.extend({init:function(a,b){var c=this;c.type=b||Ba,W.fn.init.call(c),c.length=a.length,c.wrapAll(a,c)},toJSON:function(){var a,b,c=this.length,d=new Array(c);for(a=0;c>a;a++)b=this[a],b instanceof Ba&&(b=b.toJSON()),d[a]=b;return d},parent:T,wrapAll:function(a,b){var c,d,e=this,f=function(){return e};for(b=b||[],c=0,d=a.length;d>c;c++)b[c]=e.wrap(a[c],f);return b},wrap:function(a,b){var c,d=this;return null!==a&&"[object Object]"===va.call(a)&&(c=a instanceof d.type||a instanceof Ea,c||(a=a instanceof Ba?a.toJSON():a,a=new d.type(a)),a.parent=b,a.bind(ca,function(a){d.trigger(ca,{field:a.field,node:a.node,index:a.index,items:a.items||[this],action:a.node?a.action||"itemchange":"itemchange"})})),a},push:function(){var a,b=this.length,c=this.wrapAll(arguments);return a=oa.apply(this,c),this.trigger(ca,{action:"add",index:b,items:c}),a},slice:ta,join:pa,pop:function(){var a=this.length,b=qa.apply(this);return a&&this.trigger(ca,{action:"remove",index:a-1,items:[b]}),b},splice:function(a,b,c){var d,e,f,g=this.wrapAll(ta.call(arguments,2));if(d=ra.apply(this,[a,b].concat(g)),d.length)for(this.trigger(ca,{action:"remove",index:a,items:d}),e=0,f=d.length;f>e;e++)d[e].children&&d[e].unbind(ca);return c&&this.trigger(ca,{action:"add",index:a,items:g}),d},shift:function(){var a=this.length,b=sa.apply(this);return a&&this.trigger(ca,{action:"remove",index:0,items:[b]}),b},unshift:function(){var a,b=this.wrapAll(arguments);return a=ua.apply(this,b),this.trigger(ca,{action:"add",index:0,items:b}),a},indexOf:function(a){var b,c,d=this;for(b=0,c=d.length;c>b;b++)if(d[b]===a)return b;return-1},forEach:function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)},map:function(a){for(var b=0,c=[],d=this.length;d>b;b++)c[b]=a(this[b],b,this);return c},filter:function(a){for(var b,c=0,d=[],e=this.length;e>c;c++)b=this[c],a(b,c,this)&&(d[d.length]=b);return d},find:function(a){for(var b,c=0,d=this.length;d>c;c++)if(b=this[c],a(b,c,this))return b},every:function(a){for(var b,c=0,d=this.length;d>c;c++)if(b=this[c],!a(b,c,this))return!1;return!0},some:function(a){for(var b,c=0,d=this.length;d>c;c++)if(b=this[c],a(b,c,this))return!0;return!1},remove:function(a){this.splice(this.indexOf(a),1)},empty:function(){this.splice(0,this.length)}}),Ba=W.extend({init:function(a){var b,c,d=this,e=function(){return d};W.fn.init.call(this);for(c in a)b=a[c],"_"!=c.charAt(0)&&(b=d.wrap(b,c,e)),d[c]=b;d.uid=U.guid()},shouldSerialize:function(a){return this.hasOwnProperty(a)&&"_events"!==a&&typeof this[a]!==Z&&"uid"!==a},forEach:function(a){for(var b in this)this.shouldSerialize(b)&&a(this[b],b)},toJSON:function(){var a,b,c={};for(b in this)this.shouldSerialize(b)&&(a=this[b],(a instanceof Ba||a instanceof Aa)&&(a=a.toJSON()),c[b]=a);return c},get:function(a){var b,c=this;return c.trigger(ea,{field:a}),b="this"===a?c:U.getter(a,!0)(c)},_set:function(a,b){var c=this,d=a.indexOf(".")>=0;if(d)for(var e=a.split("."),f="";e.length>1;){f+=e.shift();var g=U.getter(f,!0)(c);if(g instanceof Ba)return g.set(e.join("."),b),d;f+="."}return U.setter(a)(c,b),d},set:function(a,b){var c=this,d=U.getter(a,!0)(c);d!==b&&(c.trigger("set",{field:a,value:b})||(!c._set(a,c.wrap(b,a,function(){return c}))||a.indexOf("(")>=0||a.indexOf("[")>=0)&&c.trigger(ca,{field:a}))},parent:T,wrap:function(a,b,d){var e=this,f=va.call(a);if(null!=a&&("[object Object]"===f||"[object Array]"===f)){var g=a instanceof Aa,h=a instanceof Oa;"[object Object]"!==f||h||g?("[object Array]"===f||g||h)&&(g||h||(a=new Aa(a)),a.parent()!=d()&&a.bind(ca,c(e,ca,b,!1))):(a instanceof Ba||(a=new Ba(a)),a.parent()!=d()&&(a.bind(ea,c(e,ea,b,!0)),a.bind(ca,c(e,ca,b,!0)))),a.parent=d}return a}}),Ca={number:function(a){return U.parseFloat(a)},date:function(a){return U.parseDate(a)},"boolean":function(a){return typeof a===Y?"true"===a.toLowerCase():null!=a?!!a:a},string:function(a){return null!=a?a+"":a},"default":function(a){return a}},Da={string:"",number:0,date:new Date,"boolean":!1,"default":""},Ea=Ba.extend({init:function(c){var d=this;(!c||a.isEmptyObject(c))&&(c=a.extend({},d.defaults,c)),Ba.fn.init.call(d,c),d.dirty=!1,d.idField&&(d.id=d.get(d.idField),d.id===b&&(d.id=d._defaultId))},shouldSerialize:function(a){return Ba.fn.shouldSerialize.call(this,a)&&"uid"!==a&&!("id"!==this.idField&&"id"===a)&&"dirty"!==a&&"_accessors"!==a},_parse:function(a,b){var c,d=this,f=a,g=d.fields||{};return a=g[a],a||(a=e(g,f)),a&&(c=a.parse,!c&&a.type&&(c=Ca[a.type.toLowerCase()])),c?c(b):b},_notifyChange:function(a){var b=a.action;("add"==b||"remove"==b)&&(this.dirty=!0)},editable:function(a){return a=(this.fields||{})[a],a?a.editable!==!1:!0},set:function(a,b,c){var e=this;e.editable(a)&&(b=e._parse(a,b),d(b,e.get(a))||(e.dirty=!0,Ba.fn.set.call(e,a,b,c)))},accept:function(a){var b,c=this,d=function(){return c};for(b in a){var e=a[b];"_"!=b.charAt(0)&&(e=c.wrap(a[b],b,d)),c._set(b,e)}c.idField&&(c.id=c.get(c.idField)),c.dirty=!1},isNew:function(){return this.id===this._defaultId}});Ea.define=function(a,c){c===b&&(c=a,a=Ea);var d,e,f,g,h,i,j,k,l=L({defaults:{}},c),m={},n=l.id;if(n&&(l.idField=n),l.id&&delete l.id,n&&(l.defaults[n]=l._defaultId=""),"[object Array]"===va.call(l.fields)){for(i=0,j=l.fields.length;j>i;i++)f=l.fields[i],typeof f===Y?m[f]={}:f.field&&(m[f.field]=f);l.fields=m}for(e in l.fields)f=l.fields[e],g=f.type||"default",h=null,k=e,e=typeof f.field===Y?f.field:e,f.nullable||(h=l.defaults[k!==e?k:e]=f.defaultValue!==b?f.defaultValue:Da[g.toLowerCase()]),c.id===e&&(l._defaultId=h),l.defaults[k!==e?k:e]=h,f.parse=f.parse||Ca[g];return d=a.extend(l),d.define=function(a){return Ea.define(d,a)},l.fields&&(d.fields=l.fields,d.idField=l.idField),d};var Fa={selector:function(a){return V(a)?a:la(a)},compare:function(a){var b=this.selector(a);return function(a,c){return a=b(a),c=b(c),null==a&&null==c?0:null==a?-1:null==c?1:a.localeCompare?a.localeCompare(c):a>c?1:c>a?-1:0}},create:function(a){var b=a.compare||this.compare(a.field);return"desc"==a.dir?function(a,c){return b(c,a,!0)}:b},combine:function(a){return function(b,c){var d,e,f=a[0](b,c);for(d=1,e=a.length;e>d;d++)f=f||a[d](b,c);return f}}},Ga=L({},Fa,{asc:function(a){var b=this.selector(a);return function(a,c){var d=b(a),e=b(c);return d&&d.getTime&&e&&e.getTime&&(d=d.getTime(),e=e.getTime()),d===e?a.__position-c.__position:null==d?-1:null==e?1:d.localeCompare?d.localeCompare(e):d>e?1:-1}},desc:function(a){var b=this.selector(a);return function(a,c){var d=b(a),e=b(c);return d&&d.getTime&&e&&e.getTime&&(d=d.getTime(),e=e.getTime()),d===e?a.__position-c.__position:null==d?1:null==e?-1:e.localeCompare?e.localeCompare(d):e>d?1:-1}},create:function(a){return this[a.dir](a.field)}});K=function(a,b){var c,d=a.length,e=new Array(d);for(c=0;d>c;c++)e[c]=b(a[c],c,a);return e};var Ha=function(){function a(a){return a.replace(za,"\\").replace(ya,"")}function b(b,c,d,e){var f;return null!=d&&(typeof d===Y&&(d=a(d),f=xa.exec(d),f?d=new Date(+f[1]):e?(d="'"+d.toLowerCase()+"'",c="("+c+" || '').toLowerCase()"):d="'"+d+"'"),d.getTime&&(c="("+c+"?"+c+".getTime():"+c+")",d=d.getTime())),c+" "+b+" "+d}return{eq:function(a,c,d){return b("==",a,c,d)},neq:function(a,c,d){return b("!=",a,c,d)},gt:function(a,c,d){return b(">",a,c,d)},gte:function(a,c,d){return b(">=",a,c,d)},lt:function(a,c,d){return b("<",a,c,d)},lte:function(a,c,d){return b("<=",a,c,d)},startswith:function(b,c,d){return d&&(b="("+b+" || '').toLowerCase()",c&&(c=c.toLowerCase())),c&&(c=a(c)),b+".lastIndexOf('"+c+"', 0) == 0"},endswith:function(b,c,d){return d&&(b="("+b+" || '').toLowerCase()",c&&(c=c.toLowerCase())),c&&(c=a(c)),b+".indexOf('"+c+"', "+b+".length - "+(c||"").length+") >= 0"},contains:function(b,c,d){return d&&(b="("+b+" || '').toLowerCase()",c&&(c=c.toLowerCase())),c&&(c=a(c)),b+".indexOf('"+c+"') >= 0"},doesnotcontain:function(b,c,d){return d&&(b="("+b+" || '').toLowerCase()",c&&(c=c.toLowerCase())),c&&(c=a(c)),b+".indexOf('"+c+"') == -1"}}}();f.filterExpr=function(a){var c,d,e,g,h,i,j=[],k={and:" && ",or:" || "},l=[],m=[],n=a.filters;for(c=0,d=n.length;d>c;c++)e=n[c],h=e.field,i=e.operator,e.filters?(g=f.filterExpr(e),e=g.expression.replace(/__o\[(\d+)\]/g,function(a,b){return b=+b,"__o["+(m.length+b)+"]"}).replace(/__f\[(\d+)\]/g,function(a,b){return b=+b,"__f["+(l.length+b)+"]"}),m.push.apply(m,g.operators),l.push.apply(l,g.fields)):(typeof h===Z?(g="__f["+l.length+"](d)",l.push(h)):g=U.expr(h),typeof i===Z?(e="__o["+m.length+"]("+g+", "+e.value+")",m.push(i)):e=Ha[(i||"eq").toLowerCase()](g,e.value,e.ignoreCase!==b?e.ignoreCase:!0)),j.push(e);return{expression:"("+j.join(k[a.logic])+")",fields:l,operators:m}};var Ia={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};f.normalizeFilter=i,f.prototype={toArray:function(){return this.data},range:function(a,b){return new f(this.data.slice(a,a+b))},skip:function(a){return new f(this.data.slice(a))},take:function(a){return new f(this.data.slice(0,a))},select:function(a){return new f(K(this.data,a))},order:function(a,b){var c={dir:b};return a&&(a.compare?c.compare=a.compare:c.field=a),new f(this.data.slice(0).sort(Fa.create(c)))},orderBy:function(a){return this.order(a,"asc")},orderByDescending:function(a){return this.order(a,"desc")},sort:function(a,b,c){var d,e,f=g(a,b),h=[];if(c=c||Fa,f.length){for(d=0,e=f.length;e>d;d++)h.push(c.create(f[d]));return this.orderBy({compare:c.combine(h)})}return this},filter:function(a){var b,c,d,e,g,h,j,k,l=this.data,m=[];if(a=i(a),!a||0===a.filters.length)return this;for(e=f.filterExpr(a),h=e.fields,j=e.operators,g=k=new Function("d, __f, __o","return "+e.expression),(h.length||j.length)&&(k=function(a){return g(a,h,j)}),b=0,d=l.length;d>b;b++)c=l[b],k(c)&&m.push(c);return new f(m)},group:function(a,b){a=k(a||[]),b=b||this.data;var c,d=this,e=new f(d.data);return a.length>0&&(c=a[0],e=e.groupBy(c).select(function(d){var e=new f(b).filter([{field:d.field,operator:"eq",value:d.value,ignoreCase:!1}]);return{field:d.field,value:d.value,items:a.length>1?new f(d.items).group(a.slice(1),e.toArray()).toArray():d.items,hasSubgroups:a.length>1,aggregates:e.aggregate(c.aggregates)}})),e},groupBy:function(a){if(O(a)||!this.data.length)return new f([]);var b,c,d,e,g=a.field,h=this._sortForGrouping(g,a.dir||"asc"),i=U.accessor(g),j=i.get(h[0],g),k={field:g,value:j,items:[]},m=[k];for(d=0,e=h.length;e>d;d++)b=h[d],c=i.get(b,g),l(j,c)||(j=c,k={field:g,value:j,items:[]},m.push(k)),k.items.push(b);return new f(m)},_sortForGrouping:function(a,b){var c,d,e=this.data;if(!wa){for(c=0,d=e.length;d>c;c++)e[c].__position=c;for(e=new f(e).sort(a,b,Ga).toArray(),c=0,d=e.length;d>c;c++)delete e[c].__position;return e}return this.sort(a,b).toArray()},aggregate:function(a){var b,c,d={};if(a&&a.length)for(b=0,c=this.data.length;c>b;b++)m(d,a,this.data[b],b,c);return d}};var Ja={sum:function(a,b,c){var d=c.get(b);return n(a)?n(d)&&(a+=d):a=d,a},count:function(a){return(a||0)+1},average:function(a,b,c,d,e){var f=c.get(b);return n(a)?n(f)&&(a+=f):a=f,d==e-1&&n(a)&&(a/=e),a},max:function(a,b,c){var d=c.get(b);return n(a)||(a=d),d>a&&n(d)&&(a=d),a},min:function(a,b,c){var d=c.get(b);return n(a)||(a=d),a>d&&n(d)&&(a=d),a}};f.process=function(a,c){c=c||{};var d,e=new f(a),h=c.group,i=k(h||[]).concat(g(c.sort||[])),j=c.filter,l=c.skip,m=c.take;return j&&(e=e.filter(j),d=e.toArray().length),i&&(e=e.sort(i),h&&(a=e.toArray())),l!==b&&m!==b&&(e=e.range(l,m)),h&&(e=e.group(h,a)),{total:d,data:e.toArray()}};var Ka=X.extend({init:function(a){this.data=a.data},read:function(a){a.success(this.data)},update:function(a){a.success(a.data)},create:function(a){a.success(a.data)},destroy:function(a){a.success(a.data)}}),La=X.extend({init:function(a){var b,c=this;a=c.options=L({},c.options,a),S(ja,function(b,c){typeof a[c]===Y&&(a[c]={url:a[c]})}),c.cache=a.cache?Ma.create(a.cache):{find:T,add:T},b=a.parameterMap,V(a.push)&&(c.push=a.push),c.push||(c.push=ka),c.parameterMap=V(b)?b:function(a){var c={};return S(a,function(a,d){a in b&&(a=b[a],N(a)&&(d=a.value(d),a=a.key)),c[a]=d}),c}},options:{parameterMap:ka},create:function(a){return R(this.setup(a,$))},read:function(c){var d,e,f,g=this,h=g.cache;c=g.setup(c,_),d=c.success||T,e=c.error||T,f=h.find(c.data),f!==b?d(f):(c.success=function(a){h.add(c.data,a),d(a)},a.ajax(c))},update:function(a){return R(this.setup(a,aa))},destroy:function(a){return R(this.setup(a,ba))},setup:function(a,b){a=a||{};var c,d=this,e=d.options[b],f=V(e.data)?e.data(a.data):e.data;return a=L(!0,{},e,a),c=L(!0,{},f,a.data),a.data=d.parameterMap(c,b),V(a.url)&&(a.url=a.url(c)),a}}),Ma=X.extend({init:function(){this._store={}},add:function(a,c){a!==b&&(this._store[ma(a)]=c)},find:function(a){return this._store[ma(a)]},clear:function(){this._store={}},remove:function(a){delete this._store[ma(a)]}});Ma.create=function(a){var b={inmemory:function(){return new Ma}};return N(a)&&V(a.find)?a:a===!0?new Ma:b[a]()};var Na=X.extend({init:function(a){var b,c,d,e,f=this;a=a||{};for(b in a)c=a[b],f[b]=typeof c===Y?la(c):c;if(e=a.modelBase||Ea,N(f.model)&&(f.model=d=e.define(f.model)),f.model){var g,h=M(f.data,f),i=M(f.groups,f),j=M(f.serialize,f),k={},l={},m={},n={},o=!1;d=f.model,d.fields&&(S(d.fields,function(a,b){var c;g=a,N(b)&&b.field?g=b.field:typeof b===Y&&(g=b),N(b)&&b.from&&(c=b.from),o=o||c&&c!==a||g!==a,l[a]=la(c||g),m[a]=la(a),k[c||g]=a,n[a]=c||g}),!a.serialize&&o&&(f.serialize=t(j,d,q,m,k,n))),f.data=t(h,d,r,l,k,n),f.groups=t(i,d,s,l,k,n)}},errors:function(a){return a?a.errors:null},parse:ka,data:ka,total:function(a){return a.length},groups:ka,aggregates:function(){return{}},serialize:function(a){return a}}),Oa=W.extend({init:function(a){var c,d,e=this;a&&(d=a.data),a=e.options=L({},e.options,a),e._map={},e._prefetch={},e._data=[],e._pristineData=[],e._ranges=[],e._view=[],e._pristineTotal=0,e._destroyed=[],e._pageSize=a.pageSize,e._page=a.page||(a.pageSize?1:b),e._sort=g(a.sort),e._filter=i(a.filter),e._group=k(a.group),e._aggregate=a.aggregate,e._total=a.total,W.fn.init.call(e),e.transport=Pa.create(a,d),V(e.transport.push)&&e.transport.push({pushCreate:M(e._pushCreate,e),pushUpdate:M(e._pushUpdate,e),pushDestroy:M(e._pushDestroy,e)}),e.reader=new U.data.readers[a.schema.type||"json"](a.schema),c=e.reader.model||{},e._data=e._observe(e._data),e.bind(["push",fa,ca,ga,da,ia,ha],a)},options:{data:[],schema:{modelBase:Ea},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},_isServerGrouped:function(){var a=this.group()||[];return this.options.serverGrouping&&a.length},_pushCreate:function(a){this._push(a,"pushCreate")},_pushUpdate:function(a){this._push(a,"pushUpdate")},_pushDestroy:function(a){this._push(a,"pushDestroy")},_push:function(a,b){var c=this._readData(a);c||(c=a),this[b](c)},_flatData:function(a){return this._isServerGrouped()?v(a):a},parent:T,get:function(a){var b,c,d=this._flatData(this._data);for(b=0,c=d.length;c>b;b++)if(d[b].id==a)return d[b]},getByField:function(a,b){var c,d,e=this._flatData(this._data);for(c=0,d=e.length;d>c;c++)if(e[c][a]==b)return e[c]},getByUid:function(a){var b,c,d=this._flatData(this._data);if(d)for(b=0,c=d.length;c>b;b++)if(d[b].uid==a)return d[b]},indexOf:function(a){return B(this._data,a)},at:function(a){return this._data[a]},data:function(a){var c=this;return a===b?c._data:(c._data=this._observe(a),c._pristineData=a.slice(0),c._ranges=[],c._addRange(c._data),c._total=c._data.length,c._pristineTotal=c._total,c._process(c._data),void 0)},view:function(){return this._view},add:function(a){return this.insert(this._data.length,a)},_createNewModel:function(a){return this.reader.model?new this.reader.model(a):new Ba(a)},insert:function(a,b){return b||(b=a,a=0),b instanceof Ea||(b=this._createNewModel(b)),this._isServerGrouped()?this._data.splice(a,0,z(this.group(),b)):this._data.splice(a,0,b),b},pushCreate:function(a){P(a)||(a=[a]);for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this.add(d);b.push(e);var f=e.toJSON();this._isServerGrouped()&&(f=z(this.group(),f)),this._pristineData.push(f)}b.length&&this.trigger("push",{type:"create",items:b})},pushUpdate:function(a){P(a)||(a=[a]);for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this._createNewModel(d),f=this.get(e.id);f?(b.push(f),f.accept(d),f.trigger("change"),this._updatePristineForModel(f,d)):this.pushCreate(d)}b.length&&this.trigger("push",{type:"update",items:b})},pushDestroy:function(a){P(a)||(a=[a]);var b=[],c=this.options.autoSync;this.options.autoSync=!1;try{for(var d=0;d<a.length;d++){var e=a[d],f=this._createNewModel(e),g=!1;this._eachItem(this._data,function(a){for(var c=0;c<a.length;c++)if(a[c].id===f.id){b.push(a[c]),a.splice(c,1),g=!0;break}}),g&&(this._removePristineForModel(f),this._destroyed.pop())}}finally{this.options.autoSync=c}b.length&&this.trigger("push",{type:"destroy",items:b})},remove:function(a){var b,c=this,d=c._isServerGrouped();return this._eachItem(c._data,function(e){return b=y(e,a),b&&d?(b.isNew&&b.isNew()||c._destroyed.push(b),!0):void 0}),this._removeModelFromRanges(a),this._updateRangesLength(),a},sync:function(){var b,c,d=this,e=[],f=[],g=d._destroyed,h=d._flatData(d._data);if(d.reader.model){for(b=0,c=h.length;c>b;b++)if(h[b].isNew()){var i=h[b];delete i[d.options.schema.model.id],e.push(h[b])}else h[b].dirty&&f.push(h[b]);var j=d._send("create",e);j.push.apply(j,d._send("update",f)),j.push.apply(j,d._send("destroy",g)),a.when.apply(null,j).then(function(){var a,b;for(a=0,b=arguments.length;b>a;a++)d._accept(arguments[a]);d._change({action:"sync"}),d.trigger(da)})}},cancelChanges:function(a){var b=this;a instanceof U.data.Model?b._cancelModel(a):(b._destroyed=[],b._data=b._observe(b._pristineData),b.options.serverPaging&&(b._total=b._pristineTotal),b._change())},hasChanges:function(){var a,b,c=this._data;if(this._destroyed.length)return!0;for(a=0,b=c.length;b>a;a++)if(c[a].isNew()||c[a].dirty)return!0;return!1},_accept:function(b){var c,d=this,e=b.models,f=b.response,g=0,h=d._isServerGrouped(),i=d._pristineData,j=b.type;if(d.trigger(ia,{response:f,type:j}),f&&!O(f)){if(f=d.reader.parse(f),d._handleCustomErrors(f))return;f=d.reader.data(f),P(f)||(f=[f])}else f=a.map(e,function(a){return a.toJSON()});for("destroy"===j&&(d._destroyed=[]),g=0,c=e.length;c>g;g++)"destroy"!==j?(e[g].accept(f[g]),"create"===j?i.push(h?z(d.group(),e[g]):f[g]):"update"===j&&d._updatePristineForModel(e[g],f[g])):d._removePristineForModel(e[g])},_updatePristineForModel:function(a,b){this._executeOnPristineForModel(a,function(a,c){U.deepExtend(c[a],b)})},_executeOnPristineForModel:function(a,b){this._eachPristineItem(function(c){var d=A(c,a);return d>-1?(b(d,c),!0):void 0})},_removePristineForModel:function(a){this._executeOnPristineForModel(a,function(a,b){b.splice(a,1)})},_readData:function(a){var b=this._isServerGrouped()?this.reader.groups:this.reader.data;return b(a)},_eachPristineItem:function(a){this._eachItem(this._pristineData,a)},_eachItem:function(a,b){a&&a.length&&(this._isServerGrouped()?x(a,b):b(a))},_pristineForModel:function(a){var b,c,d=function(d){return c=A(d,a),c>-1?(b=d[c],!0):void 0};return this._eachPristineItem(d),b},_cancelModel:function(a){var b,c=this._pristineForModel(a);this._eachItem(this._data,function(d){b=B(d,a),-1!=b&&(!a.isNew()&&c?d[b].accept(c):d.splice(b,1))})},_promise:function(b,c,d){var e=this,f=e.transport;return a.Deferred(function(a){e.trigger(ga,{type:d}),f[d].call(f,L({success:function(b){a.resolve({response:b,models:c,type:d}),e.read()},error:function(b,c,d){a.reject(b),e.error(b,c,d)}},b))}).promise()},_send:function(a,b){var c,d,e=this,f=[],g=e.reader.serialize(o(b));if(e.options.batch)b.length&&f.push(e._promise({data:{models:g}},b,a));else for(c=0,d=b.length;d>c;c++)b[c].id&&(g[c].id=b[c].id),f.push(e._promise({data:g[c]},[b[c]],a));return f},read:function(a){var b=this,c=b._params(a);b._queueRequest(c,function(){b.trigger(ga,{type:"read"})?b._dequeueRequest():(b.trigger(ha),b._ranges=[],b.transport.read({data:c,success:M(b.success,b),error:M(b.error,b)}))})},success:function(a){var b=this,c=b.options;return a.success&&(a=a.resultObject),b.trigger(ia,{response:a,type:"read"}),a=b.reader.parse(a),b._handleCustomErrors(a)?void b._dequeueRequest():(b._total=b.reader.total(a),b._pristineTotal=b._total,
b._aggregate&&c.serverAggregates&&(b._aggregateResult=b.reader.aggregates(a)),a=b._readData(a),b._pristineData=a.slice(0),b._data=b._observe(a),b._addRange(b._data),b._process(b._data),void b._dequeueRequest())},_addRange:function(a){var b=this,c=b._skip||0,d=c+b._flatData(a).length;b._ranges.push({start:c,end:d,data:a}),b._ranges.sort(function(a,b){return a.start-b.start})},error:function(a,b,c){this._dequeueRequest(),this.trigger(ia,{}),this.trigger(fa,{xhr:a,status:b,errorThrown:c})},_params:function(a){var b,c=this;try{b=c.pageSize()}catch(d){b=null}var e=L({take:c.take(),skip:c.skip(),page:c.page(),pageSize:b,sort:c._sort,filter:c._filter,group:c._group,aggregate:c._aggregate},a);return c.options.serverPaging||(delete e.take,delete e.skip,delete e.page,delete e.pageSize),c.options.serverGrouping?c.reader.model&&e.group&&(e.group=F(e.group,c.reader.model)):delete e.group,c.options.serverFiltering?c.reader.model&&e.filter&&(e.filter=E(e.filter,c.reader.model)):delete e.filter,c.options.serverSorting?c.reader.model&&e.sort&&(e.sort=F(e.sort,c.reader.model)):delete e.sort,c.options.serverAggregates?c.reader.model&&e.aggregate&&(e.aggregate=F(e.aggregate,c.reader.model)):delete e.aggregate,e},_queueRequest:function(a,c){var d=this;d._requestInProgress?d._pending={callback:M(c,d),options:a}:(d._requestInProgress=!0,d._pending=b,c())},_dequeueRequest:function(){var a=this;a._requestInProgress=!1,a._pending&&a._queueRequest(a._pending.options,a._pending.callback)},_handleCustomErrors:function(a){if(this.reader.errors){var b=this.reader.errors(a);if(b)return this.trigger(fa,{xhr:null,status:"customerror",errorThrown:"custom error",errors:b}),!0}return!1},_observe:function(a){var b=this,c=b.reader.model,d=!1;return c&&a.length&&(d=!(a[0]instanceof c)),a instanceof Aa?d&&(a.type=b.reader.model,a.wrapAll(a,a)):(a=new Aa(a,b.reader.model),a.parent=function(){return b.parent()}),b._isServerGrouped()&&w(a,c),b._changeHandler&&b._data&&b._data instanceof Aa?b._data.unbind(ca,b._changeHandler):b._changeHandler=M(b._change,b),a.bind(ca,b._changeHandler)},_change:function(a){var b,c,d=this,e=a?a.action:"";if("remove"===e)for(b=0,c=a.items.length;c>b;b++)a.items[b].isNew&&a.items[b].isNew()||d._destroyed.push(a.items[b]);if(!d.options.autoSync||"add"!==e&&"remove"!==e&&"itemchange"!==e){var f=parseInt(d._total||d._pristineTotal,10);"add"===e?f+=a.items.length:"remove"===e?f-=a.items.length:"itemchange"===e||"sync"===e||d.options.serverPaging?"sync"===e&&(f=d._pristineTotal=parseInt(d._total,10)):f=d._pristineTotal,d._total=f,d._process(d._data,a)}else d.sync()},_process:function(a,c){var d,e=this,g={};e.options.serverPaging!==!0&&(g.skip=e._skip,g.take=e._take||e._pageSize,g.skip===b&&e._page!==b&&e._pageSize!==b&&(g.skip=(e._page-1)*e._pageSize)),e.options.serverSorting!==!0&&(g.sort=e._sort),e.options.serverFiltering!==!0&&(g.filter=e._filter),e.options.serverGrouping!==!0&&(g.group=e._group),e.options.serverAggregates!==!0&&(g.aggregate=e._aggregate,e._aggregateResult=p(a,g)),d=f.process(a,g),e._view=d.data,d.total===b||e.options.serverFiltering||(e._total=d.total),c=c||{},c.items=c.items||e._view,e.trigger(ca,c)},_mergeState:function(a){var c=this;return a!==b&&(c._pageSize=a.pageSize,c._page=a.page,c._sort=a.sort,c._filter=a.filter,c._group=a.group,c._aggregate=a.aggregate,c._skip=a.skip,c._take=a.take,c._skip===b&&(c._skip=c.skip(),a.skip=c.skip()),c._take===b&&c._pageSize!==b&&(c._take=c._pageSize,a.take=c._take),a.sort&&(c._sort=a.sort=g(a.sort)),a.filter&&(c._filter=a.filter=i(a.filter)),a.group&&(c._group=a.group=k(a.group)),a.aggregate&&(c._aggregate=a.aggregate=j(a.aggregate))),a},query:function(a){var c,d=this,e=d.options.serverSorting||d.options.serverPaging||d.options.serverFiltering||d.options.serverGrouping||d.options.serverAggregates;e||(d._data===b||0===d._data.length)&&!d._destroyed.length?d.read(d._mergeState(a)):d.trigger(ga,{type:"read"})||(d.trigger(ha),c=f.process(d._data,d._mergeState(a)),d.options.serverFiltering||(d._total=c.total!==b?c.total:d._data.length),d._view=c.data,d._aggregateResult=p(d._data,a),d.trigger(ia,{}),d.trigger(ca,{items:c.data}))},fetch:function(b){var c=this;return a.Deferred(function(a){var d=function(d){c.unbind(fa,e),a.resolve(),b&&b.call(c,d)},e=function(b){a.reject(b)};c.one(ca,d),c.one(fa,e),c._query()}).promise()},_query:function(a){var b,c=this;try{b=c.pageSize()}catch(d){b=null}c.query(L({},{page:c.page(),pageSize:b,sort:c.sort(),filter:c.filter(),group:c.group(),aggregate:c.aggregate()},a))},next:function(a){var b=this,c=b.page(),d=b.total();return a=a||{},!c||d&&c+1>b.totalPages()?void 0:(b._skip=c*b.take(),c+=1,a.page=c,b._query(a),c)},prev:function(a){var b=this,c=b.page();return a=a||{},c&&1!==c?(b._skip=b._skip-b.take(),c-=1,a.page=c,b._query(a),c):void 0},page:function(a){var c,d=this;return a!==b?(a=na.max(na.min(na.max(a,1),d.totalPages()),1),void d._query({page:a})):(c=d.skip(),c!==b?na.round((c||0)/(d.take()||1))+1:b)},pageSize:function(a){var c=this;return a!==b?void c._query({pageSize:a,page:1}):c.take()},sort:function(a){var c=this;return a!==b?void c._query({sort:a}):c._sort},filter:function(a){var c=this;return a===b?c._filter:void c._query({filter:a,page:1})},group:function(a){var c=this;return a!==b?void c._query({group:a}):c._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(a){var c=this;return a!==b?void c._query({aggregate:a}):c._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var a=this,b=a.pageSize()||a.total();return na.ceil((a.total()||0)/b)},inRange:function(a,b){var c=this,d=na.min(a+b,c.total());return!c.options.serverPaging&&c.data.length>0?!0:c._findRange(a,d).length>0},lastRange:function(){var a=this._ranges;return a[a.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var a=this._ranges;return a.length&&a[0].data.length&&a[0].data[0].uid},range:function(a,c){a=na.min(a||0,this.total());var d,e=this,f=na.max(na.floor(a/c),0)*c,g=na.min(f+c,e.total());if(d=e._findRange(a,na.min(a+c,e.total())),d.length){e._skip=a>e.skip()?na.min(g,(e.totalPages()-1)*e.take()):f,e._take=c;var h=e.options.serverPaging,i=e.options.serverSorting,j=e.options.serverFiltering;try{e.options.serverPaging=!0,e._isServerGrouped()||e.group()&&e.group().length||(e.options.serverSorting=!0),e.options.serverFiltering=!0,h&&(e._data=d=e._observe(d)),e._process(d)}finally{e.options.serverPaging=h,e.options.serverSorting=i,e.options.serverFiltering=j}}else c!==b&&(e._rangeExists(f,g)?a>f&&e.prefetch(g,c,function(){e.range(a,c)}):e.prefetch(f,c,function(){a>f&&g<e.total()&&!e._rangeExists(g,na.min(g+c,e.total()))?e.prefetch(g,c,function(){e.range(a,c)}):e.range(a,c)}))},_findRange:function(a,c){var d,e,h,i,j,l,m,n,o,p,q,r=this,s=r._ranges,t=[],u=r.options,v=u.serverSorting||u.serverPaging||u.serverFiltering||u.serverGrouping||u.serverAggregates;for(e=0,q=s.length;q>e;e++)if(d=s[e],a>=d.start&&a<=d.end){for(p=0,h=e;q>h;h++)if(d=s[h],o=r._flatData(d.data),o.length&&a+p>=d.start){if(l=d.data,m=d.end,!v){var w=k(r.group()||[]).concat(g(r.sort()||[]));n=f.process(d.data,{sort:w,filter:r.filter()}),o=l=n.data,n.total!==b&&(m=n.total)}if(i=0,a+p>d.start&&(i=a+p-d.start),j=o.length,m>c&&(j-=m-c),p+=j-i,t=r._mergeGroups(t,l,i,j),c<=d.end&&p==c-a)return t}break}return[]},_mergeGroups:function(a,b,c,d){if(this._isServerGrouped()){var e,f=b.toJSON();return a.length&&(e=a[a.length-1]),u(e,f,c,d),a.concat(f)}return a.concat(b.slice(c,d))},skip:function(){var a=this;return a._skip===b?a._page!==b?(a._page-1)*(a.take()||1):b:a._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(a,b,c){var d=this;return function(e){var f,g,h,i=!1,j={start:a,end:b,data:[]};if(d._dequeueRequest(),d.trigger(ia,{response:e,type:"read"}),e=d.reader.parse(e),h=d._readData(e),h.length){for(f=0,g=d._ranges.length;g>f;f++)if(d._ranges[f].start===a){i=!0,j=d._ranges[f];break}i||d._ranges.push(j)}j.data=d._observe(h),j.end=j.start+d._flatData(j.data).length,d._ranges.sort(function(a,b){return a.start-b.start}),d._total=d.reader.total(e),c&&h.length?c():d.trigger(ca,{})}},prefetch:function(a,b,c){var d=this,e=na.min(a+b,d.total()),f={take:b,skip:a,page:a/b+1,pageSize:b,sort:d._sort,filter:d._filter,group:d._group,aggregate:d._aggregate};d._rangeExists(a,e)?c&&c():(clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._queueRequest(f,function(){d.trigger(ga,{type:"read"})?d._dequeueRequest():d.transport.read({data:d._params(f),success:d._prefetchSuccessHandler(a,e,c)})})},100))},_rangeExists:function(a,b){var c,d,e=this,f=e._ranges;for(c=0,d=f.length;d>c;c++)if(f[c].start<=a&&f[c].end>=b)return!0;return!1},_removeModelFromRanges:function(a){for(var b,c,d,e=0,f=this._ranges.length;f>e&&(d=this._ranges[e],this._eachItem(d.data,function(d){b=y(d,a),b&&(c=!0)}),!c);e++);},_updateRangesLength:function(){for(var a,b,c=0,d=0,e=this._ranges.length;e>d;d++)a=this._ranges[d],a.start=a.start-c,b=this._flatData(a.data).length,c=a.end-b,a.end=a.start+b}}),Pa={};Pa.create=function(a,b){var c,d=a.transport;return d?(d.read=typeof d.read===Y?{url:d.read}:d.read,a.type&&(U.data.transports[a.type]&&!N(U.data.transports[a.type])?c=new U.data.transports[a.type](L(d,{data:b})):d=L(!0,{},U.data.transports[a.type],d),a.schema=L(!0,{},U.data.schemas[a.type],a.schema)),c||(c=V(d.read)?d:new La(d))):c=new Ka({data:a.data}),c},Oa.create=function(a){(P(a)||a instanceof Aa)&&(a={data:a});var b,c,d,e=a||{},f=e.data,g=e.fields,h=e.table,i=e.select,j={};if(f||!g||e.transport||(h?f=H(h,g):i&&(f=G(i,g))),U.data.Model&&g&&(!e.schema||!e.schema.model)){for(b=0,c=g.length;c>b;b++)d=g[b],d.type&&(j[d.field]=d);O(j)||(e.schema=L(!0,e.schema,{model:{fields:j}}))}return e.data=f,h=null,e.table=null,e instanceof Oa?e:new Oa(e)};var Qa=Ea.define({init:function(a){var b=this,c=b.hasChildren||a&&a.hasChildren,d="items",e={};U.data.Model.fn.init.call(b,a),typeof b.children===Y&&(d=b.children),e={schema:{data:d,model:{hasChildren:c,id:b.idField}}},typeof b.children!==Y&&L(e,b.children),e.data=a,c||(c=e.schema.data),typeof c===Y&&(c=U.getter(c)),V(c)&&(b.hasChildren=!!c.call(b,b)),b._childrenOptions=e,b.hasChildren&&b._initChildren(),b._loaded=!(!a||!a[d]&&!a._loaded)},_initChildren:function(){var a,b,c,d=this;d.children instanceof Ra||(a=d.children=new Ra(d._childrenOptions),b=a.transport,c=b.parameterMap,b.parameterMap=function(a){return a[d.idField||"id"]=d.id,c&&(a=c(a)),a},a.parent=function(){return d},a.bind(ca,function(a){a.node=a.node||d,d.trigger(ca,a)}),a.bind(fa,function(a){var b=d.parent();b&&(a.node=a.node||d,b.trigger(fa,a))}),d._updateChildrenField())},append:function(a){this._initChildren(),this.loaded(!0),this.children.add(a)},hasChildren:!1,level:function(){for(var a=this.parentNode(),b=0;a&&a.parentNode;)b++,a=a.parentNode?a.parentNode():null;return b},_updateChildrenField:function(){var a=this._childrenOptions.schema.data;this[a||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var a,c={},d="_query";this.hasChildren?(this._initChildren(),a=this.children,c[this.idField||"id"]=this.id,this._loaded||(a._data=b,d="read"),a.one(ca,M(this._childrenLoaded,this)),a[d](c)):this.loaded(!0)},parentNode:function(){var a=this.parent();return a.parent()},loaded:function(a){return a===b?this._loaded:void(this._loaded=a)},shouldSerialize:function(a){return Ea.fn.shouldSerialize.call(this,a)&&"children"!==a&&"_loaded"!==a&&"hasChildren"!==a&&"_childrenOptions"!==a}}),Ra=Oa.extend({init:function(a){var b=Qa.define({children:a});Oa.fn.init.call(this,L(!0,{},{schema:{modelBase:b,model:b}},a)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var a=this;a._data.bind(fa,function(b){a.trigger(fa,b)})},remove:function(a){var b,c=a.parentNode(),d=this;return c&&c._initChildren&&(d=c.children),b=Oa.fn.remove.call(d,a),c&&!d.data().length&&(c.hasChildren=!1),b},success:I("success"),data:I("data"),insert:function(a,b){var c=this.parent();return c&&c._initChildren&&(c.hasChildren=!0,c._initChildren()),Oa.fn.insert.call(this,a,b)},_find:function(a,b){var c,d,e,f,g;if(e=Oa.fn[a].call(this,b))return e;if(f=this._flatData(this.data()))for(c=0,d=f.length;d>c;c++)if(g=f[c].children,g instanceof Ra&&(e=g[a](b)))return e},get:function(a){return this._find("get",a)},getByUid:function(a){return this._find("getByUid",a)}});Ra.create=function(a){a=a&&a.push?{data:a}:a;var b=a||{},c=b.data,d=b.fields,e=b.list;return c&&c._dataSource?c._dataSource:(c||!d||b.transport||e&&(c=J(e,d)),b.data=c,b instanceof Ra?b:new Ra(b))};var Sa=U.Observable.extend({init:function(a,b,c){U.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=a,this.prefetch=!c;var d=this;a.bind("change",function(){d._change()}),this._syncWithDataSource(),this.setViewSize(b)},setViewSize:function(a){this.viewSize=a,this._recalculate()},at:function(a){var c,d=this.pageSize;if(a>=this.total())return void this.trigger("endreached",{index:a});if(!this.useRanges)return this.dataSource.view()[a];if(this.useRanges){if(a<this.dataOffset||a>this.skip+d){var e=Math.floor(a/d)*d;this.range(e)}a===this.prefetchThreshold&&this._prefetch(),a===this.midPageThreshold?this.range(this.nextMidRange):a===this.nextPageThreshold?this.range(this.nextFullRange):a===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),c=this.dataSource.at(a-this.dataOffset)}return c===b&&this.trigger("endreached",{index:a}),c},indexOf:function(a){return this.dataSource.data().indexOf(a)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var a=this,b=a.pageSize,c=a.skip-a.viewSize,d=na.max(na.floor(c/b),0)*b+b;this.offset=c,this.dataSource.prefetch(d,b,function(){a._goToRange(c,!0)})},range:function(a){if(this.offset!==a){var b=this,c=this.pageSize,d=na.max(na.floor(a/c),0)*c+c,e=this.dataSource;this.offset=a,this._recalculate(),e.inRange(a,c)?this._goToRange(a):this.prefetch&&e.prefetch(d,c,function(){b._goToRange(a,!0)})}},syncDataSource:function(){var a=this.offset;this.offset=null,this.range(a)},destroy:function(){this.unbind()},_prefetch:function(){var a=this,b=this.pageSize,c=this.skip+b,d=this.dataSource;d.inRange(c,b)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:c,take:b}),d.prefetch(c,b,function(){a._prefetching=!1,a.trigger("prefetched",{skip:c,take:b})}))},_goToRange:function(a,b){this.offset===a&&(this.dataOffset=a,this._expanding=b,this.dataSource.range(a,this.pageSize))},_change:function(){var a=this.dataSource,b=a.firstItemUid();this.length=this.useRanges?a.lastRange().end:a.view().length,this._firstItemUid===b&&this.useRanges||(this._syncWithDataSource(),this._recalculate(),this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var a=this.dataSource;this._firstItemUid=a.firstItemUid(),this.dataOffset=this.offset=a.skip()||0,this.pageSize=a.pageSize(),this.useRanges=a.options.serverPaging},_recalculate:function(){var a=this.pageSize,b=this.offset,c=this.viewSize,d=Math.ceil(b/a)*a;this.skip=d,this.midPageThreshold=d+a-1,this.nextPageThreshold=d+c-1,this.prefetchThreshold=d+Math.floor(a/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=d+a-c,this.nextFullRange=d,this.previousMidRange=b-c,this.previousFullRange=d-a}}),Ta=U.Observable.extend({init:function(a,b){var c=this;U.Observable.fn.init.call(c),this.dataSource=a,this.batchSize=b,this._total=0,this.buffer=new Sa(a,3*b),this.buffer.bind({endreached:function(a){c.trigger("endreached",{index:a.index})},prefetching:function(a){c.trigger("prefetching",{skip:a.skip,take:a.take})},prefetched:function(a){c.trigger("prefetched",{skip:a.skip,take:a.take})},reset:function(){c._total=0,c.trigger("reset")},resize:function(){c._total=Math.ceil(this.length/c.batchSize),c.trigger("resize",{total:c.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(a){var c,d=this.buffer,e=a*this.batchSize,f=this.batchSize,g=[];d.offset>e&&d.at(d.offset-1);for(var h=0;f>h&&(c=d.at(e+h),c!==b);h++)g.push(c);return g},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});L(!0,U.data,{readers:{json:Na},Query:f,DataSource:Oa,HierarchicalDataSource:Ra,Node:Qa,ObservableObject:Ba,ObservableArray:Aa,LocalTransport:Ka,RemoteTransport:La,Cache:Ma,DataReader:Na,Model:Ea,Buffer:Sa,BatchBuffer:Ta})}(window.joy.jQuery),window.joy},"function"==typeof define&&define.amd?define:function(a,b){b()}),function(a,b){var c=window.joy,d=a.isArray,e=a.isPlainObject,f=a.map,g=a.each,h=a.extend,i=c.getter,j=c.Class,k=j.extend({init:function(a){var b=this,i=a.total,j=a.model,k=a.parse,l=a.errors,m=a.serialize,n=a.data;if(j){if(e(j)){var o=a.modelBase||c.data.Model;j.fields&&g(j.fields,function(a,c){c=e(c)&&c.field?h(c,{field:b.getter(c.field)}):{field:b.getter(c)},j.fields[a]=c});var p=j.id;if(p){var q={};q[b.xpathToMember(p,!0)]={field:b.getter(p)},j.fields=h(q,j.fields),j.id=b.xpathToMember(p)}j=o.define(j)}b.model=j}if(i&&("string"==typeof i?(i=b.getter(i),b.total=function(a){return parseInt(i(a),10)}):"function"==typeof i&&(b.total=i)),l&&("string"==typeof l?(l=b.getter(l),b.errors=function(a){return l(a)||null}):"function"==typeof l&&(b.errors=l)),n&&("string"==typeof n?(n=b.xpathToMember(n),b.data=function(a){var c,e=b.evaluate(a,n);return e=d(e)?e:[e],b.model&&j.fields?(c=new b.model,f(e,function(a){if(a){var b,d={};for(b in j.fields)d[b]=c._parse(b,j.fields[b].field(a));return d}})):e}):"function"==typeof n&&(b.data=n)),"function"==typeof k){var r=b.parse;b.parse=function(a){var c=k.call(b,a);return r.call(b,c)}}"function"==typeof m&&(b.serialize=m)},total:function(a){return this.data(a).length},errors:function(a){return a?a.errors:null},serialize:function(a){return a},parseDOM:function(a){var c,e,f,g,h,i,j,k={},l=a.attributes,m=l.length;for(j=0;m>j;j++)i=l[j],k["@"+i.nodeName]=i.nodeValue;for(e=a.firstChild;e;e=e.nextSibling)f=e.nodeType,3===f||4===f?k["#text"]=e.nodeValue:1===f&&(c=this.parseDOM(e),g=e.nodeName,h=k[g],d(h)?h.push(c):h=h!==b?[h,c]:c,k[g]=h);return k},evaluate:function(a,b){for(var c,e,f,g,h,i=b.split(".");c=i.shift();)if(a=a[c],d(a)){for(e=[],b=i.join("."),h=0,f=a.length;f>h;h++)g=this.evaluate(a[h],b),g=d(g)?g:[g],e.push.apply(e,g);return e}return a},parse:function(b){var c,d,e={};return c=b.documentElement||a.parseXML(b).documentElement,d=this.parseDOM(c),e[c.nodeName]=d,e},xpathToMember:function(a,b){return a?(a=a.replace(/^\//,"").replace(/\//g,"."),a.indexOf("@")>=0?a.replace(/\.?(@.*)/,b?"$1":'["$1"]'):a.indexOf("text()")>=0?a.replace(/(\.?text\(\))/,b?"#text":'["#text"]'):a):""},getter:function(a){return i(this.xpathToMember(a),!0)}});a.extend(!0,c.data,{XmlDataReader:k,readers:{xml:k}})}(jQuery),function(a,b){function c(e){var g,h,i,j,k,l,m,n,o=[],p=e.logic||"and",q=e.filters;for(g=0,h=q.length;h>g;g++)e=q[g],i=e.field,m=e.value,l=e.operator,e.filters?e=c(e):(n=e.ignoreCase,i=i.replace(/\./g,"/"),e=f[l],e&&m!==b&&(j=a.type(m),"string"===j?(k="'{1}'",m=m.replace(/'/g,"''"),n===!0&&(i="tolower("+i+")")):k="date"===j?"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",e.length>3?"substringof"!==e?k="{0}({2},"+k+")":(k="{0}("+k+",{2})","doesnotcontain"===l&&(k+=" eq false")):k="{2} {0} "+k,e=d.format(k,e,m,i))),o.push(e);return e=o.join(" "+p+" "),o.length>1&&(e="("+e+")"),e}var d=window.joy,e=a.extend,f={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},g={pageSize:a.noop,page:a.noop,filter:function(a,b){b&&(a.$filter=c(b))},sort:function(b,c){var d=a.map(c,function(a){var b=a.field.replace(/\./g,"/");return"desc"===a.dir&&(b+=" desc"),b}).join(",");d&&(b.$orderby=d)},skip:function(a,b){a.currPage=b?b/a.pageSize+1:1},take:function(a,b){b&&(a.pageSize=b)}},h={read:{dataType:"jsonp"}};e(!0,d.data,{schemas:{odata:{type:"json",data:function(a){return a.items||[a]},total:"totalCount"}},transports:{odata:{read:{cache:!0,dataType:"json",jsonp:"$callback",type:"POST"},update:{cache:!0,dataType:"json",type:"POST"},create:{cache:!0,dataType:"json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(a,b){var c,d,e,f;if(a=a||{},b=b||"read",f=(this.options||h)[b],f=f?f.dataType:"json","read"===b){c={$inlinecount:"allpages"},"json"!=f&&(c.$format="json");for(e in a)g[e]?g[e](c,a[e]):c[e]=a[e]}else{if("json"!==f)throw new Error("Only json dataType can be used for "+b+" operation.");if("destroy"!==b){for(e in a)d=a[e],"number"==typeof d&&(a[e]=d+"");c=a}}return c}}}})}(jQuery),function(a,b){function c(b,c){return b===c||a.contains(b,c)}var d=window.joy,e=d.ui,f=e.Widget,g=d.support,h=d.getOffset,i=d._activeElement,j="open",k="close",l="deactivate",m="activate",n="center",o="left",p="right",q="top",r="bottom",s="absolute",t="hidden",u="body",v="location",w="position",x="visible",y="effects",z="k-state-active",A="k-state-border",B=/k-state-border-(\w+)/,C=".k-picker-wrap, .k-dropdown-wrap, .k-link",D="down",E=a(window),F=a(document.documentElement),G="resize mousewheel",H=g.transitions.css,I=H+"transform",J=a.extend,K=".joyPopup",L=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],M=f.extend({init:function(b,c){var e,g=this;c=c||{},c.isRtl&&(c.origin=c.origin||r+" "+p,c.position=c.position||q+" "+p),f.fn.init.call(g,b,c),b=g.element,c=g.options,g.collisions=c.collision?c.collision.split(" "):[],1===g.collisions.length&&g.collisions.push(g.collisions[0]),e=a(g.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),c.appendTo=a(a(c.appendTo)[0]||e[0]||u),g.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!c.isRtl).css({position:s}).appendTo(c.appendTo).on("mouseenter"+K,function(){g._hovered=!0}).on("mouseleave"+K,function(){g._hovered=!1}),g.wrapper=a(),c.animation===!1&&(c.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),J(c.animation.open,{complete:function(){g.wrapper.css({overflow:x}),g.trigger(m)}}),J(c.animation.close,{complete:function(){g.wrapper.hide();var e,f,h=g.wrapper.data(v),i=a(c.anchor);h&&g.wrapper.css(h),c.anchor!=u&&(e=(i[0].className.match(B)||["","down"])[1],f=A+"-"+e,i.removeClass(f).children(C).removeClass(z).removeClass(f),b.removeClass(A+"-"+d.directions[e].reverse)),g._closing=!1,g.trigger(l)}}),g._mousedownProxy=function(a){g._mousedown(a)},g._resizeProxy=function(a){g._resize(a)},c.toggleTarget&&a(c.toggleTarget).on(c.toggleEvent+K,a.proxy(g.toggle,g))},events:[j,m,k,l],options:{name:"Popup",toggleEvent:"click",origin:r+" "+o,position:q+" "+o,anchor:u,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var b,c=this,e=c.options,g=c.element.off(K);f.fn.destroy.call(c),e.toggleTarget&&a(e.toggleTarget).off(K),e.modal||(F.unbind(D,c._mousedownProxy),E.unbind(G,c._resizeProxy)),d.destroy(c.element.children()),g.removeData(),e.appendTo[0]===document.body&&(b=g.parent(".k-animation-container"),b[0]?b.remove():g.remove())},open:function(b,c){var e,f,h=this,i={isFixed:!isNaN(parseInt(c,10)),x:b,y:c},k=h.element,l=h.options,m="down",n=a(l.anchor),o=k[0]&&k.hasClass("km-widget");if(!h.visible()){if(l.copyAnchorStyles&&(o&&"font-size"==L[0]&&L.shift(),k.css(d.getComputedStyles(n[0],L))),k.data("animating")||h.trigger(j))return;if(l.modal||(F.unbind(D,h._mousedownProxy).bind(D,h._mousedownProxy),g.mobileOS.ios||g.mobileOS.android||E.unbind(G,h._resizeProxy).bind(G,h._resizeProxy)),h.wrapper=f=d.wrap(k,l.autosize).css({overflow:t,display:"block",position:s}),g.mobileOS.android&&f.add(n).css(I,"translatez(0)"),f.css(w),a(l.appendTo)[0]==document.body&&f.css(q,"-10000px"),e=J(!0,{},l.animation.open),h.flipped=h._position(i),e.effects=d.parseEffects(e.effects,h.flipped),m=e.effects.slideIn?e.effects.slideIn.direction:m,l.anchor!=u){var p=A+"-"+m;k.addClass(A+"-"+d.directions[m].reverse),n.addClass(p).children(C).addClass(z).addClass(p)}k.data(y,e.effects).joyStop(!0).joyAnimate(e)}},toggle:function(){var a=this;a[a.visible()?k:j]()},visible:function(){return this.element.is(":"+x)},close:function(){var b,c,e,f,g=this,h=g.options;if(g.visible()){if(b=g.wrapper[0]?g.wrapper:d.wrap(g.element).hide(),g._closing||g.trigger(k))return;g.element.find(".k-popup").each(function(){var b=a(this),c=b.data("joyPopup");c&&c.close()}),F.unbind(D,g._mousedownProxy),E.unbind(G,g._resizeProxy),c=J(!0,{},h.animation.close),e=g.element.data(y),f=c.effects,!f&&!d.size(f)&&e&&d.size(e)&&(c.effects=e,c.reverse=!0),g._closing=!0,g.element.joyStop(!0),b.css({overflow:t}),g.element.joyAnimate(c)}},_resize:function(a){var b=this;"resize"===a.type?(clearTimeout(b._resizeTimeout),b._resizeTimeout=setTimeout(function(){b._position(),b._resizeTimeout=null},50)):b._hovered||c(b.element[0],i())||b.close()},_mousedown:function(b){var e=this,f=e.element[0],g=e.options,h=a(g.anchor)[0],i=g.toggleTarget,j=d.eventTarget(b),k=a(j).closest(".k-popup"),l=k.parent().parent(".km-shim").length;k=k[0],(l||!k||k===e.element[0])&&"popover"!==a(b.target).closest("a").data("rel")&&(c(f,j)||c(h,j)||i&&c(a(i)[0],j)||e.close())},_fit:function(a,b,c){var d=0;return a+b>c&&(d=c-(a+b)),0>a&&(d=-a),d},_flip:function(a,b,c,d,e,f,g){var h=0;return g=g||b,f!==e&&f!==n&&e!==n&&(a+g>d&&(h+=-(c+b)),0>a+h&&(h+=c+b)),h},_position:function(b){var c,d,e,f,i,j,k=this,l=a(document.documentElement),m=k.element.css(w,""),n=k.wrapper,o=k.options,p=a(o.viewport),q=p.offset(),r=a(o.anchor),t=o.origin.toLowerCase().split(" "),u=o.position.toLowerCase().split(" "),x=k.collisions,y=g.zoomLevel(),z=10002,A=0;if(l.css({overflowX:"hidden",overflowY:"hidden"}),i=p.width(),j=p.height(),l.css({overflowX:"",overflowY:""}),c=r.parents().filter(n.siblings()),c[0])if(e=Number(a(c).css("zIndex")))z=e+1;else for(d=r.parentsUntil(c),f=d.length;f>A;A++)e=Number(a(d[A]).css("zIndex")),e&&e>z&&(z=e+1);n.css("zIndex",z),n.css(b&&b.isFixed?{left:b.x,top:b.y}:k._align(t,u));var B=h(n,w,r[0]===n.offsetParent()[0]),C=h(n),D=r.offsetParent().parent(".k-animation-container,.k-popup,.k-group");D.length&&(B=h(n,w,!0),C=h(n)),p[0]===window?(C.top-=window.pageYOffset||document.documentElement.scrollTop||0,C.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(C.top-=q.top,C.left-=q.left),k.wrapper.data(v)||n.data(v,J({},B));var E=J({},C),F=J({},B);"fit"===x[0]&&(F.top+=k._fit(E.top,n.outerHeight(),j/y)),"fit"===x[1]&&(F.left+=k._fit(E.left,n.outerWidth(),i/y));var G=J({},F);return"flip"===x[0]&&(F.top+=k._flip(E.top,m.outerHeight(),r.outerHeight(),j/y,t[0],u[0],n.outerHeight())),"flip"===x[1]&&(F.left+=k._flip(E.left,m.outerWidth(),r.outerWidth(),i/y,t[1],u[1],n.outerWidth())),m.css(w,s),n.css(F),F.left!=G.left||F.top!=G.top},_align:function(b,c){var d,e=this,f=e.wrapper,g=a(e.options.anchor),i=b[0],j=b[1],k=c[0],l=c[1],m=h(g),o=a(e.options.appendTo),q=f.outerWidth(),s=f.outerHeight(),t=g.outerWidth(),u=g.outerHeight(),v=m.top,w=m.left,x=Math.round;return o[0]!=document.body&&(d=h(o),v-=d.top,w-=d.left),i===r&&(v+=u),i===n&&(v+=x(u/2)),k===r&&(v-=s),k===n&&(v-=x(s/2)),j===p&&(w+=t),j===n&&(w+=x(t/2)),l===p&&(w-=q),l===n&&(w-=x(q/2)),{top:v,left:w}}});e.plugin(M)}(window.joy.jQuery),function(a,b){var c=window.joy,d=c.ui.Widget,e=".joyLabel",f=a.proxy,g=d.extend({init:function(b,f){var g=this;g.ns=e,f=a.isArray(f)?{dataSource:f}:f,d.fn.init.call(g,b,f),f=g.options,g._dataSource(),g.value(f.value),c.notify(g)},options:{name:"Label",value:null,autoBind:!0,dataTextField:"text",dataValueField:"value",dataFormat:null,dataType:""},events:[],_dataSource:function(){var a=this,b=a.options,d=b.dataSource||{};a.dataSource=new c.data.DataSource(d),a.dataSource.read(),a.dataSource.bind("change",f(a._dataSourceChange,a))},_dataSourceChange:function(){var a=this;options=a.options,a.value(options.value)},value:function(a){var d=this,e=d.options,f=e.dataFormat;if(a!==b&&null!=a){var g=d.dataSource,h=g.total();if(h>0){a=a.toString();var j=a.split(","),k=new Array;for(i=0;i<j.length;i++)for(idx=0;idx<h;idx++)g.at(idx)[e.dataValueField]==j[i]&&k.push(g.at(idx)[e.dataTextField]);if(k.length)return void d.element.html(k.join())}null!=f&&("date"==e.dataType&&(a=c.parseDate(a)),a=c.toString(a,f)),d.element.html(a)}}});c.ui.plugin(g)}(window.joy.jQuery),function(a,b){function c(b){switch(a.trim(b.toLowerCase())){case"normal":return"";case"importantbtn":return"k-importantBtn";case"gridbtn":return"k-gridBtn";case"userbtn":return"k-userBtn";default:return""}}var d=window.joy,e=d.ui.Widget,f=a.proxy,g=d.keys,h="click",i="k-button",j="k-button-icon",k="k-button-icontext",l=".joyButton",m="disabled",n="k-state-disabled",o="k-state-focused",p="k-state-selected",q=e.extend({init:function(a,b){var g=this;e.fn.init.call(g,a,b),a=g.wrapper=g.element,b=g.options,a.addClass(i).attr("role","button"),a.minHeight=24,a.minWidth=68,(""!=b.btnType||"normal"!=b.btnType)&&a.addClass(c(b.btnType)),""!=b.label&&a.html(b.label),b.enable=b.enable&&!a.attr(m),g.enable(b.enable),g._tabindex(),g._graphics(),a.attr("type","button"),a.on(h+l,f(g._click,g)).on("focus"+l,f(g._focus,g)).on("blur"+l,f(g._blur,g)).on("keydown"+l,f(g._keydown,g)).on("keyup"+l,f(g._keyup,g)),d.notify(g)},events:["onClick"],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0,label:"",btnType:"normal"},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(a){this.options.enable&&this.trigger("onClick",[this])},_focus:function(){this.options.enable&&this.element.addClass(o)},_blur:function(){this.element.removeClass(o)},_keydown:function(a){var b=this;b._isNativeButton()||(a.keyCode==g.ENTER||a.keyCode==g.SPACEBAR)&&(a.keyCode==g.SPACEBAR&&(a.preventDefault(),b.options.enable&&b.element.addClass(p)),b._click(a))},_keyup:function(){this.element.removeClass(p)},_graphics:function(){var b,c,d,e=this,f=e.element,g=e.options,h=g.icon,i=g.spriteCssClass,l=g.imageUrl;(i||l||h)&&(d=!0,f.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(b,c){(1==c.nodeType||3==c.nodeType&&a.trim(c.nodeValue).length>0)&&(d=!1)}),f.addClass(d?j:k)),h?(b=f.children("span.k-icon").first(),b[0]||(b=a('<span class="k-icon"></span>').prependTo(f)),b.addClass("k-i-"+h)):i?(b=f.children("span.k-sprite").first(),b[0]||(b=a('<span class="k-sprite"></span>').prependTo(f)),b.addClass(i)):l&&(c=f.children("img.k-image").first(),c[0]||(c=a('<img alt="icon" class="k-image" />').prependTo(f)),c.attr("src",l))},enable:function(a){var c=this,d=c.element;a===b&&(a=!0),a=!!a,c.options.enable=a,d.toggleClass(n,!a).attr("aria-disabled",!a).attr(m,!a)}});d.ui.plugin(q)}(jQuery),function(a,b){function c(a,b,c,d){var e,f=a.getFullYear(),g=b.getFullYear(),h=c.getFullYear();return f-=f%d,e=f+(d-1),g>f&&(f=g),e>h&&(e=h),f+"-"+e}function d(a){for(var b,c=0,d=a.min,e=a.max,f=a.start,g=a.setter,i=a.build,j=a.cells||12,k=a.perRow||4,l=a.content||E,m=a.empty||F,n=a.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';j>c;c++)c>0&&c%k===0&&(n+='</tr><tr role="row">'),b=i(f,c),n+=h(f,d,e)?l(b):m(b),g(f,1);return n+"</tr></tbody></table>"}function e(a,b,c){var d=a.getFullYear(),e=b.getFullYear(),f=e,g=0;return c&&(e-=e%c,f=e-e%c+c-1),d>f?g=1:e>d&&(g=-1),g}function f(){var a=new pa;return new pa(a.getFullYear(),a.getMonth(),a.getDate())}function g(a,b,c){var d=f();return a&&(d=new pa(+a)),b>d?d=new pa(+b):d>c&&(d=new pa(+c)),d}function h(a,b,c){return+a>=+b&&+c>=+a}function i(a,b){return a.slice(b).concat(a.slice(0,b))}function j(a,b,c){b=b instanceof pa?b.getFullYear():a.getFullYear()+c*b,a.setFullYear(b)}function k(b){a(this).toggleClass(W,ea.indexOf(b.type)>-1||b.type==ca)}function l(a){a.preventDefault()}function m(a){return B(a).calendars.standard}function n(a){var c=qa[a.start],d=qa[a.depth],e=B(a.culture);

a.dataFormat=z(a.dataFormat||e.calendars.standard.patterns.d),isNaN(c)&&(c=0,a.start=P),(d===b||d>c)&&(a.depth=P),a.dates||(a.dates=[])}function o(a){H&&a.find("*").attr("unselectable","on")}function p(a,b){for(var c=0,d=b.length;d>c;c++)if(a===+b[c])return!0;return!1}function q(a,b){try{return a?a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate():!1}catch(c){return!1}}function r(a,b){return a?a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth():!1}var s=window.joy,t=s.support,u=s.ui,v=u.Widget,w=s.keys,x=s.parseDate,y=s.date.adjustDST,z=s._extractFormat,A=s.template,B=s.getPluginLang,C=s.support.transitions,D=C?C.css+"transform-origin":"",E=A('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),F=A('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),G=s.support.browser,H=G.msie&&G.version<9,I=".joyCalendar",J="click"+I,K="keydown"+I,L="id",M="min",N="left",O="slideIn",P="day",Q="month",R="year",S="century",T="change",U="navigate",V="value",W="k-state-hover",X="k-state-disabled",Y="k-state-focused",Z="k-other-month",$=' class="'+Z+'"',_="k-nav-today",aa="td:has(.k-link)",ba="blur"+I,ca="focus",da=ca+I,ea=t.touch?"touchstart":"mouseenter",fa=t.touch?"touchstart"+I:"mouseenter"+I,ga=t.touch?"touchend"+I+" touchmove"+I:"mouseleave"+I,ha=6e4,ia=864e5,ja="_prevArrow",ka="_nextArrow",la="aria-disabled",ma="aria-selected",na=a.proxy,oa=a.extend,pa=Date,qa={day:0,month:1,year:2,century:3},ra=v.extend({init:function(b,c){var d,e,f=this;v.fn.init.call(f,b,c),b=f.wrapper=f.element,c=f.options,c.url=window.unescape(c.url),f._templates(),f._header(),f._footer(f.footer),e=b.addClass("k-widget k-calendar").on(fa+" "+ga,aa,k).on(K,"table.k-content",na(f._move,f)).on(J,aa,function(b){var c=b.currentTarget.firstChild;-1!=c.href.indexOf("#")&&b.preventDefault(),f._click(a(c))}).on("mouseup"+I,function(){f._focusView(f.options.focusOnNav!==!1)}).attr(L),e&&(f._cellID=e+"_cell_selected"),n(c),d=x(c.value,c.dataFormat,c.culture),f._index=qa[c.start],f._current=new pa(+g(d,c.min,c.max)),f._addClassProxy=function(){f._active=!0,f._cell.addClass(Y)},f._removeClassProxy=function(){f._active=!1,f._cell.removeClass(Y)},f.value(d),s.notify(f)},options:{name:"Calendar",value:null,min:new pa(1900,0,1),max:new pa(2099,11,31),dates:[],url:"",culture:"",footer:"",dataFormat:"",month:{},start:P,depth:P,animation:{horizontal:{effects:O,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[T,U],setOptions:function(a){var b=this;n(a),v.fn.setOptions.call(b,a),b._templates(),b._footer(b.footer),b._index=qa[b.options.start],b.navigate()},destroy:function(){var a=this,b=a._today;a.element.off(I),a._title.off(I),a[ja].off(I),a[ka].off(I),s.destroy(a._table),b&&s.destroy(b.off(I)),v.fn.destroy.call(a)},current:function(){return this._current},view:function(){return this._view},focus:function(a){a=a||this._table,this._bindTable(a),a.focus()},min:function(a){return this._option(M,a)},max:function(a){return this._option("max",a)},navigateToPast:function(){this._navigate(ja,-1)},navigateToFuture:function(){this._navigate(ka,1)},navigateUp:function(){var a=this,b=a._index;a._title.hasClass(X)||a.navigate(a._current,++b)},navigateDown:function(a){var b=this,c=b._index,d=b.options.depth;if(a)return c===qa[d]?void(+b._value!=+a&&(b.value(a),b.trigger(T))):void b.navigate(a,--c)},navigate:function(c,d){d=isNaN(d)?qa[d]:d;var e,f,h,i,j=this,k=j.options,l=k.culture,m=k.min,n=k.max,p=j._title,q=j._table,r=j._oldTable,s=j._value,t=j._current,u=c&&+c>+t,v=d!==b&&d!==j._index;c||(c=t),j._current=c=new pa(+g(c,m,n)),d===b?d=j._index:j._index=d,j._view=f=sa.views[d],h=f.compare,i=d===qa[S],p.toggleClass(X,i).attr(la,i),i=h(c,m)<1,j[ja].toggleClass(X,i).attr(la,i),i=h(c,n)>-1,j[ka].toggleClass(X,i).attr(la,i),q&&r&&r.data("animating")&&(r.joyStop(!0,!0),q.joyStop(!0,!0)),j._oldTable=q,(!q||j._changeView)&&(p.html(f.title(c,m,n,l)),j._table=e=a(f.content(oa({min:m,max:n,date:c,url:k.url,dates:k.dates,dataFormat:k.dataFormat,culture:l},j[f.name]))),o(e),j._animate({from:q,to:e,vertical:v,future:u}),j._focus(c),j.trigger(U)),d===qa[k.depth]&&s&&j._class("k-state-selected",f.toDateString(s)),j._class(Y,f.toDateString(c)),!q&&j._cell&&j._cell.removeClass(Y),j._changeView=!0},value:function(a){var c=this,d=c._view,e=c.options,f=c._view,g=e.min,i=e.max;return a===b?c._value:(a=x(a,e.dataFormat,e.culture),null!==a&&(a=new pa(+a),h(a,g,i)||(a=null)),c._value=a,void(f&&null===a&&c._cell?c._cell.removeClass("k-state-selected"):(c._changeView=!a||d&&0!==d.compare(a,c._current),c.navigate(a))))},_move:function(b){var c,d,e,f,h=this,i=h.options,j=b.keyCode,k=h._view,l=h._index,m=new pa(+h._current),n=s.support.isRtl(h.wrapper);return b.target===h._table[0]&&(h._active=!0),b.ctrlKey?j==w.RIGHT&&!n||j==w.LEFT&&n?(h.navigateToFuture(),d=!0):j==w.LEFT&&!n||j==w.RIGHT&&n?(h.navigateToPast(),d=!0):j==w.UP?(h.navigateUp(),d=!0):j==w.DOWN&&(h._click(a(h._cell[0].firstChild)),d=!0):(j==w.RIGHT&&!n||j==w.LEFT&&n?(c=1,d=!0):j==w.LEFT&&!n||j==w.RIGHT&&n?(c=-1,d=!0):j==w.UP?(c=0===l?-7:-4,d=!0):j==w.DOWN?(c=0===l?7:4,d=!0):j==w.ENTER?(h._click(a(h._cell[0].firstChild)),d=!0):j==w.HOME||j==w.END?(e=j==w.HOME?"first":"last",f=k[e](m),m=new pa(f.getFullYear(),f.getMonth(),f.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()),d=!0):j==w.PAGEUP?(d=!0,h.navigateToPast()):j==w.PAGEDOWN&&(d=!0,h.navigateToFuture()),(c||e)&&(e||k.setDate(m,c),h._focus(g(m,i.min,i.max)))),d&&b.preventDefault(),h._current},_animate:function(a){var b=this,c=a.from,d=a.to,e=b._active;c?c.parent().data("animating")?(c.parent().joyStop(!0,!0).remove(),c.remove(),d.insertAfter(b.element[0].firstChild),b._focusView(e)):c.is(":visible")&&b.options.animation!==!1?b[a.vertical?"_vertical":"_horizontal"](c,d,a.future):(d.insertAfter(c),c.remove(),b._focusView(e)):(d.insertAfter(b.element[0].firstChild),b._bindTable(d))},_horizontal:function(a,c,d){var e=this,f=e._active,g=e.options.animation.horizontal,h=g.effects,i=a.outerWidth();h&&-1!=h.indexOf(O)&&(a.add(c).css({width:i}),a.wrap("<div/>"),e._focusView(f,a),a.parent().css({position:"relative",width:2*i,"float":N,"margin-left":d?0:-i}),c[d?"insertAfter":"insertBefore"](a),oa(g,{effects:O+":"+(d?"right":N),complete:function(){a.remove(),c.unwrap(),e._focusView(f),e._oldTable=b}}),a.parent().joyStop(!0,!0).joyAnimate(g))},_vertical:function(a,c){var d,e,f=this,g=f.options.animation.vertical,h=g.effects,i=f._active;h&&-1!=h.indexOf("zoom")&&(c.css({position:"absolute",top:a.prev().outerHeight(),left:0}).insertBefore(a),D&&(d=f._cellByDate(f._view.toDateString(f._current)),e=d.position(),e=e.left+parseInt(d.width()/2,10)+"px "+(e.top+parseInt(d.height()/2,10)+"px"),c.css(D,e)),a.joyStop(!0,!0).joyAnimate({effects:"fadeOut",duration:600,complete:function(){a.remove(),c.css({position:"static",top:0,left:0}),f._focusView(i),f._oldTable=b}}),c.joyStop(!0,!0).joyAnimate(g))},_cellByDate:function(b){return this._table.find("td:not(."+Z+")").filter(function(){return a(this.firstChild).attr(s.attr(V))===b})},_class:function(b,c){var d=this,e=d._cellID,f=d._cell;f&&f.removeAttr(ma).removeAttr("aria-label").removeAttr(L),f=d._table.find("td:not(."+Z+")").removeClass(b).filter(function(){return a(this.firstChild).attr(s.attr(V))===c}).attr(ma,!0),b!==Y||d._active||d.options.focusOnNav===!1||(b=""),f.addClass(b),f[0]&&(d._cell=f),e&&(f.attr(L,e),d._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",e))},_bindTable:function(a){a.on(da,this._addClassProxy).on(ba,this._removeClassProxy)},_click:function(a){var b=this,c=b.options,d=new Date(+b._current),e=a.attr(s.attr(V)).split("/");e=new pa(e[0],e[1],e[2]),y(e,0),b._view.setDate(d,e),b.navigateDown(g(d,c.min,c.max))},_focus:function(a){var b=this,c=b._view;0!==c.compare(a,b._current)?b.navigate(a):(b._current=a,b._class(Y,c.toDateString(a)))},_focusView:function(a,b){a&&this.focus(b)},_footer:function(b){var c=this,d=f(),e=c.element,g=e.find(".k-footer");return b?(g[0]||(g=a('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(e)),c._today=g.show().find(".k-link").html(b(d)).attr("title",s.toString(d,"D",c.options.culture)),void c._toggle()):(c._toggle(!1),void g.hide())},_header:function(){var a,b=this,c=b.element;c.find(".k-header")[0]||c.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),a=c.find(".k-link").on(fa+" "+ga+" "+da+" "+ba,k).click(!1),b._title=a.eq(1).on(J,function(){b._focusView(b.options.focusOnNav!==!1),b.navigateUp()}),b[ja]=a.eq(0).on(J,function(){b._focusView(b.options.focusOnNav!==!1),b.navigateToPast()}),b[ka]=a.eq(2).on(J,function(){b._focusView(b.options.focusOnNav!==!1),b.navigateToFuture()})},_navigate:function(a,b){var c=this,d=c._index+1,e=new pa(+c._current);a=c[a],a.hasClass(X)||(d>3?e.setFullYear(e.getFullYear()+100*b):sa.views[d].setDate(e,b),c.navigate(e))},_option:function(a,c){var d,e=this,f=e.options,g=e._value||e._current;return c===b?f[a]:(c=x(c,f.dataFormat,f.culture),void(c&&(f[a]=new pa(+c),d=a===M?c>g:g>c,(d||r(g,c))&&(d&&(e._value=null),e._changeView=!0),e._changeView||(e._changeView=!(!f.month.content&&!f.month.empty)),e.navigate(e._value),e._toggle())))},_toggle:function(a){var c=this,d=c.options,e=c._today;a===b&&(a=h(f(),d.min,d.max)),e&&(e.off(J),a?e.addClass(_).removeClass(X).on(J,na(c._todayClick,c)):e.removeClass(_).addClass(X).on(J,l))},_todayClick:function(a){var b=this,c=qa[b.options.depth],d=f();a.preventDefault(),0===b._view.compare(b._current,d)&&b._index==c&&(b._changeView=!1),b._value=d,b.navigate(d,c),b.trigger(T)},_templates:function(){var a=this,b=a.options,c=b.footer,d=b.month,e=d.content,f=d.empty;a.month={content:A('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+s.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(e||"#=data.value#")+"</a></td>",{useWithBlock:!!e}),empty:A('<td role="gridcell">'+(f||"&nbsp;")+"</td>",{useWithBlock:!!f})},a.footer=c!==!1?A(c||'#= joy.toString(data,"D","'+b.culture+'") #',{useWithBlock:!1}):null}});u.plugin(ra);var sa={firstDayOfMonth:function(a){return new pa(a.getFullYear(),a.getMonth(),1)},firstVisibleDay:function(a,b){b=b||s.culture().calendar;for(var c=b.firstDay,d=new pa(a.getFullYear(),a.getMonth(),0,a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds());d.getDay()!=c;)sa.setTime(d,-1*ia);return d},setTime:function(a,b){var c=a.getTimezoneOffset(),d=new pa(a.getTime()+b),e=d.getTimezoneOffset()-c;a.setTime(d.getTime()+e*ha)},views:[{name:P,title:function(a,b,c,d){return m(d).months.names[a.getMonth()]+" "+a.getFullYear()},content:function(a){for(var b=this,c=0,e=a.min,f=a.max,g=a.date,h=a.dates,j=a.dataFormat,k=a.culture,l=a.url,n=l&&h[0],o=m(k),q=o.firstDay,r=o.days,t=i(r.names,q),u=i(r.namesShort,q),v=sa.firstVisibleDay(g,o),w=b.first(g),x=b.last(g),z=b.toDateString,A=new pa,B='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>c;c++)B+='<th scope="col" title="'+t[c]+'">'+u[c]+"</th>";return A=new pa(A.getFullYear(),A.getMonth(),A.getDate()),y(A,0),A=+A,d({cells:42,perRow:7,html:B+='</tr></thead><tbody><tr role="row">',start:new pa(v.getFullYear(),v.getMonth(),v.getDate()),min:new pa(e.getFullYear(),e.getMonth(),e.getDate()),max:new pa(f.getFullYear(),f.getMonth(),f.getDate()),content:a.content,empty:a.empty,setter:b.setDate,build:function(a){var b=[],c=a.getDay(),d="",e="#";return(w>a||a>x)&&b.push(Z),+a===A&&b.push("k-today"),(0===c||6===c)&&b.push("k-weekend"),n&&p(+a,h)&&(e=l.replace("{0}",s.toString(a,j,k)),d=" k-action-link"),{date:a,dates:h,ns:s.ns,title:s.toString(a,"D",k),value:a.getDate(),dateString:z(a),cssClass:b[0]?' class="'+b.join(" ")+'"':"",linkClass:d,url:e}}})},first:function(a){return sa.firstDayOfMonth(a)},last:function(a){var b=new pa(a.getFullYear(),a.getMonth()+1,0),c=sa.firstDayOfMonth(a),d=Math.abs(b.getTimezoneOffset()-c.getTimezoneOffset());return d&&b.setHours(c.getHours()+d/60),b},compare:function(a,b){var c,d=a.getMonth(),e=a.getFullYear(),f=b.getMonth(),g=b.getFullYear();return c=e>g?1:g>e?-1:d==f?0:d>f?1:-1},setDate:function(a,b){var c=a.getHours();b instanceof pa?a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()):sa.setTime(a,b*ia),y(a,c)},toDateString:function(a){return a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate()}},{name:Q,title:function(a){return a.getFullYear()},content:function(a){var b=m(a.culture).months.namesAbbr,c=this.toDateString,e=a.min,f=a.max;return d({min:new pa(e.getFullYear(),e.getMonth(),1),max:new pa(f.getFullYear(),f.getMonth(),1),start:new pa(a.date.getFullYear(),0,1),setter:this.setDate,build:function(a){return{value:b[a.getMonth()],ns:s.ns,dateString:c(a),cssClass:""}}})},first:function(a){return new pa(a.getFullYear(),0,a.getDate())},last:function(a){return new pa(a.getFullYear(),11,a.getDate())},compare:function(a,b){return e(a,b)},setDate:function(a,b){var c,d=a.getHours();b instanceof pa?(c=b.getMonth(),a.setFullYear(b.getFullYear(),c,a.getDate()),c!==a.getMonth()&&a.setDate(0)):(c=a.getMonth()+b,a.setMonth(c),c>11&&(c-=12),c>0&&a.getMonth()!=c&&a.setDate(0)),y(a,d)},toDateString:function(a){return a.getFullYear()+"/"+a.getMonth()+"/1"}},{name:R,title:function(a,b,d){return c(a,b,d,10)},content:function(a){var b=a.date.getFullYear(),c=this.toDateString;return d({start:new pa(b-b%10-1,0,1),min:new pa(a.min.getFullYear(),0,1),max:new pa(a.max.getFullYear(),0,1),setter:this.setDate,build:function(a,b){return{value:a.getFullYear(),ns:s.ns,dateString:c(a),cssClass:0===b||11==b?$:""}}})},first:function(a){var b=a.getFullYear();return new pa(b-b%10,a.getMonth(),a.getDate())},last:function(a){var b=a.getFullYear();return new pa(b-b%10+9,a.getMonth(),a.getDate())},compare:function(a,b){return e(a,b,10)},setDate:function(a,b){j(a,b,1)},toDateString:function(a){return a.getFullYear()+"/0/1"}},{name:S,title:function(a,b,d){return c(a,b,d,100)},content:function(a){var b=a.date.getFullYear(),c=a.min.getFullYear(),e=a.max.getFullYear(),f=this.toDateString,g=c,h=e;return g-=g%10,h-=h%10,10>h-g&&(h=g+9),d({start:new pa(b-b%100-10,0,1),min:new pa(g,0,1),max:new pa(h,0,1),setter:this.setDate,build:function(a,b){var d=a.getFullYear(),g=d+9;return c>d&&(d=c),g>e&&(g=e),{ns:s.ns,value:d+" - "+g,dateString:f(a),cssClass:0===b||11==b?$:""}}})},first:function(a){var b=a.getFullYear();return new pa(b-b%100,a.getMonth(),a.getDate())},last:function(a){var b=a.getFullYear();return new pa(b-b%100+99,a.getMonth(),a.getDate())},compare:function(a,b){return e(a,b,100)},setDate:function(a,b){j(a,b,10)},toDateString:function(a){var b=a.getFullYear();return b-b%10+"/0/1"}}]};sa.isEqualDatePart=q,sa.makeUnselectable=o,sa.restrictValue=g,sa.isInRange=h,sa.normalize=n,sa.viewsEnum=qa,s.calendar=sa}(jQuery),function(a,b){function c(a,b){var c=a.x.location,d=a.y.location,e=b.x.location,f=b.y.location,g=c-e,h=d-f;return{center:{x:(c+e)/2,y:(d+f)/2},distance:Math.sqrt(g*g+h*h)}}function d(a){var b,c,d,e=[],f=a.originalEvent,g=a.currentTarget,i=0;if(a.api)e.push({id:2,event:a,target:a.target,currentTarget:a.target,location:a});else if(a.type.match(/touch/))for(c=f?f.changedTouches:[],b=c.length;b>i;i++)d=c[i],e.push({location:d,event:a,target:d.target,currentTarget:g,id:d.identifier});else e.push(h.pointers||h.msPointers?{location:f,event:a,target:a.target,currentTarget:g,id:f.pointerId}:{id:1,event:a,target:a.target,currentTarget:g,location:a});return e}function e(b){b.preventDefault();var c=a(b.data.root),d=c.closest(".k-widget").parent();d[0]||(d=c.parent());var e=a.extend(!0,{},b,{target:c[0]});d.trigger(a.Event(b.type,e))}function f(a){for(var b=g.eventMap.up.split(" "),c=0,d=b.length;d>c;c++)a(b[c])}var g=window.joy,h=g.support,i=window.document,j=g.Class,k=g.Observable,l=a.now,m=a.extend,n=h.mobileOS,o=n&&n.android,p=800,q=h.browser.msie?5:0,r="press",s="hold",t="select",u="start",v="move",w="end",x="cancel",y="tap",z="release",A="gesturestart",B="gesturechange",C="gestureend",D="gesturetap",E=j.extend({init:function(a,b){var c=this;c.axis=a,c._updateLocationData(b),c.startLocation=c.location,c.velocity=c.delta=0,c.timeStamp=l()},move:function(a){var b=this,c=a["page"+b.axis],d=l(),e=d-b.timeStamp||1;(c||!o)&&(b.delta=c-b.location,b._updateLocationData(a),b.initialDelta=c-b.startLocation,b.velocity=b.delta/e,b.timeStamp=d)},_updateLocationData:function(a){var b=this,c=b.axis;b.location=a["page"+c],b.client=a["client"+c],b.screen=a["screen"+c]}}),F=j.extend({init:function(a,b,c){m(this,{x:new E("X",c.location),y:new E("Y",c.location),userEvents:a,target:b,currentTarget:c.currentTarget,initialTouch:c.target,id:c.id,pressEvent:c,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(a.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(r,this.pressEvent)},_hold:function(){this._trigger(s,this.pressEvent)},move:function(a){var b=this;if(!b._finished){if(b.x.move(a.location),b.y.move(a.location),!b._moved){if(b._withinIgnoreThreshold())return;if(G.current&&G.current!==b.userEvents)return b.dispose();b._start(a)}b._finished||b._trigger(v,a)}},end:function(a){var b=this;b.endTime=l(),b._finished||(b._finished=!0,b._moved?b._trigger(w,a):b._trigger(y,a),clearTimeout(b._holdTimeout),b._trigger(z,a),b.dispose())},dispose:function(){var b=this.userEvents,c=b.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),c.splice(a.inArray(this,c),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(a){clearTimeout(this._holdTimeout),this.startTime=l(),this._moved=!0,this._trigger(u,a)},_trigger:function(a,b){var c=this,d=b.event,e={touch:c,x:c.x,y:c.y,target:c.target,event:d};c.userEvents.notify(a,e)&&d.preventDefault()},_withinIgnoreThreshold:function(){var a=this.x.initialDelta,b=this.y.initialDelta;return Math.sqrt(a*a+b*b)<=this.userEvents.threshold}}),G=k.extend({init:function(b,c){var d,e=this,j=g.guid();if(c=c||{},d=e.filter=c.filter,e.threshold=c.threshold||q,e.minHold=c.minHold||p,e.touches=[],e._maxTouches=c.multiTouch?2:1,e.allowSelection=c.allowSelection,e.captureUpIfMoved=c.captureUpIfMoved,e.eventNS=j,b=a(b).handler(e),k.fn.init.call(e),m(e,{element:b,surface:a(c.global?i.documentElement:c.surface||b),stopPropagation:c.stopPropagation,pressed:!1}),e.surface.handler(e).on(g.applyEventMap("move",j),"_move").on(g.applyEventMap("up cancel",j),"_end"),b.on(g.applyEventMap("down",j),d,"_start"),(h.pointers||h.msPointers)&&b.css("-ms-touch-action","pinch-zoom double-tap-zoom"),c.preventDragEvent&&b.on(g.applyEventMap("dragstart",j),g.preventDefault),b.on(g.applyEventMap("mousedown selectstart",j),d,{root:b},"_select"),e.captureUpIfMoved&&h.eventCapture){var l=e.surface[0],n=a.proxy(e.preventIfMoving,e);f(function(a){l.addEventListener(a,n,!0)})}e.bind([r,s,y,u,v,w,z,x,A,B,C,D,t],c)},preventIfMoving:function(a){this._isMoved()&&a.preventDefault()},destroy:function(){var a=this;if(!a._destroyed){if(a._destroyed=!0,a.captureUpIfMoved&&h.eventCapture){var b=a.surface[0];f(function(c){b.removeEventListener(c,a.preventIfMoving)})}a.element.joyDestroy(a.eventNS),a.surface.joyDestroy(a.eventNS),a.element.removeData("handler"),a.surface.removeData("handler"),a._disposeAll(),a.unbind(),delete a.surface,delete a.element,delete a.currentTarget}},capture:function(){G.current=this},cancel:function(){this._disposeAll(),this.trigger(x)},notify:function(a,b){var d=this,e=d.touches;if(this._isMultiTouch()){switch(a){case v:a=B;break;case w:a=C;break;case y:a=D}m(b,{touches:e},c(e[0],e[1]))}return this.trigger(a,b)},press:function(a,b,c){this._apiCall("_start",a,b,c)},move:function(a,b){this._apiCall("_move",a,b)},end:function(a,b){this._apiCall("_end",a,b)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var a=this.touches;a.length>0;)a.pop().dispose()},_isMoved:function(){return a.grep(this.touches,function(a){return a.isMoved()}).length},_select:function(a){(!this.allowSelection||this.trigger(t,{event:a}))&&e(a)},_start:function(b){var c,e,f=this,g=0,h=f.filter,i=d(b),j=i.length,k=b.which;if(!(k&&k>1||f._maxTouchesReached()))for(G.current=null,f.currentTarget=b.currentTarget,f.stopPropagation&&b.stopPropagation();j>g&&!f._maxTouchesReached();g++)e=i[g],c=h?a(e.currentTarget):f.element,c.length&&(e=new F(f,c,e),f.touches.push(e),e.press(),f._isMultiTouch()&&f.notify("gesturestart",{}))},_move:function(a){this._eachTouch("move",a)},_end:function(a){this._eachTouch("end",a)},_eachTouch:function(a,b){var c,e,f,g,h=this,i={},j=d(b),k=h.touches;for(c=0;c<k.length;c++)e=k[c],i[e.id]=e;for(c=0;c<j.length;c++)f=j[c],g=i[f.id],g&&g[a](f)},_apiCall:function(b,c,d,e){this[b]({api:!0,pageX:c,pageY:d,clientX:c,clientY:d,target:a(e||this.element)[0],stopPropagation:a.noop,preventDefault:a.noop})}});G.minHold=function(a){p=a},g.getTouches=d,g.touchDelta=c,g.UserEvents=G}(jQuery),function(a,b){function c(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}function d(a,b){return parseInt(a.css(b),10)||0}function e(a,b){return Math.min(Math.max(a,b.min),b.max)}function f(a,b){var c=s(a),e=c.left+d(a,"borderLeftWidth")+d(a,"paddingLeft"),f=c.top+d(a,"borderTopWidth")+d(a,"paddingTop"),g=e+a.width()-b.outerWidth(!0),h=f+a.height()-b.outerHeight(!0);return{x:{min:e,max:g},y:{min:f,max:h}}}function g(a,c,d){for(var e,f,g=0,h=c&&c.length,i=d&&d.length;a&&a.parentNode;){for(g=0;h>g;g++)if(e=c[g],e.element[0]===a)return{target:e,targetElement:a};for(g=0;i>g;g++)if(f=d[g],k.matchesSelector.call(a,f.options.filter))return{target:f,targetElement:a};a=a.parentNode}return b}var h,i,j=window.joy,k=j.support,l=window.document,m=j.Class,n=j.ui.Widget,o=j.Observable,p=j.UserEvents,q=a.proxy,r=a.extend,s=j.getOffset,t={},u={},v={},w=j.elementUnderCursor,x="keyup",y="change",z="dragstart",A="hold",B="drag",C="dragend",D="dragcancel",E="dragenter",F="dragleave",G="drop",H=o.extend({init:function(b,c){var d=this,e=b[0];d.capture=!1,e.addEventListener?(a.each(j.eventMap.down.split(" "),function(){e.addEventListener(this,q(d._press,d),!0)}),a.each(j.eventMap.up.split(" "),function(){e.addEventListener(this,q(d._release,d),!0)})):(a.each(j.eventMap.down.split(" "),function(){e.attachEvent(this,q(d._press,d))}),a.each(j.eventMap.up.split(" "),function(){e.attachEvent(this,q(d._release,d))})),o.fn.init.call(d),d.bind(["press","release"],c||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(a){var b=this;b.trigger("press"),b.capture&&a.preventDefault()},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),b.cancelCapture())}}),I=o.extend({init:function(b){var c=this;o.fn.init.call(c),c.forcedEnabled=!1,a.extend(c,b),c.scale=1,c.horizontal?(c.measure="offsetWidth",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="offsetHeight",c.scrollSize="scrollHeight",c.axis="y")},makeVirtual:function(){a.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(a,b){(this._virtualMin!==a||this._virtualMax!==b)&&(this._virtualMin=a,this._virtualMax=b,this.update())},outOfBounds:function(a){return a>this.max||a<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(a){this.scale=a},update:function(a){var b=this,c=b.virtual?b._virtualMax:b.getTotal(),d=c*b.scale,e=b.getSize();b.max=b.virtual?-b._virtualMin:0,b.size=e,b.total=d,b.min=Math.min(b.max,e-d),b.minScale=e/c,b.centerOffset=(d-e)/2,b.enabled=b.forcedEnabled||d>e,a||b.trigger(y,b)}}),J=o.extend({init:function(a){var b=this;o.fn.init.call(b),b.x=new I(r({horizontal:!0},a)),b.y=new I(r({horizontal:!1},a)),b.container=a.container,b.forcedMinScale=a.minScale,b.maxScale=a.maxScale||100,b.bind(y,a)},rescale:function(a){this.x.rescale(a),this.y.rescale(a),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var a=this;a.x.update(),a.y.update(),a.enabled=a.x.enabled||a.y.enabled,a.minScale=a.forcedMinScale||Math.min(a.x.minScale,a.y.minScale),a.fitScale=Math.max(a.x.minScale,a.y.minScale),a.trigger(y)}}),K=o.extend({init:function(a){var b=this;r(b,a),o.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;c.enabled&&((f<c.min&&0>a||f>c.max&&a>0)&&(a*=b.resistance),e.translateAxis(d,a),b.trigger(y,b))}}),L=m.extend({init:function(a){var b,c,d,e,f=this;r(f,{elastic:!0},a),d=f.elastic?.5:0,e=f.movable,f.x=b=new K({axis:"x",dimension:f.dimensions.x,resistance:d,movable:e}),f.y=c=new K({axis:"y",dimension:f.dimensions.y,resistance:d,movable:e}),f.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(a){f.gesture=a,f.offset=f.dimensions.container.offset()},gesturechange:function(a){var d,g=f.gesture,h=g.center,i=a.center,j=a.distance/g.distance,k=f.dimensions.minScale,l=f.dimensions.maxScale;e.scale<=k&&1>j&&(j+=.8*(1-j)),e.scale*j>=l&&(j=l/e.scale);var m=e.x+f.offset.left,n=e.y+f.offset.top;d={x:(m-h.x)*j+i.x-m,y:(n-h.y)*j+i.y-n},e.scaleWith(j),b.dragMove(d.x),c.dragMove(d.y),f.dimensions.rescale(e.scale),f.gesture=a,a.preventDefault()},move:function(a){a.event.target.tagName.match(/textarea|input/i)||(b.dimension.enabled||c.dimension.enabled?(b.dragMove(a.x.delta),c.dragMove(a.y.delta),a.preventDefault()):a.touch.skip())},end:function(a){a.preventDefault()}})}}),M=k.transitions.prefix+"Transform";i=k.hasHW3D?function(a,b,c){return"translate3d("+a+"px,"+b+"px,0) scale("+c+")"}:function(a,b,c){return"translate("+a+"px,"+b+"px) scale("+c+")"};var N=o.extend({init:function(b){var c=this;o.fn.init.call(c),c.element=a(b),c.element[0].style.webkitTransformOrigin="left top",c.x=0,c.y=0,c.scale=1,c._saveCoordinates(i(c.x,c.y,c.scale))},translateAxis:function(a,b){this[a]+=b,this.refresh()},scaleTo:function(a){this.scale=a,this.refresh()},scaleWith:function(a){this.scale*=a,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){r(this,a),this.refresh()},refresh:function(){var a,b=this,c=b.x,d=b.y;b.round&&(c=Math.round(c),d=Math.round(d)),a=i(c,d,b.scale),a!=b.coordinates&&(j.support.browser.msie&&j.support.browser.version<10?(b.element[0].style.position="absolute",b.element[0].style.left=b.x+"px",b.element[0].style.top=b.y+"px"):b.element[0].style[M]=a,b._saveCoordinates(a),b.trigger(y))},_saveCoordinates:function(a){this.coordinates=a}}),O=n.extend({init:function(a,b){var c=this;n.fn.init.call(c,a,b);var d=c.options.group;d in u?u[d].push(c):u[d]=[c]},events:[E,F,G],options:{name:"DropTarget",group:"default"},destroy:function(){var a,b=this.options.group,c=u[b]||v[b];if(c.length>1){for(n.fn.destroy.call(this),a=0;a<c.length;a++)if(c[a]==this){c.splice(a,1);break}}else O.destroyGroup(b)},_trigger:function(a,b){var c=this,d=t[c.options.group];return d?c.trigger(a,r({},b.event,{draggable:d,dropTarget:b.dropTarget})):void 0},_over:function(a){this._trigger(E,a)},_out:function(a){this._trigger(F,a)},_drop:function(a){var b=this,c=t[b.options.group];c&&(c.dropped=!b._trigger(G,a))}});O.destroyGroup=function(a){var b,c=u[a]||v[a];if(c){for(b=0;b<c.length;b++)n.fn.destroy.call(c[b]);c.length=0,delete u[a],delete v[a]}},O._cache=u;var P=O.extend({init:function(a,b){var c=this;n.fn.init.call(c,a,b);var d=c.options.group;d in v?v[d].push(c):v[d]=[c]},options:{name:"DropTargetArea",group:"default",filter:null}}),Q=n.extend({init:function(a,b){var c=this;n.fn.init.call(c,a,b),c._activated=!1,c.userEvents=new p(c.element,{global:!0,stopPropagation:!0,filter:c.options.filter,threshold:c.options.distance,start:q(c._start,c),hold:q(c._hold,c),move:q(c._drag,c),end:q(c._end,c),cancel:q(c._cancel,c)}),c._afterEndHandler=q(c._afterEnd,c),c.captureEscape=function(a){a.keyCode===j.keys.ESC&&(c._trigger(D,{event:a}),c.userEvents.cancel())}},events:[A,z,B,C,D],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_updateHint:function(b){var c,d=this,f=d.options,g=d.boundaries,h=f.axis,i=d.options.cursorOffset;i?c={left:b.x.location+i.left,top:b.y.location+i.top}:(d.hintOffset.left+=b.x.delta,d.hintOffset.top+=b.y.delta,c=a.extend({},d.hintOffset)),g&&(c.top=e(c.top,g.y),c.left=e(c.left,g.x)),"x"===h?delete c.top:"y"===h&&delete c.left,d.hint.css(c)},_start:function(b){var c=this,d=c.options,e=d.ignore,g=e&&a(b.touch.initialTouch).is(e),h=d.container,i=d.hint;if(g||d.holdToDrag&&!c._activated)return void c.userEvents.cancel();if(c.currentTarget=b.target,c.currentTargetOffset=s(c.currentTarget),i){c.hint&&c.hint.stop(!0,!0).remove(),c.hint=j.isFunction(i)?a(i.call(c,c.currentTarget)):i;var k=s(c.currentTarget);c.hintOffset=k,c.hint.css({position:"absolute",zIndex:2e4,left:k.left,top:k.top}).appendTo(l.body)}t[d.group]=c,c.dropped=!1,h&&(c.boundaries=f(h,c.hint)),c._trigger(z,b)&&(c.userEvents.cancel(),c._afterEnd()),a(l).on(x,c.captureEscape)},_hold:function(a){this.currentTarget=a.target,this._trigger(A,a)?this.userEvents.cancel():this._activated=!0},_drag:function(b){var c=this;b.preventDefault(),c._withDropTarget(b,function(c,d){if(!c)return void(h&&(h._trigger(F,r(b,{dropTarget:a(h.targetElement)})),h=null));if(h){if(d===h.targetElement)return;h._trigger(F,r(b,{dropTarget:a(h.targetElement)}))}c._trigger(E,r(b,{dropTarget:a(d)})),h=r(c,{targetElement:d})}),c._trigger(B,b),c.hint&&c._updateHint(b)},_end:function(b){var c=this;c._withDropTarget(b,function(c,d){c&&(c._drop(r({},b,{dropTarget:a(d)})),h=null)}),c._trigger(C,b),c._cancel(b.event)},_cancel:function(){var a=this;a._activated=!1,a.hint&&!a.dropped?setTimeout(function(){a.hint.stop(!0,!0).animate(a.currentTargetOffset,"fast",a._afterEndHandler)},0):a._afterEnd()},_trigger:function(a,b){var c=this;return c.trigger(a,r({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget,dropTarget:b.dropTarget}))},_withDropTarget:function(a,b){var d,e,f=this,h=f.options,i=u[h.group],j=v[h.group];(i&&i.length||j&&j.length)&&(d=w(a),f.hint&&c(f.hint[0],d)&&(f.hint.hide(),d=w(a),d||(d=w(a)),f.hint.show()),e=g(d,i,j),e?b(e.target,e.targetElement):b())},destroy:function(){var a=this;n.fn.destroy.call(a),a._afterEnd(),a.userEvents.destroy(),a.currentTarget=null},_afterEnd:function(){var b=this;b.hint&&b.hint.remove(),delete t[b.options.group],b.trigger("destroy"),a(l).off(x,b.captureEscape)}});j.ui.plugin(O),j.ui.plugin(P),j.ui.plugin(Q),j.TapCapture=H,j.containerBoundaries=f,r(j.ui,{Pane:L,PaneDimensions:J,Movable:N})}(jQuery),function(a,b){function c(a){var b,d,e,f,g=[];for(b=0,d=a.length;d>b;b++)if(a[b].hasSubgroups)g=g.concat(c(a[b].items));else for(e=a[b].items,f=0;f<e.length;f++)g.push(e[f]);return g}function d(a,b){var c=o.initWidget(a,{},b);return c?new I(c):void 0}function e(a){var b,c,d,f,g,h,i,j={};for(i=a.match(J),b=0,c=i.length;c>b;b++)d=i[b],f=d.indexOf(":"),g=d.substring(0,f),h=d.substring(f+1),"{"==h.charAt(0)&&(h=e(h)),j[g]=h;return j}function f(a,b,c){var d,e={};for(d in a)e[d]=new c(b,a[d]);return e}function g(a,b,c,h){var j,k,l,m=a.getAttribute("class"),n=a.getAttribute("dataBind"),p=a.children,q=[],r=!0,s={};if(h=h||[b],(m||n)&&i(a),m&&n&&(m=m.split(" ")[0],0==m.indexOf("joy-")&&(l=d(a,c))),n&&(n=e(n.replace(K,"")),l||(s=o.parseOptions(a,{textField:"",valueField:"",template:"",valueUpdate:C,valuePrimitive:!1,autoBind:!0}),s.roles=c,l=new H(a,s)),l.source=b,k=f(n,h,D),s.template&&(k.template=new F(h,"",s.template)),
k.click&&(n.events=n.events||{},n.events.click=n.click,delete k.click),k.source&&(r=!1),n.attr&&(k.attr=f(n.attr,h,D)),n.style&&(k.style=f(n.style,h,D)),n.events&&(k.events=f(n.events,h,E)),n.data&&(k.data=f(n.data,h,D)),l.bind(k)),l&&(a.joyBindingTarget=l),r&&p){for(j=0;j<p.length;j++)q[j]=p[j];for(j=0;j<q.length;j++)g(q[j],b,c,h)}}function h(b,c){var d,e,f,h=o.rolesFromNamespaces([].slice.call(arguments,2));for(c=o.observable(c),b=a(b),d=0,e=b.length;e>d;d++)f=b[d],1===f.nodeType&&g(f,c,h)}function i(a){var b=a.joyBindingTarget;b&&(b.destroy(),B?delete a.joyBindingTarget:a.removeAttribute?a.removeAttribute("joyBindingTarget"):a.joyBindingTarget=null)}function j(a){i(a),k(a)}function k(a){var b=a.children;if(b)for(var c=0,d=b.length;d>c;c++)j(b[c])}function l(b){var c,d;for(b=a(b),c=0,d=b.length;d>c;c++)j(b[c])}function m(a,b){var c=a.element,d=c[0].joyBindingTarget;d&&h(c,d.source,b)}var n,o=window.joy,p=o.Observable,q=o.data.ObservableObject,r=o.data.ObservableArray,s={}.toString,t={},u=Array.prototype.splice,v=o.Class,w=a.proxy,x="value",y="source",z="events",A="checked",B=!0,C="change";!function(){var a=document.createElement("a");a.innerText!==b?n="innerText":a.textContent!==b&&(n="textContent");try{delete a.test}catch(c){B=!1}}();var D=p.extend({init:function(a,b){var c=this;p.fn.init.call(c),c.source=a[0],c.parents=a,c.path=b,c.dependencies={},c.dependencies[b]=!0,c.observable=c.source instanceof p,c._access=function(a){c.dependencies[a.field]=!0},c.observable&&(c._change=function(a){c.change(a)},c.source.bind(C,c._change))},_parents:function(){var b=this.parents,c=this.get();if(c&&"function"==typeof c.parent){var d=c.parent();a.inArray(d,b)<0&&(b=[d].concat(b))}return b},change:function(a){var b,c,d=a.field,e=this;if("this"===e.path)e.trigger(C,a);else for(b in e.dependencies)if(0===b.indexOf(d)&&(c=b.charAt(d.length),!c||"."===c||"["===c)){e.trigger(C,a);break}},start:function(a){a.bind("get",this._access)},stop:function(a){a.unbind("get",this._access)},get:function(){var a=this,c=a.source,d=0,e=a.path,f=c;if(!a.observable)return f;for(a.start(a.source),f=c.get(e);f===b&&c;)c=a.parents[++d],c instanceof q&&(f=c.get(e));if(f===b)for(c=a.source;f===b&&c;)c=c.parent(),c instanceof q&&(f=c.get(e));return"function"==typeof f&&(d=e.lastIndexOf("."),d>0&&(c=c.get(e.substring(0,d))),a.start(c),f=c!==a.source?f.call(c,a.source):f.call(c),a.stop(c)),c&&c!==a.source&&(a.currentSource=c,c.unbind(C,a._change).bind(C,a._change)),a.stop(a.source),f},set:function(a){var b=this.currentSource||this.source,c=o.getter(this.path)(b);"function"==typeof c?b!==this.source?c.call(b,this.source,a):c.call(b,a):b.set(this.path,a)},destroy:function(){this.observable&&this.source.unbind(C,this._change)}}),E=D.extend({get:function(){var a,b=this.source,c=this.path,d=0;for(a=b.get(c);!a&&b;)b=this.parents[++d],b instanceof q&&(a=b.get(c));return w(a,b)}}),F=D.extend({init:function(a,b,c){var d=this;D.fn.init.call(d,a,b),d.template=c},render:function(a){var b;return this.start(this.source),b=o.render(this.template,a),this.stop(this.source),b}}),G=v.extend({init:function(a,b,c){this.element=a,this.bindings=b,this.options=c},bind:function(a,b){var c=this;a=b?a[b]:a,a.bind(C,function(a){c.refresh(b||a)}),c.refresh(b)},destroy:function(){}});t.attr=G.extend({refresh:function(a){this.element.setAttribute(a,this.bindings.attr[a].get())}}),t.data=G.extend({refresh:function(b){a(this.element).data(b,this.bindings.data[b].get())}}),t.style=G.extend({refresh:function(a){this.element.style[a]=this.bindings.style[a].get()||""}}),t.enable=G.extend({refresh:function(){var a=this.bindings.enable.get();null!=a&&(a?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled"))}}),t.readonly=G.extend({refresh:function(){var a=this.bindings.readonly.get();null!=a&&(a?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly"))}}),t.events=G.extend({init:function(a,b,c){G.fn.init.call(this,a,b,c),this.handlers={}},refresh:function(b){var c=a(this.element),d=this.bindings.events[b],e=this.handlers[b];e&&c.off(b,e),e=this.handlers[b]=d.get(),c.on(b,d.source,e)},destroy:function(){var b,c=a(this.element);for(b in this.handlers)c.off(b,this.handlers[b])}}),t.text=G.extend({refresh:function(){var a=this.bindings.text.get();null==a&&(a=""),this.element[n]=a}}),t.visible=G.extend({refresh:function(){var a=this.bindings.visible.get();this.element.style.display=null!=a&&a?"":"none"}}),t.html=G.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),t.value=G.extend({init:function(b,c,d){G.fn.init.call(this,b,c,d),this._change=w(this.change,this),this.eventName=d.valueUpdate||C,a(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=C;var a=this.element.value,b=this.element.type;"date"==b?a=o.parseDate(a,"yyyy-MM-dd"):"datetime-local"==b?a=o.parseDate(a,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==b&&(a=o.parseFloat(a)),this.bindings[x].set(a),this._initChange=!1},refresh:function(){if(!this._initChange){var a=this.bindings[x].get();null==a&&(a="");var b=this.element.type;"date"==b?a=o.toString(a,"yyyy-MM-dd"):"datetime-local"==b&&(a=o.toString(a,"yyyy-MM-ddTHH:mm:ss")),this.element.value=a}this._initChange=!1},destroy:function(){a(this.element).off(this.eventName,this._change)}}),t.source=G.extend({init:function(a,b,c){G.fn.init.call(this,a,b,c);var d=this.bindings.source.get();d instanceof o.data.DataSource&&c.autoBind!==!1&&d.fetch()},refresh:function(a){var b=this,c=b.bindings.source.get();c instanceof r||c instanceof o.data.DataSource?(a=a||{},"add"==a.action?b.add(a.index,a.items):"remove"==a.action?b.remove(a.index,a.items):"itemchange"!=a.action&&b.render()):b.render()},container:function(){var a=this.element;return"table"==a.nodeName.toLowerCase()&&(a.tBodies[0]||a.appendChild(document.createElement("tbody")),a=a.tBodies[0]),a},template:function(){var a=this.options,b=a.template,c=this.container().nodeName.toLowerCase();return b||(b="select"==c?a.valueField||a.textField?o.format('<option value="#:{0}#">#:{1}#</option>',a.valueField||a.textField,a.textField||a.valueField):"<option>#:data#</option>":"tbody"==c?"<tr><td>#:data#</td></tr>":"ul"==c||"ol"==c?"<li>#:data#</li>":"#:data#",b=o.template(b)),b},add:function(b,c){var d,e,f,h,i=this.container(),j=i.cloneNode(!1),k=i.children[b];if(a(j).html(o.render(this.template(),c)),j.children.length)for(d=this.bindings.source._parents(),e=0,f=c.length;f>e;e++)h=j.children[0],i.insertBefore(h,k||null),g(h,c[e],this.options.roles,[c[e]].concat(d))},remove:function(a,b){var c,d=this.container();for(c=0;c<b.length;c++){var e=d.children[a];j(e),d.removeChild(e)}},render:function(){var b,c,d,e=this.bindings.source.get(),f=this.container(),h=this.template();if(e instanceof o.data.DataSource&&(e=e.view()),e instanceof r||"[object Array]"===s.call(e)||(e=[e]),this.bindings.template){if(k(f),a(f).html(this.bindings.template.render(e)),f.children.length)for(b=this.bindings.source._parents(),c=0,d=e.length;d>c;c++)g(f.children[c],e[c],this.options.roles,[e[c]].concat(b))}else a(f).html(o.render(h,e))}}),t.input={checked:G.extend({init:function(b,c,d){G.fn.init.call(this,b,c,d),this._change=w(this.change,this),a(this.element).change(this._change)},change:function(){var a=this.element,b=this.value();if("radio"==a.type)this.bindings[A].set(b);else if("checkbox"==a.type){var c,d=this.bindings[A].get();d instanceof r?(b=this.element.value,"on"!==b&&"off"!==b&&(c=d.indexOf(b),c>-1?d.splice(c,1):d.push(b))):this.bindings[A].set(b)}},refresh:function(){var a=this.bindings[A].get(),b=a,c=this.element;"checkbox"==c.type?(b instanceof r&&(a=this.element.value,b.indexOf(a)>=0&&(a=!0)),c.checked=a===!0):"radio"==c.type&&null!=a&&c.value===a.toString()&&(c.checked=!0)},value:function(){var a=this.element,b=a.value;return"checkbox"==a.type&&(b=a.checked),b},destroy:function(){a(this.element).off(C,this._change)}})},t.select={value:G.extend({init:function(b,c,d){G.fn.init.call(this,b,c,d),this._change=w(this.change,this),a(this.element).change(this._change)},change:function(){var a,b,c,d,e,f,g=[],h=this.element,i=this.options.valueField||this.options.textField,j=this.options.valuePrimitive;for(e=0,f=h.options.length;f>e;e++)b=h.options[e],b.selected&&(d=b.attributes.value,d=d&&d.specified?b.value:b.text,g.push(d));if(i)for(a=this.bindings.source.get(),c=0;c<g.length;c++)for(e=0,f=a.length;f>e;e++)if(a[e].get(i)==g[c]){g[c]=a[e];break}d=this.bindings[x].get(),d instanceof r?d.splice.apply(d,[0,d.length].concat(g)):this.bindings[x].set(j||!(d instanceof q)&&i?g[0].get(i):g[0])},refresh:function(){var a,b,c=this.element,d=c.options,e=this.bindings[x].get(),f=e,g=this.options.valueField||this.options.textField,h=!1;f instanceof r||(f=new r([e])),c.selectedIndex=-1;for(var i=0;i<f.length;i++)for(e=f[i],g&&e instanceof q&&(e=e.get(g)),a=0;a<d.length;a++)b=d[a].value,""===b&&""!==e&&(b=d[a].text),b==e&&(d[a].selected=!0,h=!0)},destroy:function(){a(this.element).off(C,this._change)}})},t.widget={events:G.extend({init:function(a,b,c){G.fn.init.call(this,a.element[0],b,c),this.widget=a,this.handlers={}},refresh:function(a){var b=this.bindings.events[a],c=this.handlers[a];c&&this.widget.unbind(a,c),c=b.get(),this.handlers[a]=function(a){a.data=b.source,c(a),a.data===b.source&&delete a.data},this.widget.bind(a,this.handlers[a])},destroy:function(){var a;for(a in this.handlers)this.widget.unbind(a,this.handlers[a])}}),checked:G.extend({init:function(a,b,c){G.fn.init.call(this,a.element[0],b,c),this.widget=a,this._change=w(this.change,this),this.widget.bind(C,this._change)},change:function(){this.bindings[A].set(this.value())},refresh:function(){this.widget.check(this.bindings[A].get()===!0)},value:function(){var a=this.element,b=a.value;return("on"==b||"off"==b)&&(b=a.checked),b},destroy:function(){this.widget.unbind(C,this._change)}}),visible:G.extend({init:function(a,b,c){G.fn.init.call(this,a.element[0],b,c),this.widget=a},refresh:function(){var a=this.bindings.visible.get();this.widget.wrapper[0].style.display=null!=a&&a?"":"none"}}),enable:G.extend({init:function(a,b,c){G.fn.init.call(this,a.element[0],b,c),this.widget=a},refresh:function(){if(this.widget.enable){var a=this.bindings.enable.get();null!=a&&this.widget.enable(a)}}}),source:G.extend({init:function(a,b,c){var d=this;G.fn.init.call(d,a.element[0],b,c),d.widget=a,d._dataBinding=w(d.dataBinding,d),d._dataBound=w(d.dataBound,d),d._itemChange=w(d.itemChange,d)},itemChange:function(a){g(a.item[0],a.data,this._ns(a.ns),[a.data].concat(this.bindings.source._parents()))},dataBinding:function(){var a,b,c=this.widget,d=c.items();for(a=0,b=d.length;b>a;a++)j(d[a])},_ns:function(b){b=b||o.ui;var c=[o.ui,o.dataviz.ui,o.mobile.ui];return c.splice(a.inArray(b,c),1),c.unshift(b),o.rolesFromNamespaces(c)},dataBound:function(a){var b,d,e,f=this.widget,h=f.items(),i=f.dataSource,j=i.view(),k=i.group()||[];if(h.length)for(k.length&&(j=c(j)),e=this.bindings.source._parents(),b=0,d=j.length;d>b;b++)g(h[b],j[b],this._ns(a.ns),[j[b]].concat(e))},refresh:function(a){var b,c=this,d=c.widget;a=a||{},a.action||(c.destroy(),d.bind("dataBinding",c._dataBinding),d.bind("dataBound",c._dataBound),d.bind("itemChange",c._itemChange),b=c.bindings.source.get(),d.dataSource instanceof o.data.DataSource&&d.dataSource!=b&&(b instanceof o.data.DataSource?d.setDataSource(b):b&&b._dataSource?d.setDataSource(b._dataSource):d.dataSource.data(b)))},destroy:function(){var a=this.widget;a.unbind("dataBinding",this._dataBinding),a.unbind("dataBound",this._dataBound),a.unbind("itemChange",this._itemChange)}}),value:G.extend({init:function(b,c,d){G.fn.init.call(this,b.element[0],c,d),this.widget=b,this._change=a.proxy(this.change,this),this.widget.first(C,this._change);var e=this.bindings.value.get();this._valueIsObservableObject=!d.valuePrimitive&&(null==e||e instanceof q),this._valueIsObservableArray=e instanceof r,this._initChange=!1},change:function(){var a,b,c,d,e,f,g,h=this.widget.value(),i=this.options.dataValueField||this.options.dataTextField,j="[object Array]"===s.call(h),k=this._valueIsObservableObject,l=[];if(this._initChange=!0,i)if(this.bindings.source&&(g=this.bindings.source.get()),""===h&&(k||this.options.valuePrimitive))h=null;else{for((!g||g instanceof o.data.DataSource)&&(g=this.widget.dataSource.view()),j&&(b=h.length,l=h.slice(0)),e=0,f=g.length;f>e;e++)if(c=g[e],d=c.get(i),j){for(a=0;b>a;a++)if(d==l[a]){l[a]=c;break}}else if(d==h){h=k?c:d;break}l[0]&&(h=this._valueIsObservableArray?l:k||!i?l[0]:l[0].get(i))}this.bindings.value.set(h),this._initChange=!1},refresh:function(){if(!this._initChange){var a,b=this.options.dataValueField||this.options.dataTextField,c=this.bindings.value.get(),d=0,e=[];if(b)if(c instanceof r){for(a=c.length;a>d;d++)e[d]=c[d].get(b);c=e}else c instanceof q&&(c=c.get(b));c||(c=""),this.widget.value(c)}this._initChange=!1},destroy:function(){this.widget.unbind(C,this._change)}}),multiselect:{value:G.extend({init:function(b,c,d){G.fn.init.call(this,b.element[0],c,d),this.widget=b,this._change=a.proxy(this.change,this),this.widget.first(C,this._change),this._initChange=!1},change:function(){var a=this,b=a.bindings[x].get(),c=a.options.valuePrimitive,d=c?a.widget.value():a.widget.dataItems(),e=this.options.dataValueField||this.options.dataTextField;if(d=d.slice(0),a._initChange=!0,b instanceof r){for(var f,g,h,i=[],j=d.length,k=0,l=0,m=b[k],n=!1,o=0,p=b.length+1;m;){for(h=!1,l=0;j>l;l++)if(c?n=d[l]==m:(g=d[l],g=g.get?g.get(e):g,n=g==(m.get?m.get(e):m)),n){d.splice(l,1),j-=1,h=!0;break}if(h?k+=1:(i.push(m),u.call(b,k,1),f=k),m=b[k],o++,o>p)break}u.apply(b,[b.length,0].concat(d)),i.length&&b.trigger("change",{action:"remove",items:i,index:f}),d.length&&b.trigger("change",{action:"add",items:d,index:b.length-1})}else a.bindings[x].set(d);a._initChange=!1},refresh:function(){if(!this._initChange){var a,b,c=this.options.dataValueField||this.options.dataTextField,d=this.bindings.value.get(),e=0,f=[];if(c)if(d instanceof r){for(a=d.length;a>e;e++)b=d[e],f[e]=b.get?b.get(c):b;d=f}else d instanceof q&&(d=d.get(c));this.widget.value(d)}},destroy:function(){this.widget.unbind(C,this._change)}})}};var H=v.extend({init:function(a,b){this.target=a,this.options=b,this.toDestroy=[]},bind:function(a){var b,c,d,e,f=this.target.nodeName.toLowerCase(),g=t[f]||{};for(b in a)b==x?c=!0:b==y?d=!0:b==z?e=!0:this.applyBinding(b,a,g);d&&this.applyBinding(y,a,g),c&&this.applyBinding(x,a,g),e&&this.applyBinding(z,a,g)},applyBinding:function(a,b,c){var d,e=c[a]||t[a],f=this.toDestroy,g=b[a];if(e)if(e=new e(this.target,b,this.options),f.push(e),g instanceof D)e.bind(g),f.push(g);else for(d in g)e.bind(g,d),f.push(g[d]);else if("template"!==a)throw new Error("The "+a+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var a,b,c=this.toDestroy;for(a=0,b=c.length;b>a;a++)c[a].destroy()}}),I=H.extend({bind:function(a){var b,c=this,d=!1,e=!1,f=t.widget[c.target.options.name.toLowerCase()]||{};for(b in a)b==x?d=!0:b==y?e=!0:c.applyBinding(b,a,f);e&&c.applyBinding(y,a,f),d&&c.applyBinding(x,a,f)},applyBinding:function(a,b,c){var d,e=c[a]||t.widget[a],f=this.toDestroy,g=b[a];if(!e)throw new Error("The "+a+" binding is not supported by the "+this.target.options.name+" widget");if(e=new e(this.target,b,this.target.options),f.push(e),g instanceof D)e.bind(g),f.push(g);else for(d in g)e.bind(g,d),f.push(g[d])}}),J=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,K=/\s/g;o.unbind=l,o.bind=h,o.data.binders=t,o.data.Binder=G,o.notify=m,o.observable=function(a){return a instanceof q||(a=new q(a)),a},o.observableHierarchy=function(a){function b(a){var c,d;for(c=0;c<a.length;c++)a[c]._initChildren(),d=a[c].children,d.fetch(),a[c].items=d.data(),b(a[c].items)}var c=o.data.HierarchicalDataSource.create(a);return c.fetch(),b(c.data()),c._data._dataSource=c,c._data}}(jQuery),function(a,b){function c(a){return parseInt(a,10)}function d(a,b){return c(a.css(b))}function e(a){var b=[];for(var c in a)b.push(c);return b}function f(a){for(var b in a)-1!=E.indexOf(b)&&-1==F.indexOf(b)&&delete a[b];return a}function g(a,b){var c,d,e,f,g=[],h={};for(d in b)c=d.toLowerCase(),f=t&&-1!=E.indexOf(c),!r.hasHW3D&&f&&-1==F.indexOf(c)?delete b[d]:(e=b[d],f?g.push(d+"("+e+")"):h[d]=e);return g.length&&(h[X]=g.join(" ")),h}function h(a,b){if(t){var d=a.css(X);if(d==L)return"scale"==b?1:0;var e=d.match(new RegExp(b+"\\s*\\(([\\d\\w\\.]+)")),f=0;return e?f=c(e[1]):(e=d.match(y)||[0,0,0,0,0],b=b.toLowerCase(),A.test(b)?f=parseFloat(e[3]/e[2]):"translatey"==b?f=parseFloat(e[4]/e[2]):"scale"==b?f=parseFloat(e[2]):"rotate"==b&&(f=parseFloat(Math.atan2(e[2],e[1])))),f}return parseFloat(a.css(b))}function i(a){return a.charAt(0).toUpperCase()+a.substring(1)}function j(a,b){var c=da.extend(b),d=c.prototype.directions;n[i(a)]=c,n.Element.prototype[a]=function(a,b,d,e){return new c(this.element,a,b,d,e)},o(d,function(b,d){n.Element.prototype[a+i(d)]=function(a,b,e){return new c(this.element,d,a,b,e)}})}function k(a,b,c,d){j(a,{directions:fa,startValue:function(a){return this._startValue=a,this},endValue:function(a){return this._endValue=a,this},shouldHide:function(){return this._shouldHide},prepare:function(a,e){var f,g,h=this,i="out"===this._direction,j=h.element.data(b),k=!(isNaN(j)||j==c);f=k?j:"undefined"!=typeof this._startValue?this._startValue:i?c:d,g="undefined"!=typeof this._endValue?this._endValue:i?d:c,this._reverse?(a[b]=g,e[b]=f):(a[b]=f,e[b]=g),h._shouldHide=e[b]===d}})}function l(a,b){var c=m.directions[b].vertical,d=a[c?O:N]()/2+"px";return ha[b].replace("$size",d)}var m=window.joy,n=m.effects,o=a.each,p=a.extend,q=a.proxy,r=m.support,s=r.browser,t=r.transforms,u=r.transitions,v={scale:0,scalex:0,scaley:0,scale3d:0},w={translate:0,translatex:0,translatey:0,translate3d:0},x="undefined"!=typeof document.documentElement.style.zoom&&!t,y=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,z=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,A=/translatex?$/i,B=/(zoom|fade|expand)(\w+)/,C=/(zoom|fade|expand)/,D=/[xy]$/i,E=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],F=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],G={rotate:"deg",scale:"",skew:"px",translate:"px"},H=t.css,I=Math.round,J="",K="px",L="none",M="auto",N="width",O="height",P="hidden",Q="origin",R="abortId",S="overflow",T="translate",U="position",V="completeCallback",W=H+"transition",X=H+"transform",Y=H+"backface-visibility",Z=H+"perspective",$="1500px",_="perspective("+$+")",aa=(r.mobileOS&&7==r.mobileOS.majorVersion,{left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}});if(m.directions=aa,p(a.fn,{joyStop:function(a,b){return u?n.stopQueue(this,a||!1,b||!1):this.stop(a,b)}}),t&&!u){o(F,function(b,c){a.fn[c]=function(b){if("undefined"==typeof b)return h(this,c);var d=a(this)[0],e=c+"("+b+G[c.replace(D,"")]+")";return-1==d.style.cssText.indexOf(X)?a(this).css(X,e):d.style.cssText=d.style.cssText.replace(new RegExp(c+"\\(.*?\\)","i"),e),this},a.fx.step[c]=function(b){a(b.elem)[c](b.now)}});var ba=a.fx.prototype.cur;a.fx.prototype.cur=function(){return-1!=F.indexOf(this.prop)?parseFloat(a(this.elem)[this.prop]()):ba.apply(this,arguments)}}m.toggleClass=function(a,b,c,d){return b&&(b=b.split(" "),u&&(c=p({exclusive:"all",duration:400,ease:"ease-out"},c),a.css(W,c.exclusive+" "+c.duration+"ms "+c.ease),setTimeout(function(){a.css(W,"").css(O)},c.duration)),o(b,function(b,c){a.toggleClass(c,d)})),a},m.parseEffects=function(a,b){var c={};return"string"==typeof a?o(a.split(" "),function(a,d){var e=!C.test(d),f=d.replace(B,function(a,b,c){return b+":"+c.toLowerCase()}),g=f.split(":"),h=g[1],i={};g.length>1&&(i.direction=b&&e?aa[h].reverse:h),c[g[0]]=i}):o(a,function(a){var d=this.direction;d&&b&&!C.test(a)&&(this.direction=aa[d].reverse),c[a]=this}),c},u&&p(n,{transition:function(b,c,d){var f,h,i=0,j=b.data("keys")||[];d=p({duration:200,ease:"ease-out",complete:null,exclusive:"all"},d);var k=!1,l=function(){k||(k=!0,h&&(clearTimeout(h),h=null),b.removeData(R).dequeue().css(W,"").css(W),d.complete.call(b))};d.duration=a.fx?a.fx.speeds[d.duration]||d.duration:d.duration,f=g(b,c),a.merge(j,e(f)),b.data("keys",a.unique(j)).height(),b.css(W,d.exclusive+" "+d.duration+"ms "+d.ease).css(W),b.css(f).css(X),u.event&&(b.one(u.event,l),0!==d.duration&&(i=500)),h=setTimeout(l,d.duration+i),b.data(R,h),b.data(V,l)},stopQueue:function(a,b,c){var d,e=a.data("keys"),f=!c&&e,g=a.data(V);return f&&(d=m.getComputedStyles(a[0],e)),g&&g(),f&&a.css(d),a.removeData("keys").stop(b)}});var ca=m.Class.extend({init:function(a,b){var c=this;c.element=a,c.effects=[],c.options=b,c.restore=[]},run:function(b){var c,d,e,h,i,j,k=this,l=b.length,m=k.element,o=k.options,q=a.Deferred(),r={},s={};for(k.effects=b,q.then(a.proxy(k,"complete")),m.data("animating",!0),d=0;l>d;d++)for(c=b[d],c.setReverse(o.reverse),c.setOptions(o),k.addRestoreProperties(c.restore),c.prepare(r,s),i=c.children(),e=0,j=i.length;j>e;e++)i[e].duration(o.duration).run();for(var v in o.effects)p(s,o.effects[v].properties);for(m.is(":visible")||p(r,{display:m.data("olddisplay")||"block"}),t&&!o.reset&&(h=m.data("targetTransform"),h&&(r=p(h,r))),r=g(m,r),t&&!u&&(r=f(r)),m.css(r).css(X),d=0;l>d;d++)b[d].setup();return o.init&&o.init(),m.data("targetTransform",s),n.animate(m,s,p({},o,{complete:q.resolve})),q.promise()},stop:function(){a(this.element).joyStop(!0,!0)},addRestoreProperties:function(a){for(var b,c=this.element,d=0,e=a.length;e>d;d++)b=a[d],this.restore.push(b),c.data(b)||c.data(b,c.css(b))},restoreCallback:function(){for(var a=this.element,b=0,c=this.restore.length;c>b;b++){var d=this.restore[b];a.css(d,a.data(d))}},complete:function(){var b=this,c=0,d=b.element,e=b.options,f=b.effects,g=f.length;for(d.removeData("animating").dequeue(),e.hide&&d.data("olddisplay",d.css("display")).hide(),this.restoreCallback(),x&&!t&&setTimeout(a.proxy(this,"restoreCallback"),0);g>c;c++)f[c].teardown();e.completeCallback&&e.completeCallback(d)}});n.promise=function(a,b){var c,d,e=[],f=new ca(a,b),g=m.parseEffects(b.effects);b.effects=g;for(var h in g)c=n[i(h)],c&&(d=new c(a,g[h].direction),e.push(d));e[0]?f.run(e):(a.is(":visible")||a.css({display:a.data("olddisplay")||"block"}).css("display"),b.init&&b.init(),a.dequeue(),f.complete())},p(n,{animate:function(c,e,g){var h=g.transition!==!1;delete g.transition,u&&"transition"in n&&h?n.transition(c,e,g):t?c.animate(f(e),{queue:!1,show:!1,hide:!1,duration:g.duration,complete:g.complete}):c.each(function(){var c=a(this),f={};o(E,function(a,g){var h,i=e?e[g]+" ":null;if(i){var j=e;if(g in v&&e[g]!==b)h=i.match(z),t&&p(j,{scale:+h[0]});else if(g in w&&e[g]!==b){var k=c.css(U),l="absolute"==k||"fixed"==k;c.data(T)||(l?c.data(T,{top:d(c,"top")||0,left:d(c,"left")||0,bottom:d(c,"bottom"),right:d(c,"right")}):c.data(T,{top:d(c,"marginTop")||0,left:d(c,"marginLeft")||0}));var m=c.data(T);if(h=i.match(z)){var n=g==T+"y"?0:+h[1],o=g==T+"y"?+h[1]:+h[2];l?(isNaN(m.right)?isNaN(n)||p(j,{left:m.left+n}):isNaN(n)||p(j,{right:m.right-n}),isNaN(m.bottom)?isNaN(o)||p(j,{top:m.top+o}):isNaN(o)||p(j,{bottom:m.bottom-o})):(isNaN(n)||p(j,{marginLeft:m.left+n}),isNaN(o)||p(j,{marginTop:m.top+o}))}}!t&&"scale"!=g&&g in j&&delete j[g],j&&p(f,j)}}),s.msie&&delete f.scale,c.animate(f,{queue:!1,show:!1,hide:!1,duration:g.duration,complete:g.complete})})}}),n.animatedPromise=n.promise;var da=m.Class.extend({init:function(a,b){var c=this;c.element=a,c._direction=b,c.options={},c._additionalEffects=[],c.restore||(c.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(a){return this._additionalEffects.push(a),this},direction:function(a){return this._direction=a,this},duration:function(a){return this._duration=a,this},compositeRun:function(){var a=this,b=new ca(a.element,{reverse:a._reverse,duration:a._duration}),c=a._additionalEffects.concat([a]);return b.run(c)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var b,c,d=this,e=d.element,h=0,i=d.restore,j=i.length,k=a.Deferred(),l={},m={},o=d.children(),q=o.length;for(k.then(a.proxy(d,"_complete")),e.data("animating",!0),h=0;j>h;h++)b=i[h],e.data(b)||e.data(b,e.css(b));for(h=0;q>h;h++)o[h].duration(d._duration).run();return d.prepare(l,m),e.is(":visible")||p(l,{display:e.data("olddisplay")||"block"}),t&&(c=e.data("targetTransform"),c&&(l=p(c,l))),l=g(e,l),t&&!u&&(l=f(l)),e.css(l).css(X),d.setup(),e.data("targetTransform",m),n.animate(e,m,{duration:d._duration,complete:k.resolve}),k.promise()},stop:function(){var b=0,c=this.children(),d=c.length;for(b=0;d>b;b++)c[b].stop();return a(this.element).joyStop(!0,!0),this},restoreCallback:function(){for(var a=this.element,b=0,c=this.restore.length;c>b;b++){var d=this.restore[b];a.css(d,a.data(d))}},_complete:function(){var b=this,c=b.element;c.removeData("animating").dequeue(),b.restoreCallback(),b.shouldHide()&&c.data("olddisplay",c.css("display")).hide(),x&&!t&&setTimeout(a.proxy(b,"restoreCallback"),0),b.teardown()},setOptions:function(a){p(!0,this.options,a)},children:function(){return[]},shouldHide:a.noop,setup:a.noop,prepare:a.noop,teardown:a.noop,directions:[],setReverse:function(a){return this._reverse=a,this}}),ea=["left","right","up","down"],fa=["in","out"];j("slideIn",{directions:ea,divisor:function(a){return this.options.divisor=a,this},prepare:function(a,b){var c,d=this,e=d.element,f=aa[d._direction],g=-f.modifier*(f.vertical?e.outerHeight():e.outerWidth()),h=g/(d.options&&d.options.divisor||1)+K,i="0px";d._reverse&&(c=a,a=b,b=c),t?(a[f.transition]=h,b[f.transition]=i):(a[f.property]=h,b[f.property]=i)}}),j("tile",{directions:ea,init:function(a,b,c){da.prototype.init.call(this,a,b),this.options={previous:c}},previousDivisor:function(a){return this.options.previousDivisor=a,this},children:function(){var a=this,b=a._reverse,c=a.options.previous,d=a.options.previousDivisor||1,e=a._direction,f=[m.fx(a.element).slideIn(e).setReverse(b)];return c&&f.push(m.fx(c).slideIn(aa[e].reverse).divisor(d).setReverse(!b)),f}}),k("fade","opacity",1,0),k("zoom","scale",1,.01),j("slideMargin",{prepare:function(a,b){var c,d=this,e=d.element,f=d.options,g=e.data(Q),h=f.offset,i=d._reverse;i||null!==g||e.data(Q,parseFloat(e.css("margin-"+f.axis))),c=e.data(Q)||0,b["margin-"+f.axis]=i?c:c+h}}),j("slideTo",{prepare:function(a,b){var c=this,d=c.element,e=c.options,f=e.offset.split(","),g=c._reverse;t?(b.translatex=g?0:f[0],b.translatey=g?0:f[1]):(b.left=g?0:f[0],b.top=g?0:f[1]),d.css("left")}}),j("expand",{directions:["horizontal","vertical"],restore:[S],prepare:function(a,c){var d=this,e=d.element,f=d.options,g=d._reverse,h="vertical"===d._direction?O:N,i=e[0].style[h],j=e.data(h),k=parseFloat(j||i),l=I(e.css(h,M)[h]());a.overflow=P,k=f&&f.reset?l||k:k||l,c[h]=(g?0:k)+K,a[h]=(g?k:0)+K,j===b&&e.data(h,i)},shouldHide:function(){return this._reverse},teardown:function(){var a=this,b=a.element,c="vertical"===a._direction?O:N,d=b.data(c);(d==M||d===J)&&setTimeout(function(){b.css(c,M).css(c)},0)}});var ga={position:"absolute",marginLeft:0,marginTop:0,scale:1};j("transfer",{init:function(a,b){this.element=a,this.options={target:b},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(a,b){var c,d=this,e=d.element,f=d.options,g=d._reverse,i=f.target,j=h(e,"scale"),k=i.offset(),l=i.outerHeight()/e.outerHeight();p(a,ga),b.scale=1,e.css(X,"scale(1)").css(X),c=e.offset(),e.css(X,"scale("+j+")");var m=0,n=0,o=k.left-c.left,q=k.top-c.top,r=m+e.outerWidth(),s=n,t=o+i.outerWidth(),u=q,v=(q-n)/(o-m),w=(u-s)/(t-r),x=(n-s-v*m+w*r)/(w-v),y=n+v*(x-m);a.top=c.top,a.left=c.left,a.transformOrigin=x+K+" "+y+K,g?a.scale=l:b.scale=l}});var ha={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ia={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};j("turningPage",{directions:ea,init:function(a,b,c){da.prototype.init.call(this,a,b),this._container=c},prepare:function(a,b){var c=this,d=c._reverse,e=d?aa[c._direction].reverse:c._direction,f=ia[e];a.zIndex=1,c._clipInHalf&&(a.clip=l(c._container,m.directions[e].reverse)),a[Y]=P,b[X]=_+(d?f.start:f.end),a[X]=_+(d?f.end:f.start)},setup:function(){this._container.append(this.element)},face:function(a){return this._face=a,this},shouldHide:function(){var a=this,b=a._reverse,c=a._face;return b&&!c||!b&&c},clipInHalf:function(a){return this._clipInHalf=a,this},temporary:function(){return this.element.addClass("temp-page"),this}}),j("staticPage",{directions:ea,init:function(a,b,c){da.prototype.init.call(this,a,b),this._container=c},restore:["clip"],prepare:function(a,b){var c=this,d=c._reverse?aa[c._direction].reverse:c._direction;a.clip=l(c._container,d),a.opacity=.999,b.opacity=1},shouldHide:function(){var a=this,b=a._reverse,c=a._face;return b&&!c||!b&&c},face:function(a){return this._face=a,this}}),j("pageturn",{directions:["horizontal","vertical"],init:function(a,b,c,d){da.prototype.init.call(this,a,b),this.options={},this.options.face=c,this.options.back=d},children:function(){var a,b=this,c=b.options,d="horizontal"===b._direction?"left":"top",e=m.directions[d].reverse,f=b._reverse,g=c.face.clone(!0).removeAttr("id"),h=c.back.clone(!0).removeAttr("id"),i=b.element;return f&&(a=d,d=e,e=a),[m.fx(c.face).staticPage(d,i).face(!0).setReverse(f),m.fx(c.back).staticPage(e,i).setReverse(f),m.fx(g).turningPage(d,i).face(!0).clipInHalf(!0).temporary().setReverse(f),m.fx(h).turningPage(e,i).clipInHalf(!0).temporary().setReverse(f)]},prepare:function(a,b){a[Z]=$,a.transformStyle="preserve-3d",a.opacity=.999,b.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),j("flip",{directions:["horizontal","vertical"],init:function(a,b,c,d){da.prototype.init.call(this,a,b),this.options={},this.options.face=c,this.options.back=d},children:function(){var a,b=this,c=b.options,d="horizontal"===b._direction?"left":"top",e=m.directions[d].reverse,f=b._reverse,g=b.element;return f&&(a=d,d=e,e=a),[m.fx(c.face).turningPage(d,g).face(!0).setReverse(f),m.fx(c.back).turningPage(e,g).setReverse(f)]},prepare:function(a){a[Z]=$,a.transformStyle="preserve-3d"}});var ja=!r.mobileOS.android;j("replace",{init:function(b,c,d){da.prototype.init.call(this,b),this._previous=a(c),this._transitionClass=d},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},_both:function(){return a().add(this._element).add(this._previous)},_containerClass:function(){var a=this._direction,b="k-fx k-fx-start k-fx-"+this._transitionClass;return a&&(b+=" k-fx-"+a),this._reverse&&(b+=" k-fx-reverse"),b},complete:function(){if(this.deferred){var a=this.container;a.removeClass("k-fx-end").removeClass(this._containerClass()),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),ja&&a.css(S,""),this.isAbsolute||this._both().css(U,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();

var b,c=this,d=c.element,e=c._previous,f=(c._direction,d.parents().filter(e.parents()).first()),g=c._both(),h=a.Deferred(),i=d.css(U);return f.length||(f=d.parent()),this.container=f,this.deferred=h,this.isAbsolute="absolute"==i,this.isAbsolute||g.css(U,"absolute"),ja&&(b=f.css(S),f.css(S,"hidden")),u?(d.addClass("k-fx-hidden"),f.addClass(this._containerClass()),f.one(u.event,a.proxy(this,"complete")),m.animationFrame(function(){d.removeClass("k-fx-hidden").addClass("k-fx-next"),e.css("display","").addClass("k-fx-current"),m.animationFrame(function(){f.removeClass("k-fx-start").addClass("k-fx-end")})})):this.complete(),h.promise()},stop:function(){this.complete()}});var ka=m.Class.extend({init:function(){var a=this;a._tickProxy=q(a._tick,a),a._started=!1},tick:a.noop,done:a.noop,onEnd:a.noop,onCancel:a.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,m.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var a=this;a._started&&(a.tick(),a.done()?(a._started=!1,a.onEnd()):m.animationFrame(a._tickProxy))}}),la=ka.extend({init:function(a){var b=this;p(b,a),ka.fn.init.call(b)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(a){var b=this,c=b.movable;b.initial=c[b.axis],b.delta=a.location-b.initial,b.duration="number"==typeof a.duration?a.duration:300,b.tick=b._easeProxy(a.ease),b.startDate=new Date,b.start()},_easeProxy:function(a){var b=this;return function(){b.movable.moveAxis(b.axis,a(b.timePassed(),b.initial,b.delta,b.duration))}}});p(la,{easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeOutBack:function(a,b,c,d,e){return e=1.70158,c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}}),n.Animation=ka,n.Transition=la,n.createEffect=j}(jQuery),function(a,b){function c(a){return"undefined"!=typeof a}function d(a,b,c){return Math.max(Math.min(parseInt(a,10),c===1/0?c:parseInt(c,10)),parseInt(b,10))}function e(a,b){return function(){var c=this,d=c.wrapper,e=d[0].style,f=c.options;if(!f.isMaximized&&!f.isMinimized)return c.restoreOptions={width:e.width,height:e.height},d.children(z).hide().end().children(x).find(U).parent().hide().eq(0).before(i.action({name:"Restore"})),b.call(c),"maximize"==a?c.wrapper.children(x).find(X).parent().hide():c.wrapper.children(x).find(X).parent().show(),c}}function f(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function g(a){this.owner=a,this._draggable=new m(a.wrapper,{filter:z,group:a.wrapper.id+"-resizing",dragstart:p(this.dragstart,this),drag:p(this.drag,this),dragend:p(this.dragend,this)})}function h(a,b){this.owner=a,this._draggable=new m(a.wrapper,{filter:b,group:a.wrapper.id+"-moving",dragstart:p(this.dragstart,this),drag:p(this.drag,this),dragend:p(this.dragend,this),dragcancel:p(this.dragcancel,this)}),this._draggable.userEvents.stopPropagation=!1}var i,j,k=window.joy,l=k.ui.Widget,m=k.ui.Draggable,n=a.isPlainObject,o=k._activeElement,p=a.proxy,q=a.extend,r=a.each,s=k.template,t="body",u=".joyWindow",v=".k-window",w=".k-window-title",x=w+"bar",y=".k-window-content",z=".k-resize-handle",A=".k-overlay",B="k-content-frame",C="k-loading",D="k-state-hover",E="k-state-focused",F="k-window-maximized",G=":visible",H="hidden",I="cursor",J="onOpen",K="onActivate",L="onDeactivate",M="onClose",N="onRefresh",O="onResize",P="onDragstart",Q="onDragend",R="onError",S="overflow",T="zIndex",U=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",V=".k-i-pin",W=".k-i-unpin",X=V+","+W,Y=".k-window-titlebar .k-window-action",Z=".k-window-titlebar .k-i-refresh",$=k.isLocalUrl;j=l.extend({init:function(d,e){var g,h,i,j,m,o,q,r=this,s={},t=!1,z=e&&e.actions&&!e.actions.length;l.fn.init.call(r,d,e),e=r.options,j=e.position,d=r.element,m=e.content,z&&(e.actions=[]),r.appendTo=a(e.appendTo),r._animations(),m&&!n(m)&&(m=e.content={url:m}),d.find("script").filter(f).remove(),d.parent().is(r.appendTo)||j.top!==b&&j.left!==b||(d.is(G)?(s=d.offset(),t=!0):(h=d.css("visibility"),i=d.css("display"),d.css({visibility:H,display:""}),s=d.offset(),d.css({visibility:h,display:i})),j.top===b&&(j.top=s.top),j.left===b&&(j.left=s.left)),c(e.visible)&&null!==e.visible||(e.visible=d.is(G)),g=r.wrapper=d.closest(v),d.is(".k-content")&&g[0]||(d.addClass("k-window-content k-content"),r._createWindow(d,e),g=r.wrapper=d.closest(v),r._dimensions()),r._position(),e.pinned&&r.pin(!0),m&&r.refresh(m),e.visible&&r.toFront(),o=g.children(y),r._tabindex(o),e.visible&&e.modal&&r._overlay(g.is(G)).css({opacity:.5}),g.on("mouseenter"+u,Y,p(r._buttonEnter,r)).on("mouseleave"+u,Y,p(r._buttonLeave,r)).on("click"+u,"> "+Y,p(r._windowActionHandler,r)),o.on("keydown"+u,p(r._keydown,r)).on("focus"+u,p(r._focus,r)).on("blur"+u,p(r._blur,r)),this._resizable(),this._draggable(),q=d.attr("id"),q&&(q+="_wnd_title",g.children(x).children(w).attr("id",q),o.attr({role:"dialog","aria-labelledby":q})),g.add(g.children(".k-resize-handle,"+x)).on("mousedown"+u,p(r.toFront,r)),r.wrapper.find(".joy-window-close").each(function(b,c){a(c).bind("click",function(a){r.close()})}),r.touchScroller=k.touchScroller(d),r._resizeHandler=p(r._onDocumentResize,r),a(window).on("resize",r._resizeHandler),e.visible&&(r.trigger(J),r.trigger(K)),k.notify(r),e.center&&a(g).ready(function(){r.center()})},_buttonEnter:function(){a(this).addClass(D)},_buttonLeave:function(){a(this).removeClass(D)},_focus:function(){this.wrapper.addClass(E)},_blur:function(){this.wrapper.removeClass(E)},_dimensions:function(){var a=this.wrapper,b=this.options,c=b.width,e=b.height,f=b.maxHeight,g=["minWidth","minHeight","maxWidth","maxHeight"];this.title(b.title);for(var h=0;h<g.length;h++){var i=b[g[h]];i&&i!=1/0&&a.css(g[h],i)}f&&f!=1/0&&this.element.css("maxHeight",f),c&&a.width(c.toString().indexOf("%")>0?c:d(c,b.minWidth,b.maxWidth)),e&&a.height(e.toString().indexOf("%")>0?e:d(e,b.minHeight,b.maxHeight)),b.visible||a.hide()},_position:function(){var a=this.wrapper,b=this.options.position;0===b.top&&(b.top=b.top.toString()),0===b.left&&(b.left=b.left.toString()),a.css({top:b.top||"",left:b.left||""})},_animations:function(){var a=this.options;a.animation===!1&&(a.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){k.resize(this.element.children())},_resizable:function(){var b=this.options.resizable,c=this.wrapper;this.resizing&&(c.off("dblclick"+u).children(z).remove(),this.resizing.destroy(),this.resizing=null),b&&(c.on("dblclick"+u,x,p(function(b){a(b.target).closest(".k-window-action").length||this.toggleMaximization()},this)),r("n e s w se sw ne nw".split(" "),function(a,b){c.append(i.resizeHandle(b))}),this.resizing=new g(this)),c=null},_draggable:function(){var a=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),a&&(this.dragging=new h(this,a.dragHandle||x))},setOptions:function(a){l.fn.setOptions.call(this,a),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable()},events:[J,K,L,M,N,O,P,Q,R],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",icon:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!1,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:!1,height:null,width:null,appendTo:"body",center:!0,parentId:null},_closable:function(){return a.inArray("close",a.map(this.options.actions,function(a){return a.toLowerCase()}))>-1},_keydown:function(a){var b,c,e,f,g,h,i=this,j=i.options,l=k.keys,m=a.keyCode,n=i.wrapper,o=10,p=i.options.isMaximized;a.target!=a.currentTarget||i._closing||(m==l.ESC&&i._closable()&&i._close(!1),!j.draggable||a.ctrlKey||p||(b=k.getOffset(n),m==l.UP?c=n.css("top",b.top-o):m==l.DOWN?c=n.css("top",b.top+o):m==l.LEFT?c=n.css("left",b.left-o):m==l.RIGHT&&(c=n.css("left",b.left+o))),j.resizable&&a.ctrlKey&&!p&&(m==l.UP?(c=!0,f=n.height()-o):m==l.DOWN&&(c=!0,f=n.height()+o),m==l.LEFT?(c=!0,e=n.width()-o):m==l.RIGHT&&(c=!0,e=n.width()+o),c&&(g=d(e,j.minWidth,j.maxWidth),h=d(f,j.minHeight,j.maxHeight),isNaN(g)||(n.width(g),i.options.width=g+"px"),isNaN(h)||(n.height(h),i.options.height=h+"px"),i.resize())),c&&a.preventDefault())},_overlay:function(b){var c=this.appendTo.children(A),d=this.wrapper;return c.length||(c=a("<div class='k-overlay' />")),c.insertBefore(d[0]).toggle(b).css(T,parseInt(d.css(T),10)-1),c},_actionForIcon:function(a){var b=/\bk-i-\w+\b/.exec(a[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[b]},_windowActionHandler:function(b){if(!this._closing){var c=a(b.target).closest(".k-window-action").find(".k-icon"),d=this._actionForIcon(c);return d?(b.preventDefault(),this[d](),!1):void 0}},_modals:function(){var b=this,c=a(v).filter(function(){var c=a(this),d=b._object(c),e=d&&d.options;return e&&e.modal&&e.visible&&c.is(G)}).sort(function(b,c){return+a(b).css("zIndex")-+a(c).css("zIndex")});return b=null,c},_object:function(a){var b=a.children(y);return b.data("joyWindow")||b.data("joy"+this.options.name)},center:function(){var b,c,d=this,e=d.options.position,f=d.wrapper,g=a(window),h=0,i=0;return d.options.isMaximized?d:(d.options.pinned||(h=g.scrollTop(),i=g.scrollLeft()),c=i+Math.max(0,(g.width()-f.width())/2),b=h+Math.max(0,(g.height()-f.height())/2),f.css({left:c,top:b}),e.top=b,e.left=c,d)},title:function(a){var b=this,c=b.wrapper,d=b.options,e=c.children(x),f=e.children(w),g=e.outerHeight();return arguments.length?(a===!1?(c.addClass("k-window-titleless"),e.remove()):(e.length||c.prepend(i.titlebar(q(i,d))),c.css("padding-top",g),e.css("margin-top",-g)),f.text(a),b.options.title=a,b):f.text()},content:function(a){var b=this.wrapper.children(y),d=b.children(".km-scroll-container");return b=d[0]?d:b,c(a)?(k.destroy(this.element.children()),b.empty().html(a),this):b.html()},open:function(){var b,c=this,d=c.wrapper,e=c.options,f=e.animation.open,g=d.children(y);if(!c.trigger(J)){if(c._closing&&d.joyStop(!0,!0),c._closing=!1,c.toFront(),e.autoFocus&&c.element.focus(),e.visible=!0,e.modal){if(b=c._overlay(!1),b.joyStop(!0,!0),f.duration&&k.effects.Fade){var h=k.fx(b).fadeIn();h.duration(f.duration||0),h.endValue(.5),h.play()}else b.css("opacity",.5);b.show()}d.is(G)||(g.css(S,H),d.show().joyStop().joyAnimate({effects:f.effects,duration:f.duration,complete:p(this._activate,this)}))}return e.isMaximized&&(c._documentScrollTop=a(document).scrollTop(),a("html, body").css(S,H)),c},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(K),this.wrapper.children(y).css(S,"")},_removeOverlay:function(c){var d=this._modals(),e=this.options,f=e.modal&&!d.length,g=e.modal?this._overlay(!0):a(b),h=e.animation.close;if(f)if(!c&&h.duration&&k.effects.Fade){var i=k.fx(g).fadeOut();i.duration(h.duration||0),i.startValue(.5),i.play()}else this._overlay(!1).remove();else d.length&&this._object(d.last())._overlay(!0)},_close:function(b){var c=this,d=c.wrapper,e=c.options,f=e.animation.open,g=e.animation.close;d.is(G)&&!c.trigger(M,{userTriggered:!b})&&(c._closing=!0,e.visible=!1,a(v).each(function(b,c){var e=a(c).children(y);c!=d&&e.find("> ."+B).length>0&&e.children(A).remove()}),this._removeOverlay(),d.joyStop().joyAnimate({effects:g.effects||f.effects,reverse:g.reverse===!0,duration:g.duration,complete:p(this._deactivate,this)})),c.options.isMaximized&&(a("html, body").css(S,""),c._documentScrollTop&&c._documentScrollTop>0&&a(document).scrollTop(c._documentScrollTop))},_deactivate:function(){this.wrapper.hide().css("opacity",""),this.trigger(L);var a=this._object(this._modals().last());a&&a.toFront()},close:function(){return this._close(!0),this},_actionable:function(b){return a(b).is(Y+","+Y+" .k-icon,:input,a")},_shouldFocus:function(b){var c=o(),d=this.element;return!(!this.options.autoFocus||a(c).is(d)||this._actionable(b)||d.find(c).length&&d.find(b).length)},toFront:function(b){var c=this,d=c.wrapper,e=d[0],f=+d.css(T),g=f,h=b&&b.target||null;if(a(v).each(function(b,c){var d=a(c),g=d.css(T),h=d.children(y);isNaN(g)||(f=Math.max(+g,f)),c!=e&&h.find("> ."+B).length>0&&h.append(i.overlay)}),(!d[0].style.zIndex||f>g)&&d.css(T,f+2),c.element.find("> .k-overlay").remove(),c._shouldFocus(h)){c.element.focus();var j=a(window).scrollTop(),k=parseInt(d.position().top,10);k>0&&j>k&&(j>0?a(window).scrollTop(k):d.css("top",j))}return d=null,c},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var b=this,c=b.options,d=c.minHeight,e=b.restoreOptions;return c.isMaximized||c.isMinimized?(d&&d!=1/0&&b.wrapper.css("min-height",d),b.wrapper.css({position:c.pinned?"fixed":"absolute",left:e.left,top:e.top,width:e.width,height:e.height}).removeClass(F).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(U).parent().show().end().end().find(X).parent().show(),b.options.width=e.width,b.options.height=e.height,a("html, body").css(S,""),this._documentScrollTop&&this._documentScrollTop>0&&a(document).scrollTop(this._documentScrollTop),c.isMaximized=c.isMinimized=!1,b.resize(),b):b},maximize:e("maximize",function(){var b=this,c=b.wrapper,d=c.position();q(b.restoreOptions,{left:d.left,top:d.top}),c.css({left:0,top:0,position:"fixed"}).addClass(F),this._documentScrollTop=a(document).scrollTop(),a("html, body").css(S,H),b.options.isMaximized=!0,b._onDocumentResize()}),minimize:e("minimize",function(){var a=this;a.wrapper.css({height:"",minHeight:""}),a.element.hide(),a.options.isMinimized=!0}),pin:function(b){var c=this,d=a(window),e=c.wrapper,f=parseInt(e.css("top"),10),g=parseInt(e.css("left"),10);(b||!c.options.pinned&&!c.options.isMaximized)&&(e.css({position:"fixed",top:f-d.scrollTop(),left:g-d.scrollLeft()}),e.children(x).find(V).addClass("k-i-unpin").removeClass("k-i-pin"),c.options.pinned=!0)},unpin:function(){var b=this,c=a(window),d=b.wrapper,e=parseInt(d.css("top"),10),f=parseInt(d.css("left"),10);b.options.pinned&&!b.options.isMaximized&&(d.css({position:"",top:e+c.scrollTop(),left:f+c.scrollLeft()}),d.children(x).find(W).addClass("k-i-pin").removeClass("k-i-unpin"),b.options.pinned=!1)},_onDocumentResize:function(){var b,c,d=this,e=d.wrapper,f=a(window);d.options.isMaximized&&(b=f.width(),c=f.height()-parseInt(e.css("padding-top"),10),e.css({width:b,height:c}),d.options.width=b,d.options.height=c,d.resize())},refresh:function(b){var d,e,f,g=this,h=g.options,j=a(g.element);return n(b)||(b={url:b}),b=q({},h.content,b),e=c(h.iframe)?h.iframe:b.iframe,f=b.url,f?(c(e)||(e=!$(f)),e?(d=j.find("."+B)[0],d?d.src=f||d.src:j.html(i.contentFrame(q({},h,{content:b}))),j.find("."+B).unbind("load"+u).on("load"+u,p(this._triggerRefresh,this))):g._ajaxRequest(b)):(b.template&&g.content(s(b.template)({})),g.trigger(N)),j.toggleClass("k-window-iframecontent",e),g},_triggerRefresh:function(){this.trigger(N)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Z).removeClass(C)},_ajaxError:function(a,b){this.trigger(R,{status:b,xhr:a})},_ajaxSuccess:function(a){return function(b){a&&(b=s(a)(b||{})),this.content(b),this.element.prop("scrollTop",0),this.trigger(N)}},_showLoading:function(){this.wrapper.find(Z).addClass(C)},_ajaxRequest:function(b){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),a.ajax(q({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(b.template),this)},b))},destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(u).children(y).off(u).end().find(".k-resize-handle,.k-window-titlebar").off(u),a(window).off("resize",this._resizeHandler),clearTimeout(this._loadingIconTimeout),l.fn.destroy.call(this),this.unbind(b),k.destroy(this.wrapper),this._removeOverlay(!0),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=a()},_createWindow:function(){var b,c,d=this.element,e=this.options,f=k.support.isRtl(d);e.scrollable===!1&&d.attr("style","overflow:hidden;"),c=a(i.wrapper(e)),e.title!==!1&&(c.append(i.titlebar(q(i,e))),d.each(function(a,b){"DIV"==b.tagName&&""!=b.title&&(b.title="")})),b=d.find("iframe:not(.k-content)").map(function(){var a=this.getAttribute("src");return this.src="",a}),c.toggleClass("k-rtl",f).appendTo(this.appendTo).append(d).find("iframe:not(.k-content)").each(function(a){this.src=b[a]}),c.find(".k-window-title").css(f?"left":"right",c.find(".k-window-actions").outerWidth()+10),d.show(),d.find("[data-role=editor]").each(function(){var b=a(this).data("joyEditor");b&&b.refresh()}),c=d=null}}),i={wrapper:s("<div class='k-widget k-window' />"),action:s("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:s("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions'># for (var i = 0; i < actions.length; i++) { ##= action({ name: actions[i] }) ## } #</div></div>"),overlay:"<div class='k-overlay' />",contentFrame:s("<iframe frameborder='0' title='#= title #' class='"+B+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:s("<div class='k-resize-handle k-resize-#= data #'></div>")},g.prototype={dragstart:function(b){var c=this.owner,d=c.wrapper;this.elementPadding=parseInt(c.wrapper.css("padding-top"),10),this.initialCursorPosition=k.getOffset(d,"position"),this.resizeDirection=b.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),this.initialSize={width:d.width(),height:d.height()},this.containerOffset=k.getOffset(c.appendTo),d.append(i.overlay).children(z).not(b.currentTarget).hide(),a(t).css(I,b.currentTarget.css(I))},drag:function(a){var b,c,e,f,g=this,h=g.owner,i=h.wrapper,j=h.options,k=g.resizeDirection,l=g.containerOffset,m=g.initialCursorPosition,n=g.initialSize,o=Math.max(a.x.location,l.left),p=Math.max(a.y.location,l.top);k.indexOf("e")>=0?(b=o-m.left,i.width(d(b,j.minWidth,j.maxWidth))):k.indexOf("w")>=0&&(f=m.left+n.width,b=d(f-o,j.minWidth,j.maxWidth),i.css({left:f-b-l.left,width:b})),k.indexOf("s")>=0?(c=p-m.top-g.elementPadding,i.height(d(c,j.minHeight,j.maxHeight))):k.indexOf("n")>=0&&(e=m.top+n.height,c=d(e-p,j.minHeight,j.maxHeight),i.css({top:e-c-l.top,height:c})),b&&(h.options.width=b+"px"),c&&(h.options.height=c+"px"),h.resize()},dragend:function(b){var c=this,d=c.owner,e=d.wrapper;return e.find(A).remove().end().children(z).not(b.currentTarget).show(),a(t).css(I,""),d.touchScroller&&d.touchScroller.reset(),27==b.keyCode&&e.css(c.initialCursorPosition).css(c.initialSize),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},h.prototype={dragstart:function(b){var c=this.owner,d=c.element,e=d.find(".k-window-actions"),f=k.getOffset(c.appendTo);c.trigger(P),c.initialWindowPosition=k.getOffset(c.wrapper,"position"),c.startPosition={left:b.x.client-c.initialWindowPosition.left,top:b.y.client-c.initialWindowPosition.top},c.minLeftPosition=e.length>0?e.outerWidth()+parseInt(e.css("right"),10)-d.outerWidth():20-d.outerWidth(),c.minLeftPosition-=f.left,c.minTopPosition=-f.top,c.wrapper.append(i.overlay).children(z).hide(),a(t).css(I,b.currentTarget.css(I))},drag:function(b){var c=this.owner,d=c.options.position,e=Math.max(b.y.client-c.startPosition.top,c.minTopPosition),f=Math.max(b.x.client-c.startPosition.left,c.minLeftPosition),g={left:f,top:e};a(c.wrapper).css(g),d.top=e,d.left=f},_finishDrag:function(){var b=this.owner;b.wrapper.children(z).toggle(!b.options.isMinimized).end().find(A).remove(),a(t).css(I,"")},dragcancel:function(a){this._finishDrag(),a.currentTarget.closest(v).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(Q),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},k.ui.plugin(j)}(window.joy.jQuery),function(a,b){var c=window.joy,d=c.ui.Widget,e=a.proxy,f=a.extend,g=window.setTimeout,h="click",i="show",j="hide",k="k-notification",l=".k-notification-wrap .k-i-close",m="info",n="success",o="warning",p="error",q="top",r="left",s="bottom",t="right",u="up",v=".joyNotification",w='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',y=d.extend({init:function(b,e){var f=this;d.fn.init.call(f,b,e),e=f.options,e.appendTo&&a(e.appendTo).is(b)||f.element.hide(),f._compileTemplates(e.templates),f._guid="_"+c.guid(),f._isRtl=c.support.isRtl(b),f._compileStacking(e.stacking,e.position.top),c.notify(f)},events:[i,j],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(b){var d=this,e=c.template;d._compiled={},a.each(b,function(b,c){d._compiled[c.type]=e(c.template||a("#"+c.templateId).html())}),d._defaultCompiled=e(x)},_getCompiled:function(a){var b=this,c=b._defaultCompiled;return a?b._compiled[a]||c:c},_compileStacking:function(a,b){var c,d,e=this,f={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(a){case"down":c=s+" "+r,d=q+" "+r,delete f.paddingBottom;break;case t:c=q+" "+t,d=q+" "+r,delete f.paddingRight;break;case r:c=q+" "+r,d=q+" "+t,delete f.paddingLeft;break;case u:c=q+" "+r,d=s+" "+r,delete f.paddingTop;break;default:null!==b?(c=s+" "+r,d=q+" "+r,delete f.paddingBottom):(c=q+" "+r,d=s+" "+r,delete f.paddingTop)}e._popupOrigin=c,e._popupPosition=d,e._popupPaddings=f},_attachPopupEvents:function(a,b){function c(a){a.on(h+v,function(){b.close()})}var d,e=a.allowHideAfter,f=!isNaN(e)&&e>0;a.hideOnClick?b.bind("activate",function(a){f?g(function(){c(b.element)},e):c(b.element)}):a.button&&(d=b.element.find(l),f?g(function(){c(d)},e):c(d))},_showPopup:function(b,d){{var e,h,i=this,k=d.autoHideAfter,m=d.position.left,n=d.position.top;d.allowHideAfter}h=a("."+i._guid).last(),e=new c.ui.Popup(b,{anchor:h[0]?h:document.body,origin:i._popupOrigin,position:i._popupPosition,animation:d.animation,modal:!0,collision:"",isRtl:i._isRtl,close:function(a){i.trigger(j,{element:this.element})},deactivate:function(a){a.sender.element.off(v),a.sender.element.find(l).off(v),a.sender.destroy()}}),i._attachPopupEvents(d,e),h[0]?e.open():(null===m&&(m=a(window).width()-b.width()-d.position.right),null===n&&(n=a(window).height()-b.height()-d.position.bottom),e.open(m,n)),e.wrapper.addClass(i._guid).css(f({margin:0},i._popupPaddings)),d.position.pinned?(e.wrapper.css("position","fixed"),h[0]&&i._togglePin(e.wrapper,!0)):h[0]||i._togglePin(e.wrapper,!1),k>0&&g(function(){e.close()},k)},_togglePin:function(b,c){var d=a(window),e=c?-1:1;b.css({top:parseInt(b.css(q),10)+e*d.scrollTop(),left:parseInt(b.css(r),10)+e*d.scrollLeft()})},_attachStaticEvents:function(a,b){function c(a){a.on(h+v,e(d._hideStatic,d,b))}var d=this,f=a.allowHideAfter,i=!isNaN(f)&&f>0;a.hideOnClick?i?g(function(){c(b)},f):c(b):a.button&&(i?g(function(){c(b.find(l))},f):c(b.find(l)))},_showStatic:function(a,b){var c=this,d=b.autoHideAfter,e=b.animation,f=b.stacking==u||b.stacking==r?"prependTo":"appendTo";a.addClass(c._guid)[f](b.appendTo).hide().joyAnimate(e.open),c._attachStaticEvents(b,a),d>0&&g(function(){c._hideStatic(a)},d)},_hideStatic:function(a){a.joyAnimate(f(this.options.animation.close,{complete:function(){a.off(v).find(l).off(v),a.remove()}})),this.trigger(j,{element:a})},show:function(d,e){var g,h,j=this,l=j.options,n=a(w);return e||(e=m),null!==d&&d!==b&&""!==d&&(c.isFunction(d)&&(d=d()),h={typeIcon:e,content:""},g=a.isPlainObject(d)?f(h,d):f(h,{content:d}),n.addClass(k+"-"+e).toggleClass(k+"-button",l.button).css({width:l.width,height:l.height}).append(j._getCompiled(e)(g)),a(l.appendTo)[0]?j._showStatic(n,l):j._showPopup(n,l),j.trigger(i,{element:n})),j},info:function(a){return this.show(a,m)},success:function(a){return this.show(a,n)},warning:function(a){return this.show(a,o)},error:function(a){return this.show(a,p)},hide:function(){var b=this,c=b.getNotifications();return c.each(b.options.appendTo?function(c,d){b._hideStatic(a(d))}:function(b,c){var d=a(c).data("joyPopup");d&&d.close()}),b},getNotifications:function(){var b=this,c=a("."+b._guid);return b.options.appendTo?c:c.children("."+k)},setOptions:function(a){var c,e=this;d.fn.setOptions.call(e,a),c=e.options,a.templates!==b&&e._compileTemplates(c.templates),(a.stacking!==b||a.position!==b)&&e._compileStacking(c.stacking,c.position.top)},destroy:function(){d.fn.destroy.call(this),this.getNotifications().off(v).find(l).off(v)}});c.ui.plugin(y)}(window.joy.jQuery),joy.showMessage=function(a,b){var c=$("<span style='z-index:99999999'></span>"),d=function(a){if(!$("."+a.sender._guid)[1]){var b,c,d=a.element.parent(),e=d.width(),f=d.height(),g=$(window).width(),h=$(window).height();c=Math.floor(g/2-e/2),b=Math.floor(3*h/4-f/2),a.element.parent().css("z-index","9999999"),a.element.parent().css({top:b,left:c})}},e=c.joyNotification({stacking:"down",show:d,autoHideAfter:2500,button:!0}).data("joyNotification");e.show(a,b)},joy.showMessageDialog=function(a,b,c){var d,e=$("<span id='confirmWindow'></span>"),f=e,g=$.extend,h=$.isPlainObject,i=joy.getPluginLang(),j='<a class="k-button k-button-icontext #=className#" name="#=btnName#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',k=i.message.dialogTitle,l={ok:{name:"ok",text:i.message.okCommand,imageClass:"k-ok",className:"k-message-ok",iconClass:"k-icon"},cancel:{name:"cancel",text:i.message.cancelCommand,imageClass:"k-cancel",className:"k-message-cancel",iconClass:"k-icon"},yes:{name:"yes",text:i.message.yesCommand,imageClass:"k-update",className:"k-message-yes",iconClass:"k-icon"},no:{name:"no",text:i.message.noCommand,imageClass:"k-delete",className:"k-message-no",iconClass:"k-icon"}},m=function(a){var b,c=" ";if(a){if(typeof a===STRING)return a;for(b in a)c+=b+'="'+a[b]+'"'}return c},n=function(a,b,c){var e='<div class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container"><div class="k-window-content">'+b+"</div>";e+='<div class="k-edit-buttons k-state-default">';var g=new Array;g=c.split(","),$.each(g,function(a,b){e+=o({name:b})}),e+="</div></div></div>",d=$(e).joyWindow({modal:!0,resizable:!1,draggable:!0,title:a,visible:!1,close:function(a){return a.userTriggered&&(a.sender.element.focus(),f.trigger("cancel",{container:d,model:c}))?void a.preventDefault():void 0}}),d.data("joyWindow").center().open()},o=function(a){var b=a.template||j,c="string"==typeof a?a:a.name||a.text,d=l[c]?l[c].className:"k-grid-"+(c||"").replace(/\s/g,""),e={className:d,btnName:a.name,text:c,imageClass:"",attr:"",iconClass:""};if(!(c||h(a)&&a.template))throw new Error("Custom commands should have name specified");h(a)?(a.className&&(a.className+=" "+e.className),"edit"===c&&h(a.text)&&(a=g(!0,{},a),a.text=a.text.edit),a.attr&&h(a.attr)&&(a.attr=m(a.attr)),e=g(!0,e,l[c],a)):e=g(!0,e,l[c]);var f=joy.template(b)(e);return f};n(k,a,b),$(d).on("click","a.k-button-icontext",function(a){a.preventDefault(),a.stopPropagation();var b=function(){c({container:d,btnName:a.currentTarget.name})};d.data("joyWindow").bind("onDeactivate",b).close()})};