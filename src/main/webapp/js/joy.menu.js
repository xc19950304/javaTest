/*! by joyone.cn 厦门展网信息技术有限公司  joyone 2015-04-30  1.0.20 */
!function(a,b){function c(a,b){return a=a.split(" ")[!b+0]||a,a.replace("top","up").replace("bottom","down")}function d(a,b,c){a=a.split(" ")[!b+0]||a;var d={origin:["bottom",c?"right":"left"],position:["top",c?"right":"left"]},e=/left|right/.test(a);return e?(d.origin=["top",a],d.position[1]=j.directions[a].reverse):(d.origin[0]=a,d.position[0]=j.directions[a].reverse),d.origin=d.origin.join(" "),d.position=d.position.join(" "),d}function e(b,c){try{return a.contains(b,c)}catch(d){return!1}}function f(b){b=a(b),b.addClass("k-item").children(x).addClass(F),b.children("a").addClass(A).children(x).addClass(F),b.filter(":not([disabled])").addClass(R),b.filter(".k-separator:empty").append("&nbsp;"),b.filter("li[disabled]").addClass(U).removeAttr("disabled").attr("aria-disabled",!0),b.filter("[role]").length||b.attr("role","menuitem"),b.children("."+A).length||b.contents().filter(function(){return!(this.nodeName.match(v)||3==this.nodeType&&!a.trim(this.nodeValue))}).wrapAll("<span class='"+A+"'/>"),g(b),h(b)}function g(b){b=a(b),b.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),b.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var b=a(this),c=b.parent().parent();b.append("<span class='k-icon "+(c.hasClass(z+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function h(b){b=a(b),b.filter(".k-first:not(:first-child)").removeClass(E),b.filter(".k-last:not(:last-child)").removeClass(B),b.filter(":first-child").addClass(E),b.filter(":last-child").addClass(B)}var i,j=window.joy,k=j.ui,l=j._activeElement,m=j.support.touch&&j.support.mobileOS,n="mousedown",o="click",p=a.extend,q=a.proxy,r=a.each,s=j.template,t=j.keys,u=k.Widget,v=/^(ul|a|div)$/i,w=".joyMenu",x="img",y="open",z="k-menu",A="k-link",B="k-last",C="close",D="timer",E="k-first",F="k-image",G="select",H="zIndex",I="activate",J="deactivate",K="touchstart"+w+" MSPointerDown"+w+" pointerdown"+w,L=j.support.pointers,M=j.support.msPointers,N=L?"pointerover":M?"MSPointerOver":"mouseenter",O=L?"pointerout":M?"MSPointerOut":"mouseleave",P=m||M||L,Q="joyPopup",R="k-state-default",S="k-state-hover",T="k-state-focused",U="k-state-disabled",V=".k-group",W=V+",.k-animation-container",X=":not(.k-list) > .k-item",Y=".k-item.k-state-disabled",Z=".k-item:not(.k-state-disabled)",$=".k-item:not(.k-state-disabled) > .k-link",_=":not(.k-item.k-separator)",aa=_+":eq(0)",ba=_+":last",ca="div:not(.k-animation-container,.k-list-container)",da={content:s("<div class='k-content k-group' tabindex='-1'>#= content(item) #</div>"),group:s("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:s("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:s("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:s("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:s("<span class='#= arrowClass(item, group) #'></span>"),sprite:s("<span class='k-sprite #= spriteCssClass #'></span>"),empty:s("")},ea={wrapperCssClass:function(a,b){var c="k-item",d=b.index;return c+=b.enabled===!1?" k-state-disabled":" k-state-default",a.firstLevel&&0===d&&(c+=" k-first"),d==a.length-1&&(c+=" k-last"),b.cssClass&&(c+=" "+b.cssClass),c},textClass:function(){return A},textAttributes:function(a){return a.url?" href='"+a.url+"'":""},arrowClass:function(a,b){var c="k-icon";return c+=b.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(a){return a.encoded===!1?a.text:j.htmlEncode(a.text)},tag:function(a){return a.url?"a":"span"},groupAttributes:function(a){return a.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group"},content:function(a){return a.content?a.content:"&nbsp;"}};i=u.extend({init:function(b,c){var d=this;u.fn.init.call(d,b,c),b=d.wrapper=d.element,c=d.options,d._initData(c),d._updateClasses(),d._animations(c),d.nextItemZIndex=100,d._tabindex(),d._focusProxy=q(d._focusHandler,d),b.on(K,d._focusProxy).on(o+w,Y,!1).on(o+w,Z,q(d._click,d)).on("keydown"+w,q(d._keydown,d)).on("focus"+w,q(d._focus,d)).on("focus"+w,".k-content",q(d._focus,d)).on(K+" "+n+w,".k-content",q(d._preventClose,d)).on("blur"+w,q(d._removeHoverItem,d)).on("blur"+w,"[tabindex]",q(d._checkActiveElement,d)).on(N+w,Z,q(d._mouseenter,d)).on(O+w,Z,q(d._mouseleave,d)).on(N+w+" "+O+w+" "+n+w+" "+o+w,$,q(d._toggleHover,d)),c.openOnClick&&(d.clicked=!1,d._documentClickHandler=q(d._documentClick,d),a(document).click(d._documentClickHandler)),b.attr("role","menubar"),b[0].id&&(d._ariaId=j.format("{0}_mn_active",b[0].id)),j.notify(d)},events:[y,C,I,J,G],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,dataSource:{},hoverDelay:100},_initData:function(a){var b=this;a.dataSource&&(b.element.empty(),b.append(a.dataSource,b.element))},setOptions:function(a){var b=this.options.animation;this._animations(a),a.animation=p(!0,b,a.animation),"dataSource"in a&&this._initData(a),u.fn.setOptions.call(this,a)},destroy:function(){var b=this;u.fn.destroy.call(b),b.element.off(w),b._documentClickHandler&&a(document).unbind("click",b._documentClickHandler),j.destroy(b.element)},enable:function(a,b){return this._toggleDisabled(a,b!==!1),this},disable:function(a){return this._toggleDisabled(a,!1),this},append:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.length?b.find("> .k-group, > .k-animation-container > .k-group"):null);return r(c.items,function(){c.group.append(this),g(this)}),g(b),h(c.group.find(".k-first, .k-last").add(c.items)),this},insertBefore:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.parent());return r(c.items,function(){b.before(this),g(this),h(this)}),h(b),this},insertAfter:function(a,b){b=this.element.find(b);var c=this._insert(a,b,b.parent());return r(c.items,function(){b.after(this),g(this),h(this)}),h(b),this},_insert:function(b,c,d){var e,g,h=this;c&&c.length||(d=h.element);var j=a.isPlainObject(b),k={firstLevel:d.hasClass(z),horizontal:d.hasClass(z+"-horizontal"),expanded:!0,length:d.children().length};return c&&!d.length&&(d=a(i.renderGroup({group:k})).appendTo(c)),j||a.isArray(b)?e=a(a.map(j?[b]:b,function(b,c){return"string"==typeof b?a(b).get():a(i.renderItem({group:k,item:p(b,{index:c})})).get()})):(e="string"==typeof b&&"<"!=b[0]?h.element.find(b):a(b),g=e.find("> ul").addClass("k-group").attr("role","menu"),e=e.filter("li"),e.add(g.find("> li")).each(function(){f(this)})),{items:e,group:d}},remove:function(a){a=this.element.find(a);var b=this,c=a.parentsUntil(b.element,X),d=a.parent("ul:not(.k-menu)");if(a.remove(),d&&!d.children(X).length){var e=d.parent(".k-animation-container");e.length?e.remove():d.remove()}return c.length&&(c=c.eq(0),g(c),h(c)),b},open:function(e){var f=this,g=f.options,h="horizontal"==g.orientation,i=g.direction,k=j.support.isRtl(f.wrapper);return e=f.element.find(e),/^(top|bottom|default)$/.test(i)&&(i=k?h?(i+" left").replace("default","bottom"):"left":h?(i+" right").replace("default","bottom"):"right"),e.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var b=a(this).data("joyPopup");b&&b.close()}),e.each(function(){var e=a(this);clearTimeout(e.data(D)),e.data(D,setTimeout(function(){var l,m=e.find(".k-group:first:hidden");if(m[0]&&f.trigger(y,{item:e[0]})===!1){if(!m.find(".k-group")[0]&&m.children(".k-item").length>1){var n=a(window).height(),o=function(){m.css({maxHeight:n-(m.outerHeight()-m.height())-j.getShadows(m).bottom,overflow:"auto"})};j.support.browser.msie&&j.support.browser.version<=7?setTimeout(o,0):o()}else m.css({maxHeight:"",overflow:""});e.data(H,e.css(H)),e.css(H,f.nextItemZIndex++),l=m.data(Q);var q=e.parent().hasClass(z),r=q&&h,s=d(i,q,k),t=g.animation.open.effects,u=t!==b?t:"slideIn:"+c(i,q);l?(l=m.data(Q),l.options.origin=s.origin,l.options.position=s.position,l.options.animation.open.effects=u):l=m.joyPopup({activate:function(){f.trigger(I,{item:this.wrapper.parent()})},deactivate:function(){f.trigger(J,{item:this.wrapper.parent()})},origin:s.origin,position:s.position,collision:g.popupCollision!==b?g.popupCollision:r?"fit":"fit flip",anchor:e,appendTo:e,animation:{open:p(!0,{effects:u},g.animation.open),close:g.animation.close},close:function(a){var b=a.sender.wrapper.parent();f.trigger(C,{item:b[0]})?a.preventDefault():(b.css(H,b.data(H)),b.removeData(H),P&&(b.removeClass(S),f._removeHoverItem()))}}).data(Q),m.removeAttr("aria-hidden"),l.open()}},f.options.hoverDelay))}),f},close:function(b,c){var d=this,e=d.element;return b=e.find(b),b.length||(b=e.find(">.k-item")),b.each(function(){var b=a(this);!c&&d._isRootItem(b)&&(d.clicked=!1),clearTimeout(b.data(D)),b.data(D,setTimeout(function(){var a=b.find(".k-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(Q);a&&(a.close(),a.element.attr("aria-hidden",!0))},d.options.hoverDelay))}),d},_toggleDisabled:function(b,c){this.element.find(b).each(function(){a(this).toggleClass(R,c).toggleClass(U,!c).attr("aria-disabled",!c)})},_toggleHover:function(b){var c=a(j.eventTarget(b)||b.target).closest(X),d=b.type==N||-1!==n.indexOf(b.type);c.parents("li."+U).length||c.toggleClass(S,d||"mousedown"==b.type||"click"==b.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(b){var c=this,d=a(b?b.currentTarget:this._hoverItem()),f=c._findRootParent(d)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!e(f,j._activeElement())&&b&&!e(f,b.currentTarget))&&c.close(f)},0),this._closurePrevented=!1},_removeHoverItem:function(){var a=this._hoverItem();a&&a.hasClass(T)&&(a.removeClass(T),this._oldHoverItem=null)},_updateClasses:function(){var a,b=this.element;b.addClass("k-widget k-reset k-header "+z).addClass(z+"-"+this.options.orientation),b.find("li > ul").addClass("k-group").attr("role","menu").attr("aria-hidden",b.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),a=b.find("> li,.k-group > li"),a.each(function(){f(this)})},_mouseenter:function(b){var c=this,d=a(b.currentTarget),f=d.children(".k-animation-container").length||d.children(V).length;b.delegateTarget==d.parents(".k-menu")[0]&&(c.options.openOnClick&&!c.clicked||m||!e(b.currentTarget,b.relatedTarget)&&f&&c.open(d),(c.options.openOnClick&&c.clicked||P)&&d.siblings().each(q(function(a,b){c.close(b,!0)},c)))},_mouseleave:function(b){var c=this,d=a(b.currentTarget),f=d.children(".k-animation-container").length||d.children(V).length;return d.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?void b.stopImmediatePropagation():void(c.options.openOnClick||m||(L||M)&&b.originalEvent.pointerType==b.originalEvent.MSPOINTER_TYPE_TOUCH||e(b.currentTarget,b.relatedTarget||b.target)||!f||c.close(d))},_click:function(b){var c,d,e,f=this,g=f.options,h=a(j.eventTarget(b)),i=h[0]?h[0].nodeName.toUpperCase():"",k="INPUT"==i||"SELECT"==i||"BUTTON"==i||"LABEL"==i,l=h.closest("."+A),m=h.closest(X),n=l.attr("href"),o=!!n&&n!==a("<a href='#' />").attr("href");if(g.openOnClick||!m.children(ca)[0]){if(m.hasClass(U))return void b.preventDefault();if(b.handled||!f.trigger(G,{item:m[0]})||k||b.preventDefault(),b.handled=!0,d=m.children(W),e=d.is(":visible"),g.closeOnClick&&!o&&(!d.length||g.openOnClick&&e))return m.removeClass(S).css("height"),f._oldHoverItem=f._findRootParent(m),f.close(l.parentsUntil(f.element,X)),f.clicked=!1,void(-1!="MSPointerUp".indexOf(b.type)&&b.preventDefault());o&&b.enterKey&&l[0].click(),(m.parent().hasClass(z)&&g.openOnClick||j.support.touch)&&(o||k||b.preventDefault(),f.clicked=!0,c=d.is(":visible")?C:y,(g.closeOnClick||c!=C)&&f[c](m))}},_documentClick:function(a){e(this.element[0],a.target)||(this.clicked=!1)},_focus:function(b){var c=this,d=b.target,e=c._hoverItem(),f=l();return d==c.wrapper[0]||a(d).is(":joyFocusable")?void(f===b.currentTarget&&(e.length?c._moveHover([],e):c._oldHoverItem||c._moveHover([],c.wrapper.children().first()))):(b.stopPropagation(),a(d).closest(".k-content").closest(".k-group").closest(".k-item").addClass(T),void c.wrapper.focus())},_keydown:function(a){var b,c,d,e=this,f=a.keyCode,g=e._oldHoverItem,h=j.support.isRtl(e.wrapper);if(a.target==a.currentTarget||f==t.ESC){if(g||(g=e._oldHoverItem=e._hoverItem()),c=e._itemBelongsToVertival(g),d=e._itemHasChildren(g),f==t.RIGHT)b=e[h?"_itemLeft":"_itemRight"](g,c,d);else if(f==t.LEFT)b=e[h?"_itemRight":"_itemLeft"](g,c,d);else if(f==t.DOWN)b=e._itemDown(g,c,d);else if(f==t.UP)b=e._itemUp(g,c,d);else if(f==t.ESC)b=e._itemEsc(g,c);else if(f==t.ENTER||f==t.SPACEBAR)b=g.children(".k-link"),b.length>0&&(e._click({target:b[0],preventDefault:function(){},enterKey:!0}),e._moveHover(g,e._findRootParent(g)));else if(f==t.TAB)return b=e._findRootParent(g),e._moveHover(g,b),void e._checkActiveElement();b&&b[0]&&(a.preventDefault(),a.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(a){var b=this.wrapper.hasClass("k-menu-vertical");return a.length?a.parent().hasClass("k-group")||b:b},_itemHasChildren:function(a){return a.length?a.children("ul.k-group, div.k-animation-container").length>0:!1},_moveHover:function(b,c){var d=this,e=d._ariaId;b.length&&c.length&&b.removeClass(T),c.length&&(c[0].id&&(e=c[0].id),c.addClass(T),d._oldHoverItem=c,e&&(d.element.removeAttr("aria-activedescendant"),a("#"+e).removeAttr("id"),c.attr("id",e),d.element.attr("aria-activedescendant",e)))},_findRootParent:function(a){return a.parent().hasClass("k-menu")?a:a.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(a){return a.parent().hasClass("k-menu")},_itemRight:function(a,b,c){var d,e,f=this;if(!a.hasClass(U))return b?c?(f.open(a),d=a.find(".k-group").children().first()):"horizontal"==f.options.orientation&&(e=f._findRootParent(a),f.close(e),d=e.nextAll(aa)):(d=a.nextAll(aa),d.length||(d=a.prevAll(ba))),d&&!d.length?d=f.wrapper.children(".k-item").first():d||(d=[]),f._moveHover(a,d),d},_itemLeft:function(a,b){var c,d=this;return b?(c=a.parent().closest(".k-item"),d.close(c),d._isRootItem(c)&&"horizontal"==d.options.orientation&&(c=c.prevAll(aa))):(c=a.prevAll(aa),c.length||(c=a.nextAll(ba))),c.length||(c=d.wrapper.children(".k-item").last()),d._moveHover(a,c),c},_itemDown:function(a,b,c){var d,e=this;if(b)d=a.nextAll(aa);else{if(!c||a.hasClass(U))return;e.open(a),d=a.find(".k-group").children().first()}return!d.length&&a.length?d=a.parent().children().first():a.length||(d=e.wrapper.children(".k-item").first()),e._moveHover(a,d),d},_itemUp:function(a,b){var c,d=this;if(b)return c=a.prevAll(aa),!c.length&&a.length?c=a.parent().children().last():a.length||(c=d.wrapper.children(".k-item").last()),d._moveHover(a,c),c},_itemEsc:function(a,b){var c,d=this;return b?(c=a.parent().closest(".k-item"),d.close(c),d._moveHover(a,c),c):a},_focusHandler:function(b){var c=this,d=a(j.eventTarget(b)).closest(X);setTimeout(function(){c._moveHover([],d),d.children(".k-content")[0]&&d.parent().closest(".k-item").removeClass(T)},200)},_animations:function(a){a&&"animation"in a&&!a.animation&&(a.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}}),p(i,{renderItem:function(a){a=p({menu:{},group:{}},a);var b=da.empty,c=a.item;return da.item(p(a,{image:c.imageUrl?da.image:b,sprite:c.spriteCssClass?da.sprite:b,itemWrapper:da.itemWrapper,renderContent:i.renderContent,arrow:c.items||c.content?da.arrow:b,subGroup:i.renderGroup},ea))},renderGroup:function(a){return da.group(p({renderItems:function(a){for(var b="",c=0,d=a.items,e=d?d.length:0,f=p({length:e},a.group);e>c;c++)b+=i.renderItem(p(a,{group:f,item:p({index:c},d[c])}));return b}},a,ea))},renderContent:function(a){return da.content(p(a,ea))}}),j.ui.plugin(i)}(window.joy.jQuery);